<!doctype html><html lang=zh-CN data-theme=dark><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.147.7"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="ç¬¬åå››ç«  æ•°æ®åˆ†ææ¡ˆä¾‹"><meta itemprop=description content="ä¿æŒç®€å•çš„æ˜“ç”¨æ€§å’Œå¼ºå¤§çš„åŠŸèƒ½ã€‚"><meta name=description content="ä¿æŒç®€å•çš„æ˜“ç”¨æ€§å’Œå¼ºå¤§çš„åŠŸèƒ½ã€‚"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://jsd.cdn.zzko.cn/gh/richbridge/picx-images-hosting@master/avatar.avif"><meta itemprop=keywords content="python"><meta property="og:type" content="article"><meta property="og:title" content="ç¬¬åå››ç«  æ•°æ®åˆ†ææ¡ˆä¾‹"><meta property="og:description" content="ä¿æŒç®€å•çš„æ˜“ç”¨æ€§å’Œå¼ºå¤§çš„åŠŸèƒ½ã€‚"><meta property="og:image" content="https://jsd.cdn.zzko.cn/gh/richbridge/picx-images-hosting@master/avatar.avif"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="//localhost:1313/post/%E7%A8%8B%E6%8A%80/python/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/ch14-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/"><meta property="og:site_name" content="æ¨Šå°˜åˆ¹è®°"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="Rich"><meta property="article:published_time" content="2023-09-25 00:00:00 +0000 UTC"><meta property="article:modified_time" content="2023-09-25 00:00:00 +0000 UTC"><link type=text/css rel=stylesheet href=//localhost:1313/js/3rd/font-awesome/6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=//localhost:1313/js/3rd/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=//localhost:1313/js/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.css?=1750130938"><style type=text/css>.post-footer hr:after{content:"~ æˆ‘å¯æ˜¯æœ‰åº•çº¿çš„å“Ÿ ~"}.flinks-list-footer hr:after{content:"~ æˆ‘å¯æ˜¯æœ‰åº•çº¿çš„å“Ÿ ~"}</style><link rel=stylesheet type=text/css href="/css/custom_style.css?=1750130938"><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>ç¬¬åå››ç«  æ•°æ®åˆ†ææ¡ˆä¾‹ - æ¨Šå°˜åˆ¹è®°</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>æ¨Šå°˜åˆ¹è®°</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>çº¢å°˜æ¹®ç­ï¼Œå”¯æœ‰å°˜åˆ¹</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>å½’æ¡£
<span class=badge>629</span></a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-thumbs-up hvr-icon"></i>å‹é“¾</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>å…³äº</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>æœç´¢</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=æœç´¢... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>æ–‡ç« ç›®å½•</li><li class=sidebar-nav-overview>ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#141-æ¥è‡ªbitlyçš„usagovæ•°æ®>14.1 æ¥è‡ªBitlyçš„USA.govæ•°æ®</a><ul><li><a href=#1411-ç”¨pandaså¯¹æ—¶åŒºè¿›è¡Œè®¡æ•°>14.1.1 ç”¨pandaså¯¹æ—¶åŒºè¿›è¡Œè®¡æ•°</a></li></ul></li><li><a href=#142-movielens-1mæ•°æ®é›†>14.2 MovieLens 1Mæ•°æ®é›†</a><ul><li><a href=#1421-è®¡ç®—è¯„åˆ†åˆ†æ­§>14.2.1 è®¡ç®—è¯„åˆ†åˆ†æ­§</a></li></ul></li><li><a href=#143-1880-2010å¹´é—´å…¨ç¾å©´å„¿å§“å>14.3 1880-2010å¹´é—´å…¨ç¾å©´å„¿å§“å</a><ul><li><a href=#1431-åˆ†æå‘½åè¶‹åŠ¿>14.3.1 åˆ†æå‘½åè¶‹åŠ¿</a></li><li><a href=#1432-è¯„ä¼°å‘½åå¤šæ ·æ€§çš„å¢é•¿>14.3.2 è¯„ä¼°å‘½åå¤šæ ·æ€§çš„å¢é•¿</a></li><li><a href=#1433-æœ€åä¸€ä¸ªå­—æ¯çš„å˜é©>14.3.3 â€œæœ€åä¸€ä¸ªå­—æ¯â€çš„å˜é©</a></li><li><a href=#1434-å˜æˆå¥³å­©åå­—çš„ç”·å­©åå­—ä»¥åŠç›¸åçš„æƒ…å†µ>14.3.4 å˜æˆå¥³å­©åå­—çš„ç”·å­©åå­—ï¼ˆä»¥åŠç›¸åçš„æƒ…å†µï¼‰</a></li></ul></li><li><a href=#144-usdaé£Ÿå“æ•°æ®åº“>14.4 USDAé£Ÿå“æ•°æ®åº“</a></li><li><a href=#145-2012è”é‚¦é€‰ä¸¾å§”å‘˜ä¼šæ•°æ®åº“>14.5 2012è”é‚¦é€‰ä¸¾å§”å‘˜ä¼šæ•°æ®åº“</a><ul><li><a href=#1451-æ ¹æ®èŒä¸šå’Œé›‡ä¸»ç»Ÿè®¡èµåŠ©ä¿¡æ¯>14.5.1 æ ¹æ®èŒä¸šå’Œé›‡ä¸»ç»Ÿè®¡èµåŠ©ä¿¡æ¯</a></li><li><a href=#1452-å¯¹å‡ºèµ„é¢åˆ†ç»„>14.5.2 å¯¹å‡ºèµ„é¢åˆ†ç»„</a></li><li><a href=#1453-æ ¹æ®å·ç»Ÿè®¡èµåŠ©ä¿¡æ¯>14.5.3 æ ¹æ®å·ç»Ÿè®¡èµåŠ©ä¿¡æ¯</a></li></ul></li><li><a href=#146-æ€»ç»“>14.6 æ€»ç»“</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=Rich src=/imgs/img-lazy-loading.gif data-src=https://jsd.cdn.zzko.cn/gh/richbridge/picx-images-hosting@master/avatar.avif><p class=site-author-name itemprop=name>Rich</p><div class=site-description itemprop=description>ä¿æŒç®€å•çš„æ˜“ç”¨æ€§å’Œå¼ºå¤§çš„åŠŸèƒ½ã€‚</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>629</span>
<span class=site-state-item-name>æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>8</span>
<span class=site-state-item-name>åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>99</span>
<span class=site-state-item-name>æ ‡ç­¾</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/richbridge title="Github â†’ https://github.com/richbridge" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/richfan-38 title="çŸ¥ä¹ â†’ https://www.zhihu.com/people/richfan-38" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
çŸ¥ä¹</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans class=cc-opacity rel=noopener target=_blank title=å…±äº«çŸ¥è¯†><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=å…±äº«çŸ¥è¯†></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
å‹æƒ…é“¾æ¥</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li><li class=links-of-blogroll-item><a href=https://lisenhui.cn title=https://lisenhui.cn target=_blank>å‡¡æ¢¦æ˜Ÿå°˜ç©ºé—´ç«™</a></li></ul></div><div class="mydefined animated" itemprop=custom><span>æ”¯æŒè‡ªå®šä¹‰CSSå’ŒSidebarå¸ƒå±€å•¦ğŸ’„ğŸ’„ğŸ’„</span></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>ç½‘ç«™èµ„è®¯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>å·²è¿è¡Œï¼š</div><div class=item-count id=runTimes data-publishdate="0001-01-01 00:00:00 +0000 UTC"></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>æ€»è®¿å®¢æ•°ï¼š</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>é¡µé¢æµè§ˆï¼š</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>æ€»å­—æ•°ï¼š</div><div class=item-count id=wordsCount data-count=2702735></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>é˜…è¯»çº¦ï¼š</div><div class=item-count id=readTimes data-times=5708></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>æœ€åæ›´æ–°äºï¼š</div><div class=item-count id=last-push-date data-lastpushdate="2025-01-24 00:00:00 +0000 UTC"></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-i18n-translate class=button title=å¤šè¯­è¨€ç¿»è¯‘><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=æ·±æµ…æ¨¡å¼åˆ‡æ¢><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=è¿”å›é¡¶éƒ¨><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/richbridge rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=//localhost:1313/post/%E7%A8%8B%E6%8A%80/python/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/ch14-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="https://jsd.cdn.zzko.cn/gh/richbridge/picx-images-hosting@master/avatar.avif"><meta itemprop=name content="Rich"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Rich"><meta itemprop=description content="ä¿æŒç®€å•çš„æ˜“ç”¨æ€§å’Œå¼ºå¤§çš„åŠŸèƒ½ã€‚"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="ç¬¬åå››ç«  æ•°æ®åˆ†ææ¡ˆä¾‹"><meta itemprop=description content="æœ¬ä¹¦æ­£æ–‡çš„æœ€åä¸€ç« ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€äº›çœŸå®ä¸–ç•Œçš„æ•°æ®é›†ã€‚å¯¹äºæ¯ä¸ªæ•°æ®é›†ï¼Œæˆ‘ä»¬ä¼šç”¨ä¹‹å‰ä»‹ç»çš„æ–¹æ³•ï¼Œä»åŸå§‹æ•°æ®ä¸­æå–æœ‰æ„ä¹‰çš„å†…å®¹ã€‚å±•ç¤ºçš„æ–¹æ³•é€‚ç”¨äºå…¶å®ƒæ•°æ®é›†ï¼Œä¹ŸåŒ…æ‹¬ä½ çš„ã€‚æœ¬ç« åŒ…å«äº†ä¸€äº›å„ç§å„æ ·çš„æ¡ˆä¾‹æ•°æ®é›†ï¼Œå¯ä»¥ç”¨æ¥ç»ƒä¹ ã€‚"></span><header class=post-header><h1 class=post-title itemprop="name headline">ç¬¬åå››ç«  æ•°æ®åˆ†ææ¡ˆä¾‹</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š
</span><time title="åˆ›å»ºæ—¶é—´ï¼š2023-09-25 00:00:00 +00:00" itemprop="dateCreated datePublished" datetime="2023-09-25 00:00:00 +0000 UTC">2023-09-25
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=åˆ†ç±»äº>åˆ†ç±»äºï¼š
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E7%A8%8B%E6%8A%80/ itemprop=url rel=index><span itemprop=name>ç¨‹æŠ€</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=å­—æ•°><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>å­—æ•°ï¼š</span>
<span>14300</span>
</span><span class=post-meta-item title=é˜…è¯»><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>é˜…è¯»ï¼š&ap;</span>
<span>29åˆ†é’Ÿ</span>
</span><span class=post-meta-item title=æµè§ˆ><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>æµè§ˆï¼š
</span><span id=busuanzi_value_page_pv data-path=/post/%E7%A8%8B%E6%8A%80/python/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/ch14-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><p>æœ¬ä¹¦æ­£æ–‡çš„æœ€åä¸€ç« ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€äº›çœŸå®ä¸–ç•Œçš„æ•°æ®é›†ã€‚å¯¹äºæ¯ä¸ªæ•°æ®é›†ï¼Œæˆ‘ä»¬ä¼šç”¨ä¹‹å‰ä»‹ç»çš„æ–¹æ³•ï¼Œä»åŸå§‹æ•°æ®ä¸­æå–æœ‰æ„ä¹‰çš„å†…å®¹ã€‚å±•ç¤ºçš„æ–¹æ³•é€‚ç”¨äºå…¶å®ƒæ•°æ®é›†ï¼Œä¹ŸåŒ…æ‹¬ä½ çš„ã€‚æœ¬ç« åŒ…å«äº†ä¸€äº›å„ç§å„æ ·çš„æ¡ˆä¾‹æ•°æ®é›†ï¼Œå¯ä»¥ç”¨æ¥ç»ƒä¹ ã€‚</p><a id=more></a><p>æ¡ˆä¾‹æ•°æ®é›†å¯ä»¥åœ¨Githubä»“åº“æ‰¾åˆ°ï¼Œè§ç¬¬ä¸€ç« ã€‚</p><h2 id=141-æ¥è‡ªbitlyçš„usagovæ•°æ®>14.1 æ¥è‡ªBitlyçš„USA.govæ•°æ®
<a class=header-anchor href=#141-%e6%9d%a5%e8%87%aabitly%e7%9a%84usagov%e6%95%b0%e6%8d%ae></a></h2><p>2011å¹´ï¼ŒURLç¼©çŸ­æœåŠ¡Bitlyè·Ÿç¾å›½æ”¿åºœç½‘ç«™USA.govåˆä½œï¼Œæä¾›äº†ä¸€ä»½ä»ç”Ÿæˆ.govæˆ–.milçŸ­é“¾æ¥çš„ç”¨æˆ·é‚£é‡Œæ”¶é›†æ¥çš„åŒ¿åæ•°æ®ã€‚åœ¨2011å¹´ï¼Œé™¤å®æ—¶æ•°æ®ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä¸‹è½½æ–‡æœ¬æ–‡ä»¶å½¢å¼çš„æ¯å°æ—¶å¿«ç…§ã€‚å†™ä½œæ­¤ä¹¦æ—¶ï¼ˆ2017å¹´ï¼‰ï¼Œè¿™é¡¹æœåŠ¡å·²ç»å…³é—­ï¼Œä½†æˆ‘ä»¬ä¿å­˜ä¸€ä»½æ•°æ®ç”¨äºæœ¬ä¹¦çš„æ¡ˆä¾‹ã€‚</p><p>ä»¥æ¯å°æ—¶å¿«ç…§ä¸ºä¾‹ï¼Œæ–‡ä»¶ä¸­å„è¡Œçš„æ ¼å¼ä¸ºJSONï¼ˆå³JavaScript Object Notationï¼Œè¿™æ˜¯ä¸€ç§å¸¸ç”¨çš„Webæ•°æ®æ ¼å¼ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åªè¯»å–æŸä¸ªæ–‡ä»¶ä¸­çš„ç¬¬ä¸€è¡Œï¼Œé‚£ä¹ˆæ‰€çœ‹åˆ°çš„ç»“æœåº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>5</span><span class=p>]:</span> <span class=n>path</span> <span class=o>=</span> <span class=s1>&#39;datasets/bitly_usagov/example.txt&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>6</span><span class=p>]:</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>)</span><span class=o>.</span><span class=n>readline</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>6</span><span class=p>]:</span> <span class=s1>&#39;{ &#34;a&#34;: &#34;Mozilla</span><span class=se>\\</span><span class=s1>/5.0 (Windows NT 6.1; WOW64) AppleWebKit</span><span class=se>\\</span><span class=s1>/535.11</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=n>KHTML</span><span class=p>,</span> <span class=n>like</span> <span class=n>Gecko</span><span class=p>)</span> <span class=n>Chrome</span>\\<span class=o>/</span><span class=mf>17.0.963.78</span> <span class=n>Safari</span>\\<span class=o>/</span><span class=mf>535.11</span><span class=s2>&#34;, &#34;</span><span class=n>c</span><span class=s2>&#34;: &#34;</span><span class=n>US</span><span class=s2>&#34;, &#34;</span><span class=n>nk</span><span class=s2>&#34;: 1,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;tz&#34;</span><span class=p>:</span> <span class=s2>&#34;America</span><span class=se>\\</span><span class=s2>/New_York&#34;</span><span class=p>,</span> <span class=s2>&#34;gr&#34;</span><span class=p>:</span> <span class=s2>&#34;MA&#34;</span><span class=p>,</span> <span class=s2>&#34;g&#34;</span><span class=p>:</span> <span class=s2>&#34;A6qOVH&#34;</span><span class=p>,</span> <span class=s2>&#34;h&#34;</span><span class=p>:</span> <span class=s2>&#34;wfLQtf&#34;</span><span class=p>,</span> <span class=s2>&#34;l&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;orofrog&#34;</span><span class=p>,</span> <span class=s2>&#34;al&#34;</span><span class=p>:</span> <span class=s2>&#34;en-US,en;q=0.8&#34;</span><span class=p>,</span> <span class=s2>&#34;hh&#34;</span><span class=p>:</span> <span class=s2>&#34;1.usa.gov&#34;</span><span class=p>,</span> <span class=s2>&#34;r&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;http:</span><span class=se>\\</span><span class=s2>/</span><span class=se>\\</span><span class=s2>/www.facebook.com</span><span class=se>\\</span><span class=s2>/l</span><span class=se>\\</span><span class=s2>/7AQEFzjSi</span><span class=se>\\</span><span class=s2>/1.usa.gov</span><span class=se>\\</span><span class=s2>/wfLQtf&#34;</span><span class=p>,</span> <span class=s2>&#34;u&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;http:</span><span class=se>\\</span><span class=s2>/</span><span class=se>\\</span><span class=s2>/www.ncbi.nlm.nih.gov</span><span class=se>\\</span><span class=s2>/pubmed</span><span class=se>\\</span><span class=s2>/22415991&#34;</span><span class=p>,</span> <span class=s2>&#34;t&#34;</span><span class=p>:</span> <span class=mi>1331923247</span><span class=p>,</span> <span class=s2>&#34;hc&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=mi>1331822918</span><span class=p>,</span> <span class=s2>&#34;cy&#34;</span><span class=p>:</span> <span class=s2>&#34;Danvers&#34;</span><span class=p>,</span> <span class=s2>&#34;ll&#34;</span><span class=p>:</span> <span class=p>[</span> <span class=mf>42.576698</span><span class=p>,</span> <span class=o>-</span><span class=mf>70.954903</span> <span class=p>]</span> <span class=p>}</span>\<span class=n>n</span><span class=s1>&#39;</span></span></span></code></pre></td></tr></table></div></div><p>Pythonæœ‰å†…ç½®æˆ–ç¬¬ä¸‰æ–¹æ¨¡å—å¯ä»¥å°†JSONå­—ç¬¦ä¸²è½¬æ¢æˆPythonå­—å…¸å¯¹è±¡ã€‚è¿™é‡Œï¼Œæˆ‘å°†ä½¿ç”¨jsonæ¨¡å—åŠå…¶loadså‡½æ•°é€è¡ŒåŠ è½½å·²ç»ä¸‹è½½å¥½çš„æ•°æ®æ–‡ä»¶ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=n>path</span> <span class=o>=</span> <span class=s1>&#39;datasets/bitly_usagov/example.txt&#39;</span>
</span></span><span class=line><span class=cl><span class=n>records</span> <span class=o>=</span> <span class=p>[</span><span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>line</span><span class=p>)</span> <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>)]</span></span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨ï¼Œrecordså¯¹è±¡å°±æˆä¸ºä¸€ç»„Pythonå­—å…¸äº†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>18</span><span class=p>]:</span> <span class=n>records</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>18</span><span class=p>]:</span>
</span></span><span class=line><span class=cl><span class=p>{</span><span class=s1>&#39;a&#39;</span><span class=p>:</span> <span class=s1>&#39;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko)</span>
</span></span><span class=line><span class=cl><span class=n>Chrome</span><span class=o>/</span><span class=mf>17.0.963.78</span> <span class=n>Safari</span><span class=o>/</span><span class=mf>535.11</span><span class=s1>&#39;,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;al&#39;</span><span class=p>:</span> <span class=s1>&#39;en-US,en;q=0.8&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;c&#39;</span><span class=p>:</span> <span class=s1>&#39;US&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;cy&#39;</span><span class=p>:</span> <span class=s1>&#39;Danvers&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;g&#39;</span><span class=p>:</span> <span class=s1>&#39;A6qOVH&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;gr&#39;</span><span class=p>:</span> <span class=s1>&#39;MA&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;h&#39;</span><span class=p>:</span> <span class=s1>&#39;wfLQtf&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;hc&#39;</span><span class=p>:</span> <span class=mi>1331822918</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;hh&#39;</span><span class=p>:</span> <span class=s1>&#39;1.usa.gov&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;l&#39;</span><span class=p>:</span> <span class=s1>&#39;orofrog&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;ll&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mf>42.576698</span><span class=p>,</span> <span class=o>-</span><span class=mf>70.954903</span><span class=p>],</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;nk&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;r&#39;</span><span class=p>:</span> <span class=s1>&#39;http://www.facebook.com/l/7AQEFzjSi/1.usa.gov/wfLQtf&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;t&#39;</span><span class=p>:</span> <span class=mi>1331923247</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;tz&#39;</span><span class=p>:</span> <span class=s1>&#39;America/New_York&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;u&#39;</span><span class=p>:</span> <span class=s1>&#39;http://www.ncbi.nlm.nih.gov/pubmed/22415991&#39;</span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>##ç”¨çº¯Pythonä»£ç å¯¹æ—¶åŒºè¿›è¡Œè®¡æ•°</p><p>å‡è®¾æˆ‘ä»¬æƒ³è¦çŸ¥é“è¯¥æ•°æ®é›†ä¸­æœ€å¸¸å‡ºç°çš„æ˜¯å“ªä¸ªæ—¶åŒºï¼ˆå³tzå­—æ®µï¼‰ï¼Œå¾—åˆ°ç­”æ¡ˆçš„åŠæ³•æœ‰å¾ˆå¤šã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨åˆ—è¡¨æ¨å¯¼å¼å–å‡ºä¸€ç»„æ—¶åŒºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2>2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3>3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4>4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5>5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6>6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7>7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>12</span><span class=p>]:</span> <span class=n>time_zones</span> <span class=o>=</span> <span class=p>[</span><span class=n>rec</span><span class=p>[</span><span class=s1>&#39;tz&#39;</span><span class=p>]</span> <span class=k>for</span> <span class=n>rec</span> <span class=ow>in</span> <span class=n>records</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=o>---------------------------------------------------------------------------</span>
</span></span><span class=line><span class=cl><span class=ne>KeyError</span>                                  <span class=n>Traceback</span> <span class=p>(</span><span class=n>most</span> <span class=n>recent</span> <span class=n>call</span> <span class=n>last</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>ipython</span><span class=o>-</span><span class=nb>input</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=n>db4fbd348da9</span><span class=o>&gt;</span> <span class=ow>in</span> <span class=o>&lt;</span><span class=n>module</span><span class=o>&gt;</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=o>----&gt;</span> <span class=mi>1</span> <span class=n>time_zones</span> <span class=o>=</span> <span class=p>[</span><span class=n>rec</span><span class=p>[</span><span class=s1>&#39;tz&#39;</span><span class=p>]</span> <span class=k>for</span> <span class=n>rec</span> <span class=ow>in</span> <span class=n>records</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>ipython</span><span class=o>-</span><span class=nb>input</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=n>db4fbd348da9</span><span class=o>&gt;</span> <span class=ow>in</span> <span class=o>&lt;</span><span class=n>listcomp</span><span class=o>&gt;</span><span class=p>(</span><span class=mf>.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=o>----&gt;</span> <span class=mi>1</span> <span class=n>time_zones</span> <span class=o>=</span> <span class=p>[</span><span class=n>rec</span><span class=p>[</span><span class=s1>&#39;tz&#39;</span><span class=p>]</span> <span class=k>for</span> <span class=n>rec</span> <span class=ow>in</span> <span class=n>records</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=ne>KeyError</span><span class=p>:</span> <span class=s1>&#39;tz&#39;</span></span></span></code></pre></td></tr></table></div></div><p>æ™•ï¼åŸæ¥å¹¶ä¸æ˜¯æ‰€æœ‰è®°å½•éƒ½æœ‰æ—¶åŒºå­—æ®µã€‚è¿™ä¸ªå¥½åŠï¼Œåªéœ€åœ¨åˆ—è¡¨æ¨å¯¼å¼æœ«å°¾åŠ ä¸Šä¸€ä¸ªif &rsquo;tz&rsquo;in recåˆ¤æ–­å³å¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>13</span><span class=p>]:</span> <span class=n>time_zones</span> <span class=o>=</span> <span class=p>[</span><span class=n>rec</span><span class=p>[</span><span class=s1>&#39;tz&#39;</span><span class=p>]</span> <span class=k>for</span> <span class=n>rec</span> <span class=ow>in</span> <span class=n>records</span> <span class=k>if</span> <span class=s1>&#39;tz&#39;</span> <span class=ow>in</span> <span class=n>rec</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>14</span><span class=p>]:</span> <span class=n>time_zones</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>14</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=p>[</span><span class=s1>&#39;America/New_York&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;America/Denver&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;America/New_York&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;America/Sao_Paulo&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;America/New_York&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;America/New_York&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;Europe/Warsaw&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;&#39;</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>åªçœ‹å‰10ä¸ªæ—¶åŒºï¼Œæˆ‘ä»¬å‘ç°æœ‰äº›æ˜¯æœªçŸ¥çš„ï¼ˆå³ç©ºçš„ï¼‰ã€‚è™½ç„¶å¯ä»¥å°†å®ƒä»¬è¿‡æ»¤æ‰ï¼Œä½†ç°åœ¨æš‚æ—¶å…ˆç•™ç€ã€‚æ¥ä¸‹æ¥ï¼Œä¸ºäº†å¯¹æ—¶åŒºè¿›è¡Œè®¡æ•°ï¼Œè¿™é‡Œä»‹ç»ä¸¤ä¸ªåŠæ³•ï¼šä¸€ä¸ªè¾ƒéš¾ï¼ˆåªä½¿ç”¨æ ‡å‡†Pythonåº“ï¼‰ï¼Œå¦ä¸€ä¸ªè¾ƒç®€å•ï¼ˆä½¿ç”¨pandasï¼‰ã€‚è®¡æ•°çš„åŠæ³•ä¹‹ä¸€æ˜¯åœ¨éå†æ—¶åŒºçš„è¿‡ç¨‹ä¸­å°†è®¡æ•°å€¼ä¿å­˜åœ¨å­—å…¸ä¸­ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3>3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4>4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5>5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6>6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7>7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_counts</span><span class=p>(</span><span class=n>sequence</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>counts</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>sequence</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>counts</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>counts</span><span class=p>[</span><span class=n>x</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>counts</span><span class=p>[</span><span class=n>x</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>counts</span></span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä½¿ç”¨Pythonæ ‡å‡†åº“çš„æ›´é«˜çº§å·¥å…·ï¼Œé‚£ä¹ˆä½ å¯èƒ½ä¼šå°†ä»£ç å†™å¾—æ›´ç®€æ´ä¸€äº›ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2>2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3>3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4>4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5>5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6>6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>defaultdict</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_counts2</span><span class=p>(</span><span class=n>sequence</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>counts</span> <span class=o>=</span> <span class=n>defaultdict</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span> <span class=c1># values will initialize to 0</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>sequence</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>counts</span><span class=p>[</span><span class=n>x</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>counts</span></span></span></code></pre></td></tr></table></div></div><p>æˆ‘å°†é€»è¾‘å†™åˆ°å‡½æ•°ä¸­æ˜¯ä¸ºäº†è·å¾—æ›´é«˜çš„å¤ç”¨æ€§ã€‚è¦ç”¨å®ƒå¯¹æ—¶åŒºè¿›è¡Œå¤„ç†ï¼Œåªéœ€å°†time_zonesä¼ å…¥å³å¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4>4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5>5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6>6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>17</span><span class=p>]:</span> <span class=n>counts</span> <span class=o>=</span> <span class=n>get_counts</span><span class=p>(</span><span class=n>time_zones</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>18</span><span class=p>]:</span> <span class=n>counts</span><span class=p>[</span><span class=s1>&#39;America/New_York&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>18</span><span class=p>]:</span> <span class=mi>1251</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>19</span><span class=p>]:</span> <span class=nb>len</span><span class=p>(</span><span class=n>time_zones</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>19</span><span class=p>]:</span> <span class=mi>3440</span></span></span></code></pre></td></tr></table></div></div><p>å¦‚æœæƒ³è¦å¾—åˆ°å‰10ä½çš„æ—¶åŒºåŠå…¶è®¡æ•°å€¼ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸€äº›æœ‰å…³å­—å…¸çš„å¤„ç†æŠ€å·§ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1>1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2>2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3>3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>top_counts</span><span class=p>(</span><span class=n>count_dict</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>value_key_pairs</span> <span class=o>=</span> <span class=p>[(</span><span class=n>count</span><span class=p>,</span> <span class=n>tz</span><span class=p>)</span> <span class=k>for</span> <span class=n>tz</span><span class=p>,</span> <span class=n>count</span> <span class=ow>in</span> <span class=n>count_dict</span><span class=o>.</span><span class=n>items</span><span class=p>()]</span>
</span></span><span class=line><span class=cl>    <span class=n>value_key_pairs</span><span class=o>.</span><span class=n>sort</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>value_key_pairs</span><span class=p>[</span><span class=o>-</span><span class=n>n</span><span class=p>:]</span></span></span></code></pre></td></tr></table></div></div><p>ç„¶åæœ‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>21</span><span class=p>]:</span> <span class=n>top_counts</span><span class=p>(</span><span class=n>counts</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>21</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=p>[(</span><span class=mi>33</span><span class=p>,</span> <span class=s1>&#39;America/Sao_Paulo&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=mi>35</span><span class=p>,</span> <span class=s1>&#39;Europe/Madrid&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>36</span><span class=p>,</span> <span class=s1>&#39;Pacific/Honolulu&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=mi>37</span><span class=p>,</span> <span class=s1>&#39;Asia/Tokyo&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=mi>74</span><span class=p>,</span> <span class=s1>&#39;Europe/London&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=mi>191</span><span class=p>,</span> <span class=s1>&#39;America/Denver&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=mi>382</span><span class=p>,</span> <span class=s1>&#39;America/Los_Angeles&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=mi>400</span><span class=p>,</span> <span class=s1>&#39;America/Chicago&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=mi>521</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=mi>1251</span><span class=p>,</span> <span class=s1>&#39;America/New_York&#39;</span><span class=p>)]</span></span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä½ æœç´¢Pythonçš„æ ‡å‡†åº“ï¼Œä½ èƒ½æ‰¾åˆ°collections.Counterç±»ï¼Œå®ƒå¯ä»¥ä½¿è¿™é¡¹å·¥ä½œæ›´ç®€å•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15>15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>22</span><span class=p>]:</span> <span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>Counter</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>23</span><span class=p>]:</span> <span class=n>counts</span> <span class=o>=</span> <span class=n>Counter</span><span class=p>(</span><span class=n>time_zones</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>24</span><span class=p>]:</span> <span class=n>counts</span><span class=o>.</span><span class=n>most_common</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>24</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=p>[(</span><span class=s1>&#39;America/New_York&#39;</span><span class=p>,</span> <span class=mi>1251</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=mi>521</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=s1>&#39;America/Chicago&#39;</span><span class=p>,</span> <span class=mi>400</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=s1>&#39;America/Los_Angeles&#39;</span><span class=p>,</span> <span class=mi>382</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=s1>&#39;America/Denver&#39;</span><span class=p>,</span> <span class=mi>191</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=s1>&#39;Europe/London&#39;</span><span class=p>,</span> <span class=mi>74</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=s1>&#39;Asia/Tokyo&#39;</span><span class=p>,</span> <span class=mi>37</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=s1>&#39;Pacific/Honolulu&#39;</span><span class=p>,</span> <span class=mi>36</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=s1>&#39;Europe/Madrid&#39;</span><span class=p>,</span> <span class=mi>35</span><span class=p>),</span>
</span></span><span class=line><span class=cl> <span class=p>(</span><span class=s1>&#39;America/Sao_Paulo&#39;</span><span class=p>,</span> <span class=mi>33</span><span class=p>)]</span></span></span></code></pre></td></tr></table></div></div><h3 id=1411-ç”¨pandaså¯¹æ—¶åŒºè¿›è¡Œè®¡æ•°>14.1.1 ç”¨pandaså¯¹æ—¶åŒºè¿›è¡Œè®¡æ•°
<a class=header-anchor href=#1411-%e7%94%a8pandas%e5%af%b9%e6%97%b6%e5%8c%ba%e8%bf%9b%e8%a1%8c%e8%ae%a1%e6%95%b0></a></h3><p>ä»åŸå§‹è®°å½•çš„é›†åˆåˆ›å»ºDateFrameï¼Œä¸å°†è®°å½•åˆ—è¡¨ä¼ é€’åˆ°pandas.DataFrameä¸€æ ·ç®€å•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17>17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18>18</a>
</span><span class=lnt id=hl-11-19><a class=lnlinks href=#hl-11-19>19</a>
</span><span class=lnt id=hl-11-20><a class=lnlinks href=#hl-11-20>20</a>
</span><span class=lnt id=hl-11-21><a class=lnlinks href=#hl-11-21>21</a>
</span><span class=lnt id=hl-11-22><a class=lnlinks href=#hl-11-22>22</a>
</span><span class=lnt id=hl-11-23><a class=lnlinks href=#hl-11-23>23</a>
</span><span class=lnt id=hl-11-24><a class=lnlinks href=#hl-11-24>24</a>
</span><span class=lnt id=hl-11-25><a class=lnlinks href=#hl-11-25>25</a>
</span><span class=lnt id=hl-11-26><a class=lnlinks href=#hl-11-26>26</a>
</span><span class=lnt id=hl-11-27><a class=lnlinks href=#hl-11-27>27</a>
</span><span class=lnt id=hl-11-28><a class=lnlinks href=#hl-11-28>28</a>
</span><span class=lnt id=hl-11-29><a class=lnlinks href=#hl-11-29>29</a>
</span><span class=lnt id=hl-11-30><a class=lnlinks href=#hl-11-30>30</a>
</span><span class=lnt id=hl-11-31><a class=lnlinks href=#hl-11-31>31</a>
</span><span class=lnt id=hl-11-32><a class=lnlinks href=#hl-11-32>32</a>
</span><span class=lnt id=hl-11-33><a class=lnlinks href=#hl-11-33>33</a>
</span><span class=lnt id=hl-11-34><a class=lnlinks href=#hl-11-34>34</a>
</span><span class=lnt id=hl-11-35><a class=lnlinks href=#hl-11-35>35</a>
</span><span class=lnt id=hl-11-36><a class=lnlinks href=#hl-11-36>36</a>
</span><span class=lnt id=hl-11-37><a class=lnlinks href=#hl-11-37>37</a>
</span><span class=lnt id=hl-11-38><a class=lnlinks href=#hl-11-38>38</a>
</span><span class=lnt id=hl-11-39><a class=lnlinks href=#hl-11-39>39</a>
</span><span class=lnt id=hl-11-40><a class=lnlinks href=#hl-11-40>40</a>
</span><span class=lnt id=hl-11-41><a class=lnlinks href=#hl-11-41>41</a>
</span><span class=lnt id=hl-11-42><a class=lnlinks href=#hl-11-42>42</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>25</span><span class=p>]:</span> <span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>26</span><span class=p>]:</span> <span class=n>frame</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>records</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>27</span><span class=p>]:</span> <span class=n>frame</span><span class=o>.</span><span class=n>info</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=k>class</span> <span class=err>&#39;</span><span class=nc>pandas</span><span class=o>.</span><span class=n>core</span><span class=o>.</span><span class=n>frame</span><span class=o>.</span><span class=n>DataFrame</span><span class=s1>&#39;&gt;</span>
</span></span><span class=line><span class=cl><span class=n>RangeIndex</span><span class=p>:</span> <span class=mi>3560</span> <span class=n>entries</span><span class=p>,</span> <span class=mi>0</span> <span class=n>to</span> <span class=mi>3559</span>
</span></span><span class=line><span class=cl><span class=n>Data</span> <span class=n>columns</span> <span class=p>(</span><span class=n>total</span> <span class=mi>18</span> <span class=n>columns</span><span class=p>):</span>
</span></span><span class=line><span class=cl><span class=n>_heartbeat_</span>    <span class=mi>120</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=n>float64</span>
</span></span><span class=line><span class=cl><span class=n>a</span>              <span class=mi>3440</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>al</span>             <span class=mi>3094</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>c</span>              <span class=mi>2919</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>cy</span>             <span class=mi>2919</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>g</span>              <span class=mi>3440</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>gr</span>             <span class=mi>2919</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>h</span>              <span class=mi>3440</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>hc</span>             <span class=mi>3440</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=n>float64</span>
</span></span><span class=line><span class=cl><span class=n>hh</span>             <span class=mi>3440</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>kw</span>             <span class=mi>93</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>l</span>              <span class=mi>3440</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>ll</span>             <span class=mi>2919</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>nk</span>             <span class=mi>3440</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=n>float64</span>
</span></span><span class=line><span class=cl><span class=n>r</span>              <span class=mi>3440</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>t</span>              <span class=mi>3440</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=n>float64</span>
</span></span><span class=line><span class=cl><span class=n>tz</span>             <span class=mi>3440</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>u</span>              <span class=mi>3440</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>dtypes</span><span class=p>:</span> <span class=n>float64</span><span class=p>(</span><span class=mi>4</span><span class=p>),</span> <span class=nb>object</span><span class=p>(</span><span class=mi>14</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>memory</span> <span class=n>usage</span><span class=p>:</span> <span class=mf>500.7</span><span class=o>+</span> <span class=n>KB</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>28</span><span class=p>]:</span> <span class=n>frame</span><span class=p>[</span><span class=s1>&#39;tz&#39;</span><span class=p>][:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>28</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=mi>0</span>     <span class=n>America</span><span class=o>/</span><span class=n>New_York</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>       <span class=n>America</span><span class=o>/</span><span class=n>Denver</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>     <span class=n>America</span><span class=o>/</span><span class=n>New_York</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>    <span class=n>America</span><span class=o>/</span><span class=n>Sao_Paulo</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>     <span class=n>America</span><span class=o>/</span><span class=n>New_York</span>
</span></span><span class=line><span class=cl><span class=mi>5</span>     <span class=n>America</span><span class=o>/</span><span class=n>New_York</span>
</span></span><span class=line><span class=cl><span class=mi>6</span>        <span class=n>Europe</span><span class=o>/</span><span class=n>Warsaw</span>
</span></span><span class=line><span class=cl><span class=mi>7</span>                     
</span></span><span class=line><span class=cl><span class=mi>8</span>                     
</span></span><span class=line><span class=cl><span class=mi>9</span>                     
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>tz</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=nb>object</span></span></span></code></pre></td></tr></table></div></div><p>è¿™é‡Œframeçš„è¾“å‡ºå½¢å¼æ˜¯æ‘˜è¦è§†å›¾ï¼ˆsummary viewï¼‰ï¼Œä¸»è¦ç”¨äºè¾ƒå¤§çš„DataFrameå¯¹è±¡ã€‚æˆ‘ä»¬ç„¶åå¯ä»¥å¯¹Seriesä½¿ç”¨value_countsæ–¹æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1> 1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2> 2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3> 3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4> 4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5> 5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6> 6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7> 7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8> 8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9> 9</a>
</span><span class=lnt id=hl-12-10><a class=lnlinks href=#hl-12-10>10</a>
</span><span class=lnt id=hl-12-11><a class=lnlinks href=#hl-12-11>11</a>
</span><span class=lnt id=hl-12-12><a class=lnlinks href=#hl-12-12>12</a>
</span><span class=lnt id=hl-12-13><a class=lnlinks href=#hl-12-13>13</a>
</span><span class=lnt id=hl-12-14><a class=lnlinks href=#hl-12-14>14</a>
</span><span class=lnt id=hl-12-15><a class=lnlinks href=#hl-12-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>29</span><span class=p>]:</span> <span class=n>tz_counts</span> <span class=o>=</span> <span class=n>frame</span><span class=p>[</span><span class=s1>&#39;tz&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>value_counts</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>30</span><span class=p>]:</span> <span class=n>tz_counts</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>30</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>New_York</span>       <span class=mi>1251</span>
</span></span><span class=line><span class=cl>                        <span class=mi>521</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Chicago</span>         <span class=mi>400</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Los_Angeles</span>     <span class=mi>382</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Denver</span>          <span class=mi>191</span>
</span></span><span class=line><span class=cl><span class=n>Europe</span><span class=o>/</span><span class=n>London</span>            <span class=mi>74</span>
</span></span><span class=line><span class=cl><span class=n>Asia</span><span class=o>/</span><span class=n>Tokyo</span>               <span class=mi>37</span>
</span></span><span class=line><span class=cl><span class=n>Pacific</span><span class=o>/</span><span class=n>Honolulu</span>         <span class=mi>36</span>
</span></span><span class=line><span class=cl><span class=n>Europe</span><span class=o>/</span><span class=n>Madrid</span>            <span class=mi>35</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Sao_Paulo</span>        <span class=mi>33</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>tz</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>int64</span></span></span></code></pre></td></tr></table></div></div><p>æˆ‘ä»¬å¯ä»¥ç”¨matplotlibå¯è§†åŒ–è¿™ä¸ªæ•°æ®ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å…ˆç»™è®°å½•ä¸­æœªçŸ¥æˆ–ç¼ºå¤±çš„æ—¶åŒºå¡«ä¸Šä¸€ä¸ªæ›¿ä»£å€¼ã€‚fillnaå‡½æ•°å¯ä»¥æ›¿æ¢ç¼ºå¤±å€¼ï¼ˆNAï¼‰ï¼Œè€ŒæœªçŸ¥å€¼ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰åˆ™å¯ä»¥é€šè¿‡å¸ƒå°”å‹æ•°ç»„ç´¢å¼•åŠ ä»¥æ›¿æ¢ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span><span class=lnt id=hl-13-18><a class=lnlinks href=#hl-13-18>18</a>
</span><span class=lnt id=hl-13-19><a class=lnlinks href=#hl-13-19>19</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>31</span><span class=p>]:</span> <span class=n>clean_tz</span> <span class=o>=</span> <span class=n>frame</span><span class=p>[</span><span class=s1>&#39;tz&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=s1>&#39;Missing&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>32</span><span class=p>]:</span> <span class=n>clean_tz</span><span class=p>[</span><span class=n>clean_tz</span> <span class=o>==</span> <span class=s1>&#39;&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;Unknown&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>33</span><span class=p>]:</span> <span class=n>tz_counts</span> <span class=o>=</span> <span class=n>clean_tz</span><span class=o>.</span><span class=n>value_counts</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>34</span><span class=p>]:</span> <span class=n>tz_counts</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>34</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>New_York</span>       <span class=mi>1251</span>
</span></span><span class=line><span class=cl><span class=n>Unknown</span>                 <span class=mi>521</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Chicago</span>         <span class=mi>400</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Los_Angeles</span>     <span class=mi>382</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Denver</span>          <span class=mi>191</span>
</span></span><span class=line><span class=cl><span class=n>Missing</span>                 <span class=mi>120</span>
</span></span><span class=line><span class=cl><span class=n>Europe</span><span class=o>/</span><span class=n>London</span>            <span class=mi>74</span>
</span></span><span class=line><span class=cl><span class=n>Asia</span><span class=o>/</span><span class=n>Tokyo</span>               <span class=mi>37</span>
</span></span><span class=line><span class=cl><span class=n>Pacific</span><span class=o>/</span><span class=n>Honolulu</span>         <span class=mi>36</span>
</span></span><span class=line><span class=cl><span class=n>Europe</span><span class=o>/</span><span class=n>Madrid</span>            <span class=mi>35</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>tz</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>int64</span></span></span></code></pre></td></tr></table></div></div><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨seabornåŒ…åˆ›å»ºæ°´å¹³æŸ±çŠ¶å›¾ï¼ˆç»“æœè§å›¾14-1ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1>1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2>2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3>3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4>4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>36</span><span class=p>]:</span> <span class=kn>import</span> <span class=nn>seaborn</span> <span class=k>as</span> <span class=nn>sns</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>37</span><span class=p>]:</span> <span class=n>subset</span> <span class=o>=</span> <span class=n>tz_counts</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>38</span><span class=p>]:</span> <span class=n>sns</span><span class=o>.</span><span class=n>barplot</span><span class=p>(</span><span class=n>y</span><span class=o>=</span><span class=n>subset</span><span class=o>.</span><span class=n>index</span><span class=p>,</span> <span class=n>x</span><span class=o>=</span><span class=n>subset</span><span class=o>.</span><span class=n>values</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://gitee.com/wugenqiang/images/raw/master/02/1240-20201031180126143.png alt="å›¾14-1 usa.govç¤ºä¾‹æ•°æ®ä¸­æœ€å¸¸å‡ºç°çš„æ—¶åŒº"></p><p>aå­—æ®µå«æœ‰æ‰§è¡ŒURLçŸ­ç¼©æ“ä½œçš„æµè§ˆå™¨ã€è®¾å¤‡ã€åº”ç”¨ç¨‹åºçš„ç›¸å…³ä¿¡æ¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3>3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4>4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5>5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6>6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7>7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8>8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>39</span><span class=p>]:</span> <span class=n>frame</span><span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>39</span><span class=p>]:</span> <span class=s1>&#39;GoogleMaps/RochesterNY&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>40</span><span class=p>]:</span> <span class=n>frame</span><span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>][</span><span class=mi>50</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>40</span><span class=p>]:</span> <span class=s1>&#39;Mozilla/5.0 (Windows NT 5.1; rv:10.0.2)</span>
</span></span><span class=line><span class=cl><span class=n>Gecko</span><span class=o>/</span><span class=mi>20100101</span> <span class=n>Firefox</span><span class=o>/</span><span class=mf>10.0.2</span><span class=s1>&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>41</span><span class=p>]:</span> <span class=n>frame</span><span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>][</span><span class=mi>51</span><span class=p>][:</span><span class=mi>50</span><span class=p>]</span>  <span class=c1># long line</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>41</span><span class=p>]:</span> <span class=s1>&#39;Mozilla/5.0 (Linux; U; Android 2.2.2; en-us; LG-P9&#39;</span></span></span></code></pre></td></tr></table></div></div><p>å°†è¿™äº›"agent"å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ä¿¡æ¯éƒ½è§£æå‡ºæ¥æ˜¯ä¸€ä»¶æŒºéƒé—·çš„å·¥ä½œã€‚ä¸€ç§ç­–ç•¥æ˜¯å°†è¿™ç§å­—ç¬¦ä¸²çš„ç¬¬ä¸€èŠ‚ï¼ˆä¸æµè§ˆå™¨å¤§è‡´å¯¹åº”ï¼‰åˆ†ç¦»å‡ºæ¥å¹¶å¾—åˆ°å¦å¤–ä¸€ä»½ç”¨æˆ·è¡Œä¸ºæ‘˜è¦ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16>16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17>17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18>18</a>
</span><span class=lnt id=hl-16-19><a class=lnlinks href=#hl-16-19>19</a>
</span><span class=lnt id=hl-16-20><a class=lnlinks href=#hl-16-20>20</a>
</span><span class=lnt id=hl-16-21><a class=lnlinks href=#hl-16-21>21</a>
</span><span class=lnt id=hl-16-22><a class=lnlinks href=#hl-16-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>42</span><span class=p>]:</span> <span class=n>results</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>([</span><span class=n>x</span><span class=o>.</span><span class=n>split</span><span class=p>()[</span><span class=mi>0</span><span class=p>]</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>frame</span><span class=o>.</span><span class=n>a</span><span class=o>.</span><span class=n>dropna</span><span class=p>()])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>43</span><span class=p>]:</span> <span class=n>results</span><span class=p>[:</span><span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>43</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=mi>0</span>               <span class=n>Mozilla</span><span class=o>/</span><span class=mf>5.0</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>    <span class=n>GoogleMaps</span><span class=o>/</span><span class=n>RochesterNY</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>               <span class=n>Mozilla</span><span class=o>/</span><span class=mf>4.0</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>               <span class=n>Mozilla</span><span class=o>/</span><span class=mf>5.0</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>               <span class=n>Mozilla</span><span class=o>/</span><span class=mf>5.0</span>
</span></span><span class=line><span class=cl><span class=n>dtype</span><span class=p>:</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>44</span><span class=p>]:</span> <span class=n>results</span><span class=o>.</span><span class=n>value_counts</span><span class=p>()[:</span><span class=mi>8</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>44</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>Mozilla</span><span class=o>/</span><span class=mf>5.0</span>                 <span class=mi>2594</span>
</span></span><span class=line><span class=cl><span class=n>Mozilla</span><span class=o>/</span><span class=mf>4.0</span>                  <span class=mi>601</span>
</span></span><span class=line><span class=cl><span class=n>GoogleMaps</span><span class=o>/</span><span class=n>RochesterNY</span>       <span class=mi>121</span>
</span></span><span class=line><span class=cl><span class=n>Opera</span><span class=o>/</span><span class=mf>9.80</span>                    <span class=mi>34</span>
</span></span><span class=line><span class=cl><span class=n>TEST_INTERNET_AGENT</span>           <span class=mi>24</span>
</span></span><span class=line><span class=cl><span class=n>GoogleProducer</span>                <span class=mi>21</span>
</span></span><span class=line><span class=cl><span class=n>Mozilla</span><span class=o>/</span><span class=mf>6.0</span>                    <span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=n>BlackBerry8520</span><span class=o>/</span><span class=mf>5.0.0.681</span>       <span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=n>dtype</span><span class=p>:</span> <span class=n>int64</span></span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨ï¼Œå‡è®¾ä½ æƒ³æŒ‰Windowså’ŒéWindowsç”¨æˆ·å¯¹æ—¶åŒºç»Ÿè®¡ä¿¡æ¯è¿›è¡Œåˆ†è§£ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å‡å®šåªè¦agentå­—ç¬¦ä¸²ä¸­å«æœ‰"Windows"å°±è®¤ä¸ºè¯¥ç”¨æˆ·ä¸ºWindowsç”¨æˆ·ã€‚ç”±äºæœ‰çš„agentç¼ºå¤±ï¼Œæ‰€ä»¥é¦–å…ˆå°†å®ƒä»¬ä»æ•°æ®ä¸­ç§»é™¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>45</span><span class=p>]:</span> <span class=n>cframe</span> <span class=o>=</span> <span class=n>frame</span><span class=p>[</span><span class=n>frame</span><span class=o>.</span><span class=n>a</span><span class=o>.</span><span class=n>notnull</span><span class=p>()]</span></span></span></code></pre></td></tr></table></div></div><p>ç„¶åè®¡ç®—å‡ºå„è¡Œæ˜¯å¦å«æœ‰Windowsçš„å€¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>47</span><span class=p>]:</span> <span class=n>cframe</span><span class=p>[</span><span class=s1>&#39;os&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>where</span><span class=p>(</span><span class=n>cframe</span><span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>str</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=s1>&#39;Windows&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>   <span class=o>....</span><span class=p>:</span>                         <span class=s1>&#39;Windows&#39;</span><span class=p>,</span> <span class=s1>&#39;Not Windows&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>48</span><span class=p>]:</span> <span class=n>cframe</span><span class=p>[</span><span class=s1>&#39;os&#39;</span><span class=p>][:</span><span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>48</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=mi>0</span>        <span class=n>Windows</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>    <span class=n>Not</span> <span class=n>Windows</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>        <span class=n>Windows</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>    <span class=n>Not</span> <span class=n>Windows</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>        <span class=n>Windows</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>os</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=nb>object</span></span></span></code></pre></td></tr></table></div></div><p>æ¥ä¸‹æ¥å°±å¯ä»¥æ ¹æ®æ—¶åŒºå’Œæ–°å¾—åˆ°çš„æ“ä½œç³»ç»Ÿåˆ—è¡¨å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„äº†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>49</span><span class=p>]:</span> <span class=n>by_tz_os</span> <span class=o>=</span> <span class=n>cframe</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;tz&#39;</span><span class=p>,</span> <span class=s1>&#39;os&#39;</span><span class=p>])</span></span></span></code></pre></td></tr></table></div></div><p>åˆ†ç»„è®¡æ•°ï¼Œç±»ä¼¼äºvalue_countså‡½æ•°ï¼Œå¯ä»¥ç”¨sizeæ¥è®¡ç®—ã€‚å¹¶åˆ©ç”¨unstackå¯¹è®¡æ•°ç»“æœè¿›è¡Œé‡å¡‘ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1> 1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2> 2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3> 3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4> 4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5> 5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6> 6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7> 7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8> 8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9> 9</a>
</span><span class=lnt id=hl-20-10><a class=lnlinks href=#hl-20-10>10</a>
</span><span class=lnt id=hl-20-11><a class=lnlinks href=#hl-20-11>11</a>
</span><span class=lnt id=hl-20-12><a class=lnlinks href=#hl-20-12>12</a>
</span><span class=lnt id=hl-20-13><a class=lnlinks href=#hl-20-13>13</a>
</span><span class=lnt id=hl-20-14><a class=lnlinks href=#hl-20-14>14</a>
</span><span class=lnt id=hl-20-15><a class=lnlinks href=#hl-20-15>15</a>
</span><span class=lnt id=hl-20-16><a class=lnlinks href=#hl-20-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>50</span><span class=p>]:</span> <span class=n>agg_counts</span> <span class=o>=</span> <span class=n>by_tz_os</span><span class=o>.</span><span class=n>size</span><span class=p>()</span><span class=o>.</span><span class=n>unstack</span><span class=p>()</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>51</span><span class=p>]:</span> <span class=n>agg_counts</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>51</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>os</span>                              <span class=n>Not</span> <span class=n>Windows</span>  <span class=n>Windows</span>
</span></span><span class=line><span class=cl><span class=n>tz</span>                                                  
</span></span><span class=line><span class=cl>                                      <span class=mf>245.0</span>    <span class=mf>276.0</span>
</span></span><span class=line><span class=cl><span class=n>Africa</span><span class=o>/</span><span class=n>Cairo</span>                            <span class=mf>0.0</span>      <span class=mf>3.0</span>
</span></span><span class=line><span class=cl><span class=n>Africa</span><span class=o>/</span><span class=n>Casablanca</span>                       <span class=mf>0.0</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=n>Africa</span><span class=o>/</span><span class=n>Ceuta</span>                            <span class=mf>0.0</span>      <span class=mf>2.0</span>
</span></span><span class=line><span class=cl><span class=n>Africa</span><span class=o>/</span><span class=n>Johannesburg</span>                     <span class=mf>0.0</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=n>Africa</span><span class=o>/</span><span class=n>Lusaka</span>                           <span class=mf>0.0</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Anchorage</span>                       <span class=mf>4.0</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Argentina</span><span class=o>/</span><span class=n>Buenos_Aires</span>          <span class=mf>1.0</span>      <span class=mf>0.0</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Argentina</span><span class=o>/</span><span class=n>Cordoba</span>               <span class=mf>0.0</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Argentina</span><span class=o>/</span><span class=n>Mendoza</span>               <span class=mf>0.0</span>      <span class=mf>1.0</span></span></span></code></pre></td></tr></table></div></div><p>æœ€åï¼Œæˆ‘ä»¬æ¥é€‰å–æœ€å¸¸å‡ºç°çš„æ—¶åŒºã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œæˆ‘æ ¹æ®agg_countsä¸­çš„è¡Œæ•°æ„é€ äº†ä¸€ä¸ªé—´æ¥ç´¢å¼•æ•°ç»„ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1> 1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2> 2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3> 3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4> 4</a>
</span><span class=lnt id=hl-21-5><a class=lnlinks href=#hl-21-5> 5</a>
</span><span class=lnt id=hl-21-6><a class=lnlinks href=#hl-21-6> 6</a>
</span><span class=lnt id=hl-21-7><a class=lnlinks href=#hl-21-7> 7</a>
</span><span class=lnt id=hl-21-8><a class=lnlinks href=#hl-21-8> 8</a>
</span><span class=lnt id=hl-21-9><a class=lnlinks href=#hl-21-9> 9</a>
</span><span class=lnt id=hl-21-10><a class=lnlinks href=#hl-21-10>10</a>
</span><span class=lnt id=hl-21-11><a class=lnlinks href=#hl-21-11>11</a>
</span><span class=lnt id=hl-21-12><a class=lnlinks href=#hl-21-12>12</a>
</span><span class=lnt id=hl-21-13><a class=lnlinks href=#hl-21-13>13</a>
</span><span class=lnt id=hl-21-14><a class=lnlinks href=#hl-21-14>14</a>
</span><span class=lnt id=hl-21-15><a class=lnlinks href=#hl-21-15>15</a>
</span><span class=lnt id=hl-21-16><a class=lnlinks href=#hl-21-16>16</a>
</span><span class=lnt id=hl-21-17><a class=lnlinks href=#hl-21-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Use to sort in ascending order</span>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>52</span><span class=p>]:</span> <span class=n>indexer</span> <span class=o>=</span> <span class=n>agg_counts</span><span class=o>.</span><span class=n>sum</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span><span class=o>.</span><span class=n>argsort</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>53</span><span class=p>]:</span> <span class=n>indexer</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>53</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>tz</span>
</span></span><span class=line><span class=cl>                                  <span class=mi>24</span>
</span></span><span class=line><span class=cl><span class=n>Africa</span><span class=o>/</span><span class=n>Cairo</span>                      <span class=mi>20</span>
</span></span><span class=line><span class=cl><span class=n>Africa</span><span class=o>/</span><span class=n>Casablanca</span>                 <span class=mi>21</span>
</span></span><span class=line><span class=cl><span class=n>Africa</span><span class=o>/</span><span class=n>Ceuta</span>                      <span class=mi>92</span>
</span></span><span class=line><span class=cl><span class=n>Africa</span><span class=o>/</span><span class=n>Johannesburg</span>               <span class=mi>87</span>
</span></span><span class=line><span class=cl><span class=n>Africa</span><span class=o>/</span><span class=n>Lusaka</span>                     <span class=mi>53</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Anchorage</span>                 <span class=mi>54</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Argentina</span><span class=o>/</span><span class=n>Buenos_Aires</span>    <span class=mi>57</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Argentina</span><span class=o>/</span><span class=n>Cordoba</span>         <span class=mi>26</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Argentina</span><span class=o>/</span><span class=n>Mendoza</span>         <span class=mi>55</span>
</span></span><span class=line><span class=cl><span class=n>dtype</span><span class=p>:</span> <span class=n>int64</span></span></span></code></pre></td></tr></table></div></div><p>ç„¶åæˆ‘é€šè¿‡takeæŒ‰ç…§è¿™ä¸ªé¡ºåºæˆªå–äº†æœ€å10è¡Œæœ€å¤§å€¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1> 1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2> 2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3> 3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4> 4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5> 5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6> 6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7> 7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8> 8</a>
</span><span class=lnt id=hl-22-9><a class=lnlinks href=#hl-22-9> 9</a>
</span><span class=lnt id=hl-22-10><a class=lnlinks href=#hl-22-10>10</a>
</span><span class=lnt id=hl-22-11><a class=lnlinks href=#hl-22-11>11</a>
</span><span class=lnt id=hl-22-12><a class=lnlinks href=#hl-22-12>12</a>
</span><span class=lnt id=hl-22-13><a class=lnlinks href=#hl-22-13>13</a>
</span><span class=lnt id=hl-22-14><a class=lnlinks href=#hl-22-14>14</a>
</span><span class=lnt id=hl-22-15><a class=lnlinks href=#hl-22-15>15</a>
</span><span class=lnt id=hl-22-16><a class=lnlinks href=#hl-22-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>54</span><span class=p>]:</span> <span class=n>count_subset</span> <span class=o>=</span> <span class=n>agg_counts</span><span class=o>.</span><span class=n>take</span><span class=p>(</span><span class=n>indexer</span><span class=p>[</span><span class=o>-</span><span class=mi>10</span><span class=p>:])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>55</span><span class=p>]:</span> <span class=n>count_subset</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>55</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>os</span>                   <span class=n>Not</span> <span class=n>Windows</span>  <span class=n>Windows</span>
</span></span><span class=line><span class=cl><span class=n>tz</span>                                       
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Sao_Paulo</span>           <span class=mf>13.0</span>     <span class=mf>20.0</span>
</span></span><span class=line><span class=cl><span class=n>Europe</span><span class=o>/</span><span class=n>Madrid</span>               <span class=mf>16.0</span>     <span class=mf>19.0</span>
</span></span><span class=line><span class=cl><span class=n>Pacific</span><span class=o>/</span><span class=n>Honolulu</span>             <span class=mf>0.0</span>     <span class=mf>36.0</span>
</span></span><span class=line><span class=cl><span class=n>Asia</span><span class=o>/</span><span class=n>Tokyo</span>                   <span class=mf>2.0</span>     <span class=mf>35.0</span>
</span></span><span class=line><span class=cl><span class=n>Europe</span><span class=o>/</span><span class=n>London</span>               <span class=mf>43.0</span>     <span class=mf>31.0</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Denver</span>             <span class=mf>132.0</span>     <span class=mf>59.0</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Los_Angeles</span>        <span class=mf>130.0</span>    <span class=mf>252.0</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Chicago</span>            <span class=mf>115.0</span>    <span class=mf>285.0</span>
</span></span><span class=line><span class=cl>                           <span class=mf>245.0</span>    <span class=mf>276.0</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>New_York</span>           <span class=mf>339.0</span>    <span class=mf>912.0</span></span></span></code></pre></td></tr></table></div></div><p>pandasæœ‰ä¸€ä¸ªç®€ä¾¿æ–¹æ³•nlargestï¼Œå¯ä»¥åšåŒæ ·çš„å·¥ä½œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1> 1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2> 2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3> 3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4> 4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5> 5</a>
</span><span class=lnt id=hl-23-6><a class=lnlinks href=#hl-23-6> 6</a>
</span><span class=lnt id=hl-23-7><a class=lnlinks href=#hl-23-7> 7</a>
</span><span class=lnt id=hl-23-8><a class=lnlinks href=#hl-23-8> 8</a>
</span><span class=lnt id=hl-23-9><a class=lnlinks href=#hl-23-9> 9</a>
</span><span class=lnt id=hl-23-10><a class=lnlinks href=#hl-23-10>10</a>
</span><span class=lnt id=hl-23-11><a class=lnlinks href=#hl-23-11>11</a>
</span><span class=lnt id=hl-23-12><a class=lnlinks href=#hl-23-12>12</a>
</span><span class=lnt id=hl-23-13><a class=lnlinks href=#hl-23-13>13</a>
</span><span class=lnt id=hl-23-14><a class=lnlinks href=#hl-23-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>56</span><span class=p>]:</span> <span class=n>agg_counts</span><span class=o>.</span><span class=n>sum</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span><span class=o>.</span><span class=n>nlargest</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>56</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>tz</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>New_York</span>       <span class=mf>1251.0</span>
</span></span><span class=line><span class=cl>                        <span class=mf>521.0</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Chicago</span>         <span class=mf>400.0</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Los_Angeles</span>     <span class=mf>382.0</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Denver</span>          <span class=mf>191.0</span>
</span></span><span class=line><span class=cl><span class=n>Europe</span><span class=o>/</span><span class=n>London</span>            <span class=mf>74.0</span>
</span></span><span class=line><span class=cl><span class=n>Asia</span><span class=o>/</span><span class=n>Tokyo</span>               <span class=mf>37.0</span>
</span></span><span class=line><span class=cl><span class=n>Pacific</span><span class=o>/</span><span class=n>Honolulu</span>         <span class=mf>36.0</span>
</span></span><span class=line><span class=cl><span class=n>Europe</span><span class=o>/</span><span class=n>Madrid</span>            <span class=mf>35.0</span>
</span></span><span class=line><span class=cl><span class=n>America</span><span class=o>/</span><span class=n>Sao_Paulo</span>        <span class=mf>33.0</span>
</span></span><span class=line><span class=cl><span class=n>dtype</span><span class=p>:</span> <span class=n>float64</span></span></span></code></pre></td></tr></table></div></div><p>ç„¶åï¼Œå¦‚è¿™æ®µä»£ç æ‰€ç¤ºï¼Œå¯ä»¥ç”¨æŸ±çŠ¶å›¾è¡¨ç¤ºã€‚æˆ‘ä¼ é€’ä¸€ä¸ªé¢å¤–å‚æ•°åˆ°seabornçš„barpoltå‡½æ•°ï¼Œæ¥ç”»ä¸€ä¸ªå †ç§¯æ¡å½¢å›¾ï¼ˆè§å›¾14-2ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1> 1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2> 2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3> 3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4> 4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5> 5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6> 6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7> 7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8> 8</a>
</span><span class=lnt id=hl-24-9><a class=lnlinks href=#hl-24-9> 9</a>
</span><span class=lnt id=hl-24-10><a class=lnlinks href=#hl-24-10>10</a>
</span><span class=lnt id=hl-24-11><a class=lnlinks href=#hl-24-11>11</a>
</span><span class=lnt id=hl-24-12><a class=lnlinks href=#hl-24-12>12</a>
</span><span class=lnt id=hl-24-13><a class=lnlinks href=#hl-24-13>13</a>
</span><span class=lnt id=hl-24-14><a class=lnlinks href=#hl-24-14>14</a>
</span><span class=lnt id=hl-24-15><a class=lnlinks href=#hl-24-15>15</a>
</span><span class=lnt id=hl-24-16><a class=lnlinks href=#hl-24-16>16</a>
</span><span class=lnt id=hl-24-17><a class=lnlinks href=#hl-24-17>17</a>
</span><span class=lnt id=hl-24-18><a class=lnlinks href=#hl-24-18>18</a>
</span><span class=lnt id=hl-24-19><a class=lnlinks href=#hl-24-19>19</a>
</span><span class=lnt id=hl-24-20><a class=lnlinks href=#hl-24-20>20</a>
</span><span class=lnt id=hl-24-21><a class=lnlinks href=#hl-24-21>21</a>
</span><span class=lnt id=hl-24-22><a class=lnlinks href=#hl-24-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Rearrange the data for plotting</span>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>58</span><span class=p>]:</span> <span class=n>count_subset</span> <span class=o>=</span> <span class=n>count_subset</span><span class=o>.</span><span class=n>stack</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>59</span><span class=p>]:</span> <span class=n>count_subset</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;total&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>60</span><span class=p>]:</span> <span class=n>count_subset</span> <span class=o>=</span> <span class=n>count_subset</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>61</span><span class=p>]:</span> <span class=n>count_subset</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>61</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>                  <span class=n>tz</span>           <span class=n>os</span>  <span class=n>total</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>  <span class=n>America</span><span class=o>/</span><span class=n>Sao_Paulo</span>  <span class=n>Not</span> <span class=n>Windows</span>   <span class=mf>13.0</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>  <span class=n>America</span><span class=o>/</span><span class=n>Sao_Paulo</span>      <span class=n>Windows</span>   <span class=mf>20.0</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>      <span class=n>Europe</span><span class=o>/</span><span class=n>Madrid</span>  <span class=n>Not</span> <span class=n>Windows</span>   <span class=mf>16.0</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>      <span class=n>Europe</span><span class=o>/</span><span class=n>Madrid</span>      <span class=n>Windows</span>   <span class=mf>19.0</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>   <span class=n>Pacific</span><span class=o>/</span><span class=n>Honolulu</span>  <span class=n>Not</span> <span class=n>Windows</span>    <span class=mf>0.0</span>
</span></span><span class=line><span class=cl><span class=mi>5</span>   <span class=n>Pacific</span><span class=o>/</span><span class=n>Honolulu</span>      <span class=n>Windows</span>   <span class=mf>36.0</span>
</span></span><span class=line><span class=cl><span class=mi>6</span>         <span class=n>Asia</span><span class=o>/</span><span class=n>Tokyo</span>  <span class=n>Not</span> <span class=n>Windows</span>    <span class=mf>2.0</span>
</span></span><span class=line><span class=cl><span class=mi>7</span>         <span class=n>Asia</span><span class=o>/</span><span class=n>Tokyo</span>      <span class=n>Windows</span>   <span class=mf>35.0</span>
</span></span><span class=line><span class=cl><span class=mi>8</span>      <span class=n>Europe</span><span class=o>/</span><span class=n>London</span>  <span class=n>Not</span> <span class=n>Windows</span>   <span class=mf>43.0</span>
</span></span><span class=line><span class=cl><span class=mi>9</span>      <span class=n>Europe</span><span class=o>/</span><span class=n>London</span>      <span class=n>Windows</span>   <span class=mf>31.0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>62</span><span class=p>]:</span> <span class=n>sns</span><span class=o>.</span><span class=n>barplot</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s1>&#39;total&#39;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s1>&#39;tz&#39;</span><span class=p>,</span> <span class=n>hue</span><span class=o>=</span><span class=s1>&#39;os&#39;</span><span class=p>,</span>  <span class=n>data</span><span class=o>=</span><span class=n>count_subset</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://gitee.com/wugenqiang/images/raw/master/02/1240-20201031180143099.png alt="å›¾14-2 æœ€å¸¸å‡ºç°æ—¶åŒºçš„Windowså’ŒéWindowsç”¨æˆ·"></p><p>è¿™å¼ å›¾ä¸å®¹æ˜“çœ‹å‡ºWindowsç”¨æˆ·åœ¨å°åˆ†ç»„ä¸­çš„ç›¸å¯¹æ¯”ä¾‹ï¼Œå› æ­¤æ ‡å‡†åŒ–åˆ†ç»„ç™¾åˆ†æ¯”ä¹‹å’Œä¸º1ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1>1</a>
</span><span class=lnt id=hl-25-2><a class=lnlinks href=#hl-25-2>2</a>
</span><span class=lnt id=hl-25-3><a class=lnlinks href=#hl-25-3>3</a>
</span><span class=lnt id=hl-25-4><a class=lnlinks href=#hl-25-4>4</a>
</span><span class=lnt id=hl-25-5><a class=lnlinks href=#hl-25-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>norm_total</span><span class=p>(</span><span class=n>group</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>group</span><span class=p>[</span><span class=s1>&#39;normed_total&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>group</span><span class=o>.</span><span class=n>total</span> <span class=o>/</span> <span class=n>group</span><span class=o>.</span><span class=n>total</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>group</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>results</span> <span class=o>=</span> <span class=n>count_subset</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;tz&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>norm_total</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>å†æ¬¡ç”»å›¾ï¼Œè§å›¾14-3ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>65</span><span class=p>]:</span> <span class=n>sns</span><span class=o>.</span><span class=n>barplot</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s1>&#39;normed_total&#39;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s1>&#39;tz&#39;</span><span class=p>,</span> <span class=n>hue</span><span class=o>=</span><span class=s1>&#39;os&#39;</span><span class=p>,</span>  <span class=n>data</span><span class=o>=</span><span class=n>results</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://gitee.com/wugenqiang/images/raw/master/02/1240-20201031180149689.png alt="å›¾14-3 æœ€å¸¸å‡ºç°æ—¶åŒºçš„Windowså’ŒéWindowsç”¨æˆ·çš„ç™¾åˆ†æ¯”"></p><p>æˆ‘ä»¬è¿˜å¯ä»¥ç”¨groupbyçš„transformæ–¹æ³•ï¼Œæ›´é«˜æ•ˆçš„è®¡ç®—æ ‡å‡†åŒ–çš„å’Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1>1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2>2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>66</span><span class=p>]:</span> <span class=n>g</span> <span class=o>=</span> <span class=n>count_subset</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;tz&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>67</span><span class=p>]:</span> <span class=n>results2</span> <span class=o>=</span> <span class=n>count_subset</span><span class=o>.</span><span class=n>total</span> <span class=o>/</span> <span class=n>g</span><span class=o>.</span><span class=n>total</span><span class=o>.</span><span class=n>transform</span><span class=p>(</span><span class=s1>&#39;sum&#39;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><h2 id=142-movielens-1mæ•°æ®é›†>14.2 MovieLens 1Mæ•°æ®é›†
<a class=header-anchor href=#142-movielens-1m%e6%95%b0%e6%8d%ae%e9%9b%86></a></h2><p>GroupLens Researchï¼ˆhttp://www.grouplens.org/node/73ï¼‰é‡‡é›†äº†ä¸€ç»„ä»20ä¸–çºª90å¹´æœ«åˆ°21ä¸–çºªåˆç”±MovieLensç”¨æˆ·æä¾›çš„ç”µå½±è¯„åˆ†æ•°æ®ã€‚è¿™äº›æ•°æ®ä¸­åŒ…æ‹¬ç”µå½±è¯„åˆ†ã€ç”µå½±å…ƒæ•°æ®ï¼ˆé£æ ¼ç±»å‹å’Œå¹´ä»£ï¼‰ä»¥åŠå…³äºç”¨æˆ·çš„äººå£ç»Ÿè®¡å­¦æ•°æ®ï¼ˆå¹´é¾„ã€é‚®ç¼–ã€æ€§åˆ«å’ŒèŒä¸šç­‰ï¼‰ã€‚åŸºäºæœºå™¨å­¦ä¹ ç®—æ³•çš„æ¨èç³»ç»Ÿä¸€èˆ¬éƒ½ä¼šå¯¹æ­¤ç±»æ•°æ®æ„Ÿå…´è¶£ã€‚è™½ç„¶æˆ‘ä¸ä¼šåœ¨æœ¬ä¹¦ä¸­è¯¦ç»†ä»‹ç»æœºå™¨å­¦ä¹ æŠ€æœ¯ï¼Œä½†æˆ‘ä¼šå‘Šè¯‰ä½ å¦‚ä½•å¯¹è¿™ç§æ•°æ®è¿›è¡Œåˆ‡ç‰‡åˆ‡å—ä»¥æ»¡è¶³å®é™…éœ€æ±‚ã€‚</p><p>MovieLens 1Mæ•°æ®é›†å«æœ‰æ¥è‡ª6000åç”¨æˆ·å¯¹4000éƒ¨ç”µå½±çš„100ä¸‡æ¡è¯„åˆ†æ•°æ®ã€‚å®ƒåˆ†ä¸ºä¸‰ä¸ªè¡¨ï¼šè¯„åˆ†ã€ç”¨æˆ·ä¿¡æ¯å’Œç”µå½±ä¿¡æ¯ã€‚å°†è¯¥æ•°æ®ä»zipæ–‡ä»¶ä¸­è§£å‹å‡ºæ¥ä¹‹åï¼Œå¯ä»¥é€šè¿‡pandas.read_tableå°†å„ä¸ªè¡¨åˆ†åˆ«è¯»åˆ°ä¸€ä¸ªpandas DataFrameå¯¹è±¡ä¸­ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-28-1><a class=lnlinks href=#hl-28-1> 1</a>
</span><span class=lnt id=hl-28-2><a class=lnlinks href=#hl-28-2> 2</a>
</span><span class=lnt id=hl-28-3><a class=lnlinks href=#hl-28-3> 3</a>
</span><span class=lnt id=hl-28-4><a class=lnlinks href=#hl-28-4> 4</a>
</span><span class=lnt id=hl-28-5><a class=lnlinks href=#hl-28-5> 5</a>
</span><span class=lnt id=hl-28-6><a class=lnlinks href=#hl-28-6> 6</a>
</span><span class=lnt id=hl-28-7><a class=lnlinks href=#hl-28-7> 7</a>
</span><span class=lnt id=hl-28-8><a class=lnlinks href=#hl-28-8> 8</a>
</span><span class=lnt id=hl-28-9><a class=lnlinks href=#hl-28-9> 9</a>
</span><span class=lnt id=hl-28-10><a class=lnlinks href=#hl-28-10>10</a>
</span><span class=lnt id=hl-28-11><a class=lnlinks href=#hl-28-11>11</a>
</span><span class=lnt id=hl-28-12><a class=lnlinks href=#hl-28-12>12</a>
</span><span class=lnt id=hl-28-13><a class=lnlinks href=#hl-28-13>13</a>
</span><span class=lnt id=hl-28-14><a class=lnlinks href=#hl-28-14>14</a>
</span><span class=lnt id=hl-28-15><a class=lnlinks href=#hl-28-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Make display smaller</span>
</span></span><span class=line><span class=cl><span class=n>pd</span><span class=o>.</span><span class=n>options</span><span class=o>.</span><span class=n>display</span><span class=o>.</span><span class=n>max_rows</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>unames</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;user_id&#39;</span><span class=p>,</span> <span class=s1>&#39;gender&#39;</span><span class=p>,</span> <span class=s1>&#39;age&#39;</span><span class=p>,</span> <span class=s1>&#39;occupation&#39;</span><span class=p>,</span> <span class=s1>&#39;zip&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>users</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_table</span><span class=p>(</span><span class=s1>&#39;datasets/movielens/users.dat&#39;</span><span class=p>,</span> <span class=n>sep</span><span class=o>=</span><span class=s1>&#39;::&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                      <span class=n>header</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>names</span><span class=o>=</span><span class=n>unames</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>rnames</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;user_id&#39;</span><span class=p>,</span> <span class=s1>&#39;movie_id&#39;</span><span class=p>,</span> <span class=s1>&#39;rating&#39;</span><span class=p>,</span> <span class=s1>&#39;timestamp&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>ratings</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_table</span><span class=p>(</span><span class=s1>&#39;datasets/movielens/ratings.dat&#39;</span><span class=p>,</span> <span class=n>sep</span><span class=o>=</span><span class=s1>&#39;::&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>header</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>names</span><span class=o>=</span><span class=n>rnames</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>mnames</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;movie_id&#39;</span><span class=p>,</span> <span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=s1>&#39;genres&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>movies</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_table</span><span class=p>(</span><span class=s1>&#39;datasets/movielens/movies.dat&#39;</span><span class=p>,</span> <span class=n>sep</span><span class=o>=</span><span class=s1>&#39;::&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                       <span class=n>header</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>names</span><span class=o>=</span><span class=n>mnames</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>åˆ©ç”¨Pythonçš„åˆ‡ç‰‡è¯­æ³•ï¼Œé€šè¿‡æŸ¥çœ‹æ¯ä¸ªDataFrameçš„å‰å‡ è¡Œå³å¯éªŒè¯æ•°æ®åŠ è½½å·¥ä½œæ˜¯å¦ä¸€åˆ‡é¡ºåˆ©ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-29-1><a class=lnlinks href=#hl-29-1> 1</a>
</span><span class=lnt id=hl-29-2><a class=lnlinks href=#hl-29-2> 2</a>
</span><span class=lnt id=hl-29-3><a class=lnlinks href=#hl-29-3> 3</a>
</span><span class=lnt id=hl-29-4><a class=lnlinks href=#hl-29-4> 4</a>
</span><span class=lnt id=hl-29-5><a class=lnlinks href=#hl-29-5> 5</a>
</span><span class=lnt id=hl-29-6><a class=lnlinks href=#hl-29-6> 6</a>
</span><span class=lnt id=hl-29-7><a class=lnlinks href=#hl-29-7> 7</a>
</span><span class=lnt id=hl-29-8><a class=lnlinks href=#hl-29-8> 8</a>
</span><span class=lnt id=hl-29-9><a class=lnlinks href=#hl-29-9> 9</a>
</span><span class=lnt id=hl-29-10><a class=lnlinks href=#hl-29-10>10</a>
</span><span class=lnt id=hl-29-11><a class=lnlinks href=#hl-29-11>11</a>
</span><span class=lnt id=hl-29-12><a class=lnlinks href=#hl-29-12>12</a>
</span><span class=lnt id=hl-29-13><a class=lnlinks href=#hl-29-13>13</a>
</span><span class=lnt id=hl-29-14><a class=lnlinks href=#hl-29-14>14</a>
</span><span class=lnt id=hl-29-15><a class=lnlinks href=#hl-29-15>15</a>
</span><span class=lnt id=hl-29-16><a class=lnlinks href=#hl-29-16>16</a>
</span><span class=lnt id=hl-29-17><a class=lnlinks href=#hl-29-17>17</a>
</span><span class=lnt id=hl-29-18><a class=lnlinks href=#hl-29-18>18</a>
</span><span class=lnt id=hl-29-19><a class=lnlinks href=#hl-29-19>19</a>
</span><span class=lnt id=hl-29-20><a class=lnlinks href=#hl-29-20>20</a>
</span><span class=lnt id=hl-29-21><a class=lnlinks href=#hl-29-21>21</a>
</span><span class=lnt id=hl-29-22><a class=lnlinks href=#hl-29-22>22</a>
</span><span class=lnt id=hl-29-23><a class=lnlinks href=#hl-29-23>23</a>
</span><span class=lnt id=hl-29-24><a class=lnlinks href=#hl-29-24>24</a>
</span><span class=lnt id=hl-29-25><a class=lnlinks href=#hl-29-25>25</a>
</span><span class=lnt id=hl-29-26><a class=lnlinks href=#hl-29-26>26</a>
</span><span class=lnt id=hl-29-27><a class=lnlinks href=#hl-29-27>27</a>
</span><span class=lnt id=hl-29-28><a class=lnlinks href=#hl-29-28>28</a>
</span><span class=lnt id=hl-29-29><a class=lnlinks href=#hl-29-29>29</a>
</span><span class=lnt id=hl-29-30><a class=lnlinks href=#hl-29-30>30</a>
</span><span class=lnt id=hl-29-31><a class=lnlinks href=#hl-29-31>31</a>
</span><span class=lnt id=hl-29-32><a class=lnlinks href=#hl-29-32>32</a>
</span><span class=lnt id=hl-29-33><a class=lnlinks href=#hl-29-33>33</a>
</span><span class=lnt id=hl-29-34><a class=lnlinks href=#hl-29-34>34</a>
</span><span class=lnt id=hl-29-35><a class=lnlinks href=#hl-29-35>35</a>
</span><span class=lnt id=hl-29-36><a class=lnlinks href=#hl-29-36>36</a>
</span><span class=lnt id=hl-29-37><a class=lnlinks href=#hl-29-37>37</a>
</span><span class=lnt id=hl-29-38><a class=lnlinks href=#hl-29-38>38</a>
</span><span class=lnt id=hl-29-39><a class=lnlinks href=#hl-29-39>39</a>
</span><span class=lnt id=hl-29-40><a class=lnlinks href=#hl-29-40>40</a>
</span><span class=lnt id=hl-29-41><a class=lnlinks href=#hl-29-41>41</a>
</span><span class=lnt id=hl-29-42><a class=lnlinks href=#hl-29-42>42</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>69</span><span class=p>]:</span> <span class=n>users</span><span class=p>[:</span><span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>69</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>   <span class=n>user_id</span> <span class=n>gender</span>  <span class=n>age</span>  <span class=n>occupation</span>    <span class=nb>zip</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>        <span class=mi>1</span>      <span class=n>F</span>    <span class=mi>1</span>          <span class=mi>10</span>  <span class=mi>48067</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>        <span class=mi>2</span>      <span class=n>M</span>   <span class=mi>56</span>          <span class=mi>16</span>  <span class=mi>70072</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>        <span class=mi>3</span>      <span class=n>M</span>   <span class=mi>25</span>          <span class=mi>15</span>  <span class=mi>55117</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>        <span class=mi>4</span>      <span class=n>M</span>   <span class=mi>45</span>           <span class=mi>7</span>  <span class=mi>02460</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>        <span class=mi>5</span>      <span class=n>M</span>   <span class=mi>25</span>          <span class=mi>20</span>  <span class=mi>55455</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>70</span><span class=p>]:</span> <span class=n>ratings</span><span class=p>[:</span><span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>70</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>   <span class=n>user_id</span>  <span class=n>movie_id</span>  <span class=n>rating</span>  <span class=n>timestamp</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>        <span class=mi>1</span>      <span class=mi>1193</span>       <span class=mi>5</span>  <span class=mi>978300760</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>        <span class=mi>1</span>       <span class=mi>661</span>       <span class=mi>3</span>  <span class=mi>978302109</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>        <span class=mi>1</span>       <span class=mi>914</span>       <span class=mi>3</span>  <span class=mi>978301968</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>        <span class=mi>1</span>      <span class=mi>3408</span>       <span class=mi>4</span>  <span class=mi>978300275</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>        <span class=mi>1</span>      <span class=mi>2355</span>       <span class=mi>5</span>  <span class=mi>978824291</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>71</span><span class=p>]:</span> <span class=n>movies</span><span class=p>[:</span><span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>71</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>   <span class=n>movie_id</span>                               <span class=n>title</span>                        <span class=n>genres</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>         <span class=mi>1</span>                    <span class=n>Toy</span> <span class=n>Story</span> <span class=p>(</span><span class=mi>1995</span><span class=p>)</span>   <span class=n>Animation</span><span class=o>|</span><span class=n>Children</span><span class=s1>&#39;s|Comedy</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>         <span class=mi>2</span>                      <span class=n>Jumanji</span> <span class=p>(</span><span class=mi>1995</span><span class=p>)</span>  <span class=n>Adventure</span><span class=o>|</span><span class=n>Children</span><span class=s1>&#39;s|Fantasy</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>         <span class=mi>3</span>             <span class=n>Grumpier</span> <span class=n>Old</span> <span class=n>Men</span> <span class=p>(</span><span class=mi>1995</span><span class=p>)</span>                <span class=n>Comedy</span><span class=o>|</span><span class=n>Romance</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>         <span class=mi>4</span>            <span class=n>Waiting</span> <span class=n>to</span> <span class=n>Exhale</span> <span class=p>(</span><span class=mi>1995</span><span class=p>)</span>                  <span class=n>Comedy</span><span class=o>|</span><span class=n>Drama</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>         <span class=mi>5</span>  <span class=n>Father</span> <span class=n>of</span> <span class=n>the</span> <span class=n>Bride</span> <span class=n>Part</span> <span class=n>II</span> <span class=p>(</span><span class=mi>1995</span><span class=p>)</span>                        <span class=n>Comedy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>72</span><span class=p>]:</span> <span class=n>ratings</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>72</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>         <span class=n>user_id</span>  <span class=n>movie_id</span>  <span class=n>rating</span>  <span class=n>timestamp</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>              <span class=mi>1</span>      <span class=mi>1193</span>       <span class=mi>5</span>  <span class=mi>978300760</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>              <span class=mi>1</span>       <span class=mi>661</span>       <span class=mi>3</span>  <span class=mi>978302109</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>              <span class=mi>1</span>       <span class=mi>914</span>       <span class=mi>3</span>  <span class=mi>978301968</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>              <span class=mi>1</span>      <span class=mi>3408</span>       <span class=mi>4</span>  <span class=mi>978300275</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>              <span class=mi>1</span>      <span class=mi>2355</span>       <span class=mi>5</span>  <span class=mi>978824291</span>
</span></span><span class=line><span class=cl><span class=o>...</span>          <span class=o>...</span>       <span class=o>...</span>     <span class=o>...</span>        <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=mi>1000204</span>     <span class=mi>6040</span>      <span class=mi>1091</span>       <span class=mi>1</span>  <span class=mi>956716541</span>
</span></span><span class=line><span class=cl><span class=mi>1000205</span>     <span class=mi>6040</span>      <span class=mi>1094</span>       <span class=mi>5</span>  <span class=mi>956704887</span>
</span></span><span class=line><span class=cl><span class=mi>1000206</span>     <span class=mi>6040</span>       <span class=mi>562</span>       <span class=mi>5</span>  <span class=mi>956704746</span>
</span></span><span class=line><span class=cl><span class=mi>1000207</span>     <span class=mi>6040</span>      <span class=mi>1096</span>       <span class=mi>4</span>  <span class=mi>956715648</span>
</span></span><span class=line><span class=cl><span class=mi>1000208</span>     <span class=mi>6040</span>      <span class=mi>1097</span>       <span class=mi>4</span>  <span class=mi>956715569</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>1000209</span> <span class=n>rows</span> <span class=n>x</span> <span class=mi>4</span> <span class=n>columns</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>æ³¨æ„ï¼Œå…¶ä¸­çš„å¹´é¾„å’ŒèŒä¸šæ˜¯ä»¥ç¼–ç å½¢å¼ç»™å‡ºçš„ï¼Œå®ƒä»¬çš„å…·ä½“å«ä¹‰è¯·å‚è€ƒè¯¥æ•°æ®é›†çš„READMEæ–‡ä»¶ã€‚åˆ†ææ•£å¸ƒåœ¨ä¸‰ä¸ªè¡¨ä¸­çš„æ•°æ®å¯ä¸æ˜¯ä¸€ä»¶è½»æ¾çš„äº‹æƒ…ã€‚å‡è®¾æˆ‘ä»¬æƒ³è¦æ ¹æ®æ€§åˆ«å’Œå¹´é¾„è®¡ç®—æŸéƒ¨ç”µå½±çš„å¹³å‡å¾—åˆ†ï¼Œå¦‚æœå°†æ‰€æœ‰æ•°æ®éƒ½åˆå¹¶åˆ°ä¸€ä¸ªè¡¨ä¸­çš„è¯é—®é¢˜å°±ç®€å•å¤šäº†ã€‚æˆ‘ä»¬å…ˆç”¨pandasçš„mergeå‡½æ•°å°†ratingsè·Ÿusersåˆå¹¶åˆ°ä¸€èµ·ï¼Œç„¶åå†å°†moviesä¹Ÿåˆå¹¶è¿›å»ã€‚pandasä¼šæ ¹æ®åˆ—åçš„é‡å æƒ…å†µæ¨æ–­å‡ºå“ªäº›åˆ—æ˜¯åˆå¹¶ï¼ˆæˆ–è¿æ¥ï¼‰é”®ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-30-1><a class=lnlinks href=#hl-30-1> 1</a>
</span><span class=lnt id=hl-30-2><a class=lnlinks href=#hl-30-2> 2</a>
</span><span class=lnt id=hl-30-3><a class=lnlinks href=#hl-30-3> 3</a>
</span><span class=lnt id=hl-30-4><a class=lnlinks href=#hl-30-4> 4</a>
</span><span class=lnt id=hl-30-5><a class=lnlinks href=#hl-30-5> 5</a>
</span><span class=lnt id=hl-30-6><a class=lnlinks href=#hl-30-6> 6</a>
</span><span class=lnt id=hl-30-7><a class=lnlinks href=#hl-30-7> 7</a>
</span><span class=lnt id=hl-30-8><a class=lnlinks href=#hl-30-8> 8</a>
</span><span class=lnt id=hl-30-9><a class=lnlinks href=#hl-30-9> 9</a>
</span><span class=lnt id=hl-30-10><a class=lnlinks href=#hl-30-10>10</a>
</span><span class=lnt id=hl-30-11><a class=lnlinks href=#hl-30-11>11</a>
</span><span class=lnt id=hl-30-12><a class=lnlinks href=#hl-30-12>12</a>
</span><span class=lnt id=hl-30-13><a class=lnlinks href=#hl-30-13>13</a>
</span><span class=lnt id=hl-30-14><a class=lnlinks href=#hl-30-14>14</a>
</span><span class=lnt id=hl-30-15><a class=lnlinks href=#hl-30-15>15</a>
</span><span class=lnt id=hl-30-16><a class=lnlinks href=#hl-30-16>16</a>
</span><span class=lnt id=hl-30-17><a class=lnlinks href=#hl-30-17>17</a>
</span><span class=lnt id=hl-30-18><a class=lnlinks href=#hl-30-18>18</a>
</span><span class=lnt id=hl-30-19><a class=lnlinks href=#hl-30-19>19</a>
</span><span class=lnt id=hl-30-20><a class=lnlinks href=#hl-30-20>20</a>
</span><span class=lnt id=hl-30-21><a class=lnlinks href=#hl-30-21>21</a>
</span><span class=lnt id=hl-30-22><a class=lnlinks href=#hl-30-22>22</a>
</span><span class=lnt id=hl-30-23><a class=lnlinks href=#hl-30-23>23</a>
</span><span class=lnt id=hl-30-24><a class=lnlinks href=#hl-30-24>24</a>
</span><span class=lnt id=hl-30-25><a class=lnlinks href=#hl-30-25>25</a>
</span><span class=lnt id=hl-30-26><a class=lnlinks href=#hl-30-26>26</a>
</span><span class=lnt id=hl-30-27><a class=lnlinks href=#hl-30-27>27</a>
</span><span class=lnt id=hl-30-28><a class=lnlinks href=#hl-30-28>28</a>
</span><span class=lnt id=hl-30-29><a class=lnlinks href=#hl-30-29>29</a>
</span><span class=lnt id=hl-30-30><a class=lnlinks href=#hl-30-30>30</a>
</span><span class=lnt id=hl-30-31><a class=lnlinks href=#hl-30-31>31</a>
</span><span class=lnt id=hl-30-32><a class=lnlinks href=#hl-30-32>32</a>
</span><span class=lnt id=hl-30-33><a class=lnlinks href=#hl-30-33>33</a>
</span><span class=lnt id=hl-30-34><a class=lnlinks href=#hl-30-34>34</a>
</span><span class=lnt id=hl-30-35><a class=lnlinks href=#hl-30-35>35</a>
</span><span class=lnt id=hl-30-36><a class=lnlinks href=#hl-30-36>36</a>
</span><span class=lnt id=hl-30-37><a class=lnlinks href=#hl-30-37>37</a>
</span><span class=lnt id=hl-30-38><a class=lnlinks href=#hl-30-38>38</a>
</span><span class=lnt id=hl-30-39><a class=lnlinks href=#hl-30-39>39</a>
</span><span class=lnt id=hl-30-40><a class=lnlinks href=#hl-30-40>40</a>
</span><span class=lnt id=hl-30-41><a class=lnlinks href=#hl-30-41>41</a>
</span><span class=lnt id=hl-30-42><a class=lnlinks href=#hl-30-42>42</a>
</span><span class=lnt id=hl-30-43><a class=lnlinks href=#hl-30-43>43</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>73</span><span class=p>]:</span> <span class=n>data</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>ratings</span><span class=p>,</span> <span class=n>users</span><span class=p>),</span> <span class=n>movies</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>74</span><span class=p>]:</span> <span class=n>data</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>74</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>         <span class=n>user_id</span>  <span class=n>movie_id</span>  <span class=n>rating</span>  <span class=n>timestamp</span> <span class=n>gender</span>  <span class=n>age</span>  <span class=n>occupation</span>    <span class=nb>zip</span>  \
</span></span><span class=line><span class=cl><span class=mi>0</span>              <span class=mi>1</span>      <span class=mi>1193</span>       <span class=mi>5</span>  <span class=mi>978300760</span>      <span class=n>F</span>    <span class=mi>1</span>          <span class=mi>10</span>  <span class=mi>48067</span>   
</span></span><span class=line><span class=cl><span class=mi>1</span>              <span class=mi>2</span>      <span class=mi>1193</span>       <span class=mi>5</span>  <span class=mi>978298413</span>      <span class=n>M</span>   <span class=mi>56</span>          <span class=mi>16</span>  <span class=mi>70072</span>   
</span></span><span class=line><span class=cl><span class=mi>2</span>             <span class=mi>12</span>      <span class=mi>1193</span>       <span class=mi>4</span>  <span class=mi>978220179</span>      <span class=n>M</span>   <span class=mi>25</span>          <span class=mi>12</span>  <span class=mi>32793</span>   
</span></span><span class=line><span class=cl><span class=mi>3</span>             <span class=mi>15</span>      <span class=mi>1193</span>       <span class=mi>4</span>  <span class=mi>978199279</span>      <span class=n>M</span>   <span class=mi>25</span>           <span class=mi>7</span>  <span class=mi>22903</span>   
</span></span><span class=line><span class=cl><span class=mi>4</span>             <span class=mi>17</span>      <span class=mi>1193</span>       <span class=mi>5</span>  <span class=mi>978158471</span>      <span class=n>M</span>   <span class=mi>50</span>           <span class=mi>1</span>  <span class=mi>95350</span>   
</span></span><span class=line><span class=cl><span class=o>...</span>          <span class=o>...</span>       <span class=o>...</span>     <span class=o>...</span>        <span class=o>...</span>    <span class=o>...</span>  <span class=o>...</span>         <span class=o>...</span>    <span class=o>...</span>   
</span></span><span class=line><span class=cl><span class=mi>1000204</span>     <span class=mi>5949</span>      <span class=mi>2198</span>       <span class=mi>5</span>  <span class=mi>958846401</span>      <span class=n>M</span>   <span class=mi>18</span>          <span class=mi>17</span>  <span class=mi>47901</span>
</span></span><span class=line><span class=cl><span class=mi>1000205</span>     <span class=mi>5675</span>      <span class=mi>2703</span>       <span class=mi>3</span>  <span class=mi>976029116</span>      <span class=n>M</span>   <span class=mi>35</span>          <span class=mi>14</span>  <span class=mi>30030</span>   
</span></span><span class=line><span class=cl><span class=mi>1000206</span>     <span class=mi>5780</span>      <span class=mi>2845</span>       <span class=mi>1</span>  <span class=mi>958153068</span>      <span class=n>M</span>   <span class=mi>18</span>          <span class=mi>17</span>  <span class=mi>92886</span>   
</span></span><span class=line><span class=cl><span class=mi>1000207</span>     <span class=mi>5851</span>      <span class=mi>3607</span>       <span class=mi>5</span>  <span class=mi>957756608</span>      <span class=n>F</span>   <span class=mi>18</span>          <span class=mi>20</span>  <span class=mi>55410</span>   
</span></span><span class=line><span class=cl><span class=mi>1000208</span>     <span class=mi>5938</span>      <span class=mi>2909</span>       <span class=mi>4</span>  <span class=mi>957273353</span>      <span class=n>M</span>   <span class=mi>25</span>           <span class=mi>1</span>  <span class=mi>35401</span>   
</span></span><span class=line><span class=cl>                                               <span class=n>title</span>                <span class=n>genres</span>  
</span></span><span class=line><span class=cl><span class=mi>0</span>             <span class=n>One</span> <span class=n>Flew</span> <span class=n>Over</span> <span class=n>the</span> <span class=n>Cuckoo</span><span class=s1>&#39;s Nest (1975)                 Drama  </span>
</span></span><span class=line><span class=cl><span class=mi>1</span>             <span class=n>One</span> <span class=n>Flew</span> <span class=n>Over</span> <span class=n>the</span> <span class=n>Cuckoo</span><span class=s1>&#39;s Nest (1975)                 Drama  </span>
</span></span><span class=line><span class=cl><span class=mi>2</span>             <span class=n>One</span> <span class=n>Flew</span> <span class=n>Over</span> <span class=n>the</span> <span class=n>Cuckoo</span><span class=s1>&#39;s Nest (1975)                 Drama  </span>
</span></span><span class=line><span class=cl><span class=mi>3</span>             <span class=n>One</span> <span class=n>Flew</span> <span class=n>Over</span> <span class=n>the</span> <span class=n>Cuckoo</span><span class=s1>&#39;s Nest (1975)                 Drama  </span>
</span></span><span class=line><span class=cl><span class=mi>4</span>             <span class=n>One</span> <span class=n>Flew</span> <span class=n>Over</span> <span class=n>the</span> <span class=n>Cuckoo</span><span class=s1>&#39;s Nest (1975)                 Drama  </span>
</span></span><span class=line><span class=cl><span class=o>...</span>                                              <span class=o>...</span>                   <span class=o>...</span>  
</span></span><span class=line><span class=cl><span class=mi>1000204</span>                           <span class=n>Modulations</span> <span class=p>(</span><span class=mi>1998</span><span class=p>)</span>           <span class=n>Documentary</span>  
</span></span><span class=line><span class=cl><span class=mi>1000205</span>                        <span class=n>Broken</span> <span class=n>Vessels</span> <span class=p>(</span><span class=mi>1998</span><span class=p>)</span>                 <span class=n>Drama</span>  
</span></span><span class=line><span class=cl><span class=mi>1000206</span>                            <span class=n>White</span> <span class=n>Boys</span> <span class=p>(</span><span class=mi>1999</span><span class=p>)</span>                 <span class=n>Drama</span>  
</span></span><span class=line><span class=cl><span class=mi>1000207</span>                     <span class=n>One</span> <span class=n>Little</span> <span class=n>Indian</span> <span class=p>(</span><span class=mi>1973</span><span class=p>)</span>  <span class=n>Comedy</span><span class=o>|</span><span class=n>Drama</span><span class=o>|</span><span class=n>Western</span>  
</span></span><span class=line><span class=cl><span class=mi>1000208</span>  <span class=n>Five</span> <span class=n>Wives</span><span class=p>,</span> <span class=n>Three</span> <span class=n>Secretaries</span> <span class=ow>and</span> <span class=n>Me</span> <span class=p>(</span><span class=mi>1998</span><span class=p>)</span>           <span class=n>Documentary</span>  
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>1000209</span> <span class=n>rows</span> <span class=n>x</span> <span class=mi>10</span> <span class=n>columns</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>75</span><span class=p>]:</span> <span class=n>data</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>75</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>user_id</span>                                            <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>movie_id</span>                                        <span class=mi>1193</span>
</span></span><span class=line><span class=cl><span class=n>rating</span>                                             <span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=n>timestamp</span>                                  <span class=mi>978300760</span>
</span></span><span class=line><span class=cl><span class=n>gender</span>                                             <span class=n>F</span>
</span></span><span class=line><span class=cl><span class=n>age</span>                                                <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>occupation</span>                                        <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=nb>zip</span>                                            <span class=mi>48067</span>
</span></span><span class=line><span class=cl><span class=n>title</span>         <span class=n>One</span> <span class=n>Flew</span> <span class=n>Over</span> <span class=n>the</span> <span class=n>Cuckoo</span><span class=s1>&#39;s Nest (1975)</span>
</span></span><span class=line><span class=cl><span class=n>genres</span>                                         <span class=n>Drama</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=nb>object</span></span></span></code></pre></td></tr></table></div></div><p>ä¸ºäº†æŒ‰æ€§åˆ«è®¡ç®—æ¯éƒ¨ç”µå½±çš„å¹³å‡å¾—åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨pivot_tableæ–¹æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-31-1><a class=lnlinks href=#hl-31-1> 1</a>
</span><span class=lnt id=hl-31-2><a class=lnlinks href=#hl-31-2> 2</a>
</span><span class=lnt id=hl-31-3><a class=lnlinks href=#hl-31-3> 3</a>
</span><span class=lnt id=hl-31-4><a class=lnlinks href=#hl-31-4> 4</a>
</span><span class=lnt id=hl-31-5><a class=lnlinks href=#hl-31-5> 5</a>
</span><span class=lnt id=hl-31-6><a class=lnlinks href=#hl-31-6> 6</a>
</span><span class=lnt id=hl-31-7><a class=lnlinks href=#hl-31-7> 7</a>
</span><span class=lnt id=hl-31-8><a class=lnlinks href=#hl-31-8> 8</a>
</span><span class=lnt id=hl-31-9><a class=lnlinks href=#hl-31-9> 9</a>
</span><span class=lnt id=hl-31-10><a class=lnlinks href=#hl-31-10>10</a>
</span><span class=lnt id=hl-31-11><a class=lnlinks href=#hl-31-11>11</a>
</span><span class=lnt id=hl-31-12><a class=lnlinks href=#hl-31-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>76</span><span class=p>]:</span> <span class=n>mean_ratings</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>pivot_table</span><span class=p>(</span><span class=s1>&#39;rating&#39;</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=s1>&#39;title&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>....</span><span class=p>:</span>                                 <span class=n>columns</span><span class=o>=</span><span class=s1>&#39;gender&#39;</span><span class=p>,</span> <span class=n>aggfunc</span><span class=o>=</span><span class=s1>&#39;mean&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>77</span><span class=p>]:</span> <span class=n>mean_ratings</span><span class=p>[:</span><span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>77</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>gender</span>                                <span class=n>F</span>         <span class=n>M</span>
</span></span><span class=line><span class=cl><span class=n>title</span>                                            
</span></span><span class=line><span class=cl><span class=err>$</span><span class=mi>1</span><span class=p>,</span><span class=mi>000</span><span class=p>,</span><span class=mi>000</span> <span class=n>Duck</span> <span class=p>(</span><span class=mi>1971</span><span class=p>)</span>         <span class=mf>3.375000</span>  <span class=mf>2.761905</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;Night Mother (1986)           3.388889  3.352941</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;Til There Was You (1997)      2.675676  2.733333</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;burbs, The (1989)             2.793478  2.962085</span>
</span></span><span class=line><span class=cl><span class=o>...</span><span class=n>And</span> <span class=n>Justice</span> <span class=k>for</span> <span class=n>All</span> <span class=p>(</span><span class=mi>1979</span><span class=p>)</span>  <span class=mf>3.828571</span>  <span class=mf>3.689024</span></span></span></code></pre></td></tr></table></div></div><p>è¯¥æ“ä½œäº§ç”Ÿäº†å¦ä¸€ä¸ªDataFrameï¼Œå…¶å†…å®¹ä¸ºç”µå½±å¹³å‡å¾—åˆ†ï¼Œè¡Œæ ‡ä¸ºç”µå½±åç§°ï¼ˆç´¢å¼•ï¼‰ï¼Œåˆ—æ ‡ä¸ºæ€§åˆ«ã€‚ç°åœ¨ï¼Œæˆ‘æ‰“ç®—è¿‡æ»¤æ‰è¯„åˆ†æ•°æ®ä¸å¤Ÿ250æ¡çš„ç”µå½±ï¼ˆéšä¾¿é€‰çš„ä¸€ä¸ªæ•°å­—ï¼‰ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œæˆ‘å…ˆå¯¹titleè¿›è¡Œåˆ†ç»„ï¼Œç„¶ååˆ©ç”¨size()å¾—åˆ°ä¸€ä¸ªå«æœ‰å„ç”µå½±åˆ†ç»„å¤§å°çš„Serieså¯¹è±¡ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-32-1><a class=lnlinks href=#hl-32-1> 1</a>
</span><span class=lnt id=hl-32-2><a class=lnlinks href=#hl-32-2> 2</a>
</span><span class=lnt id=hl-32-3><a class=lnlinks href=#hl-32-3> 3</a>
</span><span class=lnt id=hl-32-4><a class=lnlinks href=#hl-32-4> 4</a>
</span><span class=lnt id=hl-32-5><a class=lnlinks href=#hl-32-5> 5</a>
</span><span class=lnt id=hl-32-6><a class=lnlinks href=#hl-32-6> 6</a>
</span><span class=lnt id=hl-32-7><a class=lnlinks href=#hl-32-7> 7</a>
</span><span class=lnt id=hl-32-8><a class=lnlinks href=#hl-32-8> 8</a>
</span><span class=lnt id=hl-32-9><a class=lnlinks href=#hl-32-9> 9</a>
</span><span class=lnt id=hl-32-10><a class=lnlinks href=#hl-32-10>10</a>
</span><span class=lnt id=hl-32-11><a class=lnlinks href=#hl-32-11>11</a>
</span><span class=lnt id=hl-32-12><a class=lnlinks href=#hl-32-12>12</a>
</span><span class=lnt id=hl-32-13><a class=lnlinks href=#hl-32-13>13</a>
</span><span class=lnt id=hl-32-14><a class=lnlinks href=#hl-32-14>14</a>
</span><span class=lnt id=hl-32-15><a class=lnlinks href=#hl-32-15>15</a>
</span><span class=lnt id=hl-32-16><a class=lnlinks href=#hl-32-16>16</a>
</span><span class=lnt id=hl-32-17><a class=lnlinks href=#hl-32-17>17</a>
</span><span class=lnt id=hl-32-18><a class=lnlinks href=#hl-32-18>18</a>
</span><span class=lnt id=hl-32-19><a class=lnlinks href=#hl-32-19>19</a>
</span><span class=lnt id=hl-32-20><a class=lnlinks href=#hl-32-20>20</a>
</span><span class=lnt id=hl-32-21><a class=lnlinks href=#hl-32-21>21</a>
</span><span class=lnt id=hl-32-22><a class=lnlinks href=#hl-32-22>22</a>
</span><span class=lnt id=hl-32-23><a class=lnlinks href=#hl-32-23>23</a>
</span><span class=lnt id=hl-32-24><a class=lnlinks href=#hl-32-24>24</a>
</span><span class=lnt id=hl-32-25><a class=lnlinks href=#hl-32-25>25</a>
</span><span class=lnt id=hl-32-26><a class=lnlinks href=#hl-32-26>26</a>
</span><span class=lnt id=hl-32-27><a class=lnlinks href=#hl-32-27>27</a>
</span><span class=lnt id=hl-32-28><a class=lnlinks href=#hl-32-28>28</a>
</span><span class=lnt id=hl-32-29><a class=lnlinks href=#hl-32-29>29</a>
</span><span class=lnt id=hl-32-30><a class=lnlinks href=#hl-32-30>30</a>
</span><span class=lnt id=hl-32-31><a class=lnlinks href=#hl-32-31>31</a>
</span><span class=lnt id=hl-32-32><a class=lnlinks href=#hl-32-32>32</a>
</span><span class=lnt id=hl-32-33><a class=lnlinks href=#hl-32-33>33</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>78</span><span class=p>]:</span> <span class=n>ratings_by_title</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;title&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>size</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>79</span><span class=p>]:</span> <span class=n>ratings_by_title</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>79</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>title</span>
</span></span><span class=line><span class=cl><span class=err>$</span><span class=mi>1</span><span class=p>,</span><span class=mi>000</span><span class=p>,</span><span class=mi>000</span> <span class=n>Duck</span> <span class=p>(</span><span class=mi>1971</span><span class=p>)</span>                <span class=mi>37</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;Night Mother (1986)                  70</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;Til There Was You (1997)             52</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;burbs, The (1989)                   303</span>
</span></span><span class=line><span class=cl><span class=o>...</span><span class=n>And</span> <span class=n>Justice</span> <span class=k>for</span> <span class=n>All</span> <span class=p>(</span><span class=mi>1979</span><span class=p>)</span>        <span class=mi>199</span>
</span></span><span class=line><span class=cl><span class=mi>1</span><span class=o>-</span><span class=mi>900</span> <span class=p>(</span><span class=mi>1994</span><span class=p>)</span>                           <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=mi>10</span> <span class=n>Things</span> <span class=n>I</span> <span class=n>Hate</span> <span class=n>About</span> <span class=n>You</span> <span class=p>(</span><span class=mi>1999</span><span class=p>)</span>    <span class=mi>700</span>
</span></span><span class=line><span class=cl><span class=mi>101</span> <span class=n>Dalmatians</span> <span class=p>(</span><span class=mi>1961</span><span class=p>)</span>                <span class=mi>565</span>
</span></span><span class=line><span class=cl><span class=mi>101</span> <span class=n>Dalmatians</span> <span class=p>(</span><span class=mi>1996</span><span class=p>)</span>                <span class=mi>364</span>
</span></span><span class=line><span class=cl><span class=mi>12</span> <span class=n>Angry</span> <span class=n>Men</span> <span class=p>(</span><span class=mi>1957</span><span class=p>)</span>                  <span class=mi>616</span>
</span></span><span class=line><span class=cl><span class=n>dtype</span><span class=p>:</span> <span class=n>int64</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>80</span><span class=p>]:</span> <span class=n>active_titles</span> <span class=o>=</span> <span class=n>ratings_by_title</span><span class=o>.</span><span class=n>index</span><span class=p>[</span><span class=n>ratings_by_title</span> <span class=o>&gt;=</span> <span class=mi>250</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>81</span><span class=p>]:</span> <span class=n>active_titles</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>81</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>Index</span><span class=p>([</span><span class=s1>&#39;&#39;</span><span class=n>burbs</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1989</span><span class=p>)</span><span class=s1>&#39;, &#39;</span><span class=mi>10</span> <span class=n>Things</span> <span class=n>I</span> <span class=n>Hate</span> <span class=n>About</span> <span class=n>You</span> <span class=p>(</span><span class=mi>1999</span><span class=p>)</span><span class=s1>&#39;,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;101 Dalmatians (1961)&#39;</span><span class=p>,</span> <span class=s1>&#39;101 Dalmatians (1996)&#39;</span><span class=p>,</span> <span class=s1>&#39;12 Angry Men (1957)&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;13th Warrior, The (1999)&#39;</span><span class=p>,</span> <span class=s1>&#39;2 Days in the Valley (1996)&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;20,000 Leagues Under the Sea (1954)&#39;</span><span class=p>,</span> <span class=s1>&#39;2001: A Space Odyssey (1968)&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;2010 (1984)&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;X-Men (2000)&#39;</span><span class=p>,</span> <span class=s1>&#39;Year of Living Dangerously (1982)&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Yellow Submarine (1968)&#39;</span><span class=p>,</span> <span class=s1>&#39;You&#39;</span><span class=n>ve</span> <span class=n>Got</span> <span class=n>Mail</span> <span class=p>(</span><span class=mi>1998</span><span class=p>)</span><span class=s1>&#39;,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Young Frankenstein (1974)&#39;</span><span class=p>,</span> <span class=s1>&#39;Young Guns (1988)&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Young Guns II (1990)&#39;</span><span class=p>,</span> <span class=s1>&#39;Young Sherlock Holmes (1985)&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Zero Effect (1998)&#39;</span><span class=p>,</span> <span class=s1>&#39;eXistenZ (1999)&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=n>dtype</span><span class=o>=</span><span class=s1>&#39;object&#39;</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=n>length</span><span class=o>=</span><span class=mi>1216</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>æ ‡é¢˜ç´¢å¼•ä¸­å«æœ‰è¯„åˆ†æ•°æ®å¤§äº250æ¡çš„ç”µå½±åç§°ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥æ®æ­¤ä»å‰é¢çš„mean_ratingsä¸­é€‰å–æ‰€éœ€çš„è¡Œäº†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-33-1><a class=lnlinks href=#hl-33-1> 1</a>
</span><span class=lnt id=hl-33-2><a class=lnlinks href=#hl-33-2> 2</a>
</span><span class=lnt id=hl-33-3><a class=lnlinks href=#hl-33-3> 3</a>
</span><span class=lnt id=hl-33-4><a class=lnlinks href=#hl-33-4> 4</a>
</span><span class=lnt id=hl-33-5><a class=lnlinks href=#hl-33-5> 5</a>
</span><span class=lnt id=hl-33-6><a class=lnlinks href=#hl-33-6> 6</a>
</span><span class=lnt id=hl-33-7><a class=lnlinks href=#hl-33-7> 7</a>
</span><span class=lnt id=hl-33-8><a class=lnlinks href=#hl-33-8> 8</a>
</span><span class=lnt id=hl-33-9><a class=lnlinks href=#hl-33-9> 9</a>
</span><span class=lnt id=hl-33-10><a class=lnlinks href=#hl-33-10>10</a>
</span><span class=lnt id=hl-33-11><a class=lnlinks href=#hl-33-11>11</a>
</span><span class=lnt id=hl-33-12><a class=lnlinks href=#hl-33-12>12</a>
</span><span class=lnt id=hl-33-13><a class=lnlinks href=#hl-33-13>13</a>
</span><span class=lnt id=hl-33-14><a class=lnlinks href=#hl-33-14>14</a>
</span><span class=lnt id=hl-33-15><a class=lnlinks href=#hl-33-15>15</a>
</span><span class=lnt id=hl-33-16><a class=lnlinks href=#hl-33-16>16</a>
</span><span class=lnt id=hl-33-17><a class=lnlinks href=#hl-33-17>17</a>
</span><span class=lnt id=hl-33-18><a class=lnlinks href=#hl-33-18>18</a>
</span><span class=lnt id=hl-33-19><a class=lnlinks href=#hl-33-19>19</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Select rows on the index</span>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>82</span><span class=p>]:</span> <span class=n>mean_ratings</span> <span class=o>=</span> <span class=n>mean_ratings</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>active_titles</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>83</span><span class=p>]:</span> <span class=n>mean_ratings</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>83</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>gender</span>                                    <span class=n>F</span>         <span class=n>M</span>
</span></span><span class=line><span class=cl><span class=n>title</span>                                                
</span></span><span class=line><span class=cl><span class=s1>&#39;burbs, The (1989)                 2.793478  2.962085</span>
</span></span><span class=line><span class=cl><span class=mi>10</span> <span class=n>Things</span> <span class=n>I</span> <span class=n>Hate</span> <span class=n>About</span> <span class=n>You</span> <span class=p>(</span><span class=mi>1999</span><span class=p>)</span>  <span class=mf>3.646552</span>  <span class=mf>3.311966</span>
</span></span><span class=line><span class=cl><span class=mi>101</span> <span class=n>Dalmatians</span> <span class=p>(</span><span class=mi>1961</span><span class=p>)</span>              <span class=mf>3.791444</span>  <span class=mf>3.500000</span>
</span></span><span class=line><span class=cl><span class=mi>101</span> <span class=n>Dalmatians</span> <span class=p>(</span><span class=mi>1996</span><span class=p>)</span>              <span class=mf>3.240000</span>  <span class=mf>2.911215</span>
</span></span><span class=line><span class=cl><span class=mi>12</span> <span class=n>Angry</span> <span class=n>Men</span> <span class=p>(</span><span class=mi>1957</span><span class=p>)</span>                <span class=mf>4.184397</span>  <span class=mf>4.328421</span>
</span></span><span class=line><span class=cl><span class=o>...</span>                                     <span class=o>...</span>       <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=n>Young</span> <span class=n>Guns</span> <span class=p>(</span><span class=mi>1988</span><span class=p>)</span>                  <span class=mf>3.371795</span>  <span class=mf>3.425620</span>
</span></span><span class=line><span class=cl><span class=n>Young</span> <span class=n>Guns</span> <span class=n>II</span> <span class=p>(</span><span class=mi>1990</span><span class=p>)</span>               <span class=mf>2.934783</span>  <span class=mf>2.904025</span>
</span></span><span class=line><span class=cl><span class=n>Young</span> <span class=n>Sherlock</span> <span class=n>Holmes</span> <span class=p>(</span><span class=mi>1985</span><span class=p>)</span>       <span class=mf>3.514706</span>  <span class=mf>3.363344</span>
</span></span><span class=line><span class=cl><span class=n>Zero</span> <span class=n>Effect</span> <span class=p>(</span><span class=mi>1998</span><span class=p>)</span>                 <span class=mf>3.864407</span>  <span class=mf>3.723140</span>
</span></span><span class=line><span class=cl><span class=n>eXistenZ</span> <span class=p>(</span><span class=mi>1999</span><span class=p>)</span>                    <span class=mf>3.098592</span>  <span class=mf>3.289086</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>1216</span> <span class=n>rows</span> <span class=n>x</span> <span class=mi>2</span> <span class=n>columns</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>ä¸ºäº†äº†è§£å¥³æ€§è§‚ä¼—æœ€å–œæ¬¢çš„ç”µå½±ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹Fåˆ—é™åºæ’åˆ—ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-34-1><a class=lnlinks href=#hl-34-1> 1</a>
</span><span class=lnt id=hl-34-2><a class=lnlinks href=#hl-34-2> 2</a>
</span><span class=lnt id=hl-34-3><a class=lnlinks href=#hl-34-3> 3</a>
</span><span class=lnt id=hl-34-4><a class=lnlinks href=#hl-34-4> 4</a>
</span><span class=lnt id=hl-34-5><a class=lnlinks href=#hl-34-5> 5</a>
</span><span class=lnt id=hl-34-6><a class=lnlinks href=#hl-34-6> 6</a>
</span><span class=lnt id=hl-34-7><a class=lnlinks href=#hl-34-7> 7</a>
</span><span class=lnt id=hl-34-8><a class=lnlinks href=#hl-34-8> 8</a>
</span><span class=lnt id=hl-34-9><a class=lnlinks href=#hl-34-9> 9</a>
</span><span class=lnt id=hl-34-10><a class=lnlinks href=#hl-34-10>10</a>
</span><span class=lnt id=hl-34-11><a class=lnlinks href=#hl-34-11>11</a>
</span><span class=lnt id=hl-34-12><a class=lnlinks href=#hl-34-12>12</a>
</span><span class=lnt id=hl-34-13><a class=lnlinks href=#hl-34-13>13</a>
</span><span class=lnt id=hl-34-14><a class=lnlinks href=#hl-34-14>14</a>
</span><span class=lnt id=hl-34-15><a class=lnlinks href=#hl-34-15>15</a>
</span><span class=lnt id=hl-34-16><a class=lnlinks href=#hl-34-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>85</span><span class=p>]:</span> <span class=n>top_female_ratings</span> <span class=o>=</span> <span class=n>mean_ratings</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=n>by</span><span class=o>=</span><span class=s1>&#39;F&#39;</span><span class=p>,</span> <span class=n>ascending</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>86</span><span class=p>]:</span> <span class=n>top_female_ratings</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>86</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>gender</span>                                                     <span class=n>F</span>         <span class=n>M</span>
</span></span><span class=line><span class=cl><span class=n>title</span>                                                                 
</span></span><span class=line><span class=cl><span class=n>Close</span> <span class=n>Shave</span><span class=p>,</span> <span class=n>A</span> <span class=p>(</span><span class=mi>1995</span><span class=p>)</span>                               <span class=mf>4.644444</span>  <span class=mf>4.473795</span>
</span></span><span class=line><span class=cl><span class=n>Wrong</span> <span class=n>Trousers</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1993</span><span class=p>)</span>                          <span class=mf>4.588235</span>  <span class=mf>4.478261</span>
</span></span><span class=line><span class=cl><span class=n>Sunset</span> <span class=n>Blvd</span><span class=o>.</span> <span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>k</span><span class=o>.</span><span class=n>a</span><span class=o>.</span> <span class=n>Sunset</span> <span class=n>Boulevard</span><span class=p>)</span> <span class=p>(</span><span class=mi>1950</span><span class=p>)</span>       <span class=mf>4.572650</span>  <span class=mf>4.464589</span>
</span></span><span class=line><span class=cl><span class=n>Wallace</span> <span class=o>&amp;</span> <span class=n>Gromit</span><span class=p>:</span> <span class=n>The</span> <span class=n>Best</span> <span class=n>of</span> <span class=n>Aardman</span> <span class=n>Animation</span><span class=o>...</span>  <span class=mf>4.563107</span>  <span class=mf>4.385075</span>
</span></span><span class=line><span class=cl><span class=n>Schindler</span><span class=s1>&#39;s List (1993)                             4.562602  4.491415</span>
</span></span><span class=line><span class=cl><span class=n>Shawshank</span> <span class=n>Redemption</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1994</span><span class=p>)</span>                    <span class=mf>4.539075</span>  <span class=mf>4.560625</span>
</span></span><span class=line><span class=cl><span class=n>Grand</span> <span class=n>Day</span> <span class=n>Out</span><span class=p>,</span> <span class=n>A</span> <span class=p>(</span><span class=mi>1992</span><span class=p>)</span>                             <span class=mf>4.537879</span>  <span class=mf>4.293255</span>
</span></span><span class=line><span class=cl><span class=n>To</span> <span class=n>Kill</span> <span class=n>a</span> <span class=n>Mockingbird</span> <span class=p>(</span><span class=mi>1962</span><span class=p>)</span>                        <span class=mf>4.536667</span>  <span class=mf>4.372611</span>
</span></span><span class=line><span class=cl><span class=n>Creature</span> <span class=n>Comforts</span> <span class=p>(</span><span class=mi>1990</span><span class=p>)</span>                            <span class=mf>4.513889</span>  <span class=mf>4.272277</span>
</span></span><span class=line><span class=cl><span class=n>Usual</span> <span class=n>Suspects</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1995</span><span class=p>)</span>                          <span class=mf>4.513317</span>  <span class=mf>4.518248</span></span></span></code></pre></td></tr></table></div></div><h3 id=1421-è®¡ç®—è¯„åˆ†åˆ†æ­§>14.2.1 è®¡ç®—è¯„åˆ†åˆ†æ­§
<a class=header-anchor href=#1421-%e8%ae%a1%e7%ae%97%e8%af%84%e5%88%86%e5%88%86%e6%ad%a7></a></h3><p>å‡è®¾æˆ‘ä»¬æƒ³è¦æ‰¾å‡ºç”·æ€§å’Œå¥³æ€§è§‚ä¼—åˆ†æ­§æœ€å¤§çš„ç”µå½±ã€‚ä¸€ä¸ªåŠæ³•æ˜¯ç»™mean_ratingsåŠ ä¸Šä¸€ä¸ªç”¨äºå­˜æ”¾å¹³å‡å¾—åˆ†ä¹‹å·®çš„åˆ—ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæ’åºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-35-1><a class=lnlinks href=#hl-35-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>87</span><span class=p>]:</span> <span class=n>mean_ratings</span><span class=p>[</span><span class=s1>&#39;diff&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>mean_ratings</span><span class=p>[</span><span class=s1>&#39;M&#39;</span><span class=p>]</span> <span class=o>-</span> <span class=n>mean_ratings</span><span class=p>[</span><span class=s1>&#39;F&#39;</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>æŒ‰"diff"æ’åºå³å¯å¾—åˆ°åˆ†æ­§æœ€å¤§ä¸”å¥³æ€§è§‚ä¼—æ›´å–œæ¬¢çš„ç”µå½±ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-36-1><a class=lnlinks href=#hl-36-1> 1</a>
</span><span class=lnt id=hl-36-2><a class=lnlinks href=#hl-36-2> 2</a>
</span><span class=lnt id=hl-36-3><a class=lnlinks href=#hl-36-3> 3</a>
</span><span class=lnt id=hl-36-4><a class=lnlinks href=#hl-36-4> 4</a>
</span><span class=lnt id=hl-36-5><a class=lnlinks href=#hl-36-5> 5</a>
</span><span class=lnt id=hl-36-6><a class=lnlinks href=#hl-36-6> 6</a>
</span><span class=lnt id=hl-36-7><a class=lnlinks href=#hl-36-7> 7</a>
</span><span class=lnt id=hl-36-8><a class=lnlinks href=#hl-36-8> 8</a>
</span><span class=lnt id=hl-36-9><a class=lnlinks href=#hl-36-9> 9</a>
</span><span class=lnt id=hl-36-10><a class=lnlinks href=#hl-36-10>10</a>
</span><span class=lnt id=hl-36-11><a class=lnlinks href=#hl-36-11>11</a>
</span><span class=lnt id=hl-36-12><a class=lnlinks href=#hl-36-12>12</a>
</span><span class=lnt id=hl-36-13><a class=lnlinks href=#hl-36-13>13</a>
</span><span class=lnt id=hl-36-14><a class=lnlinks href=#hl-36-14>14</a>
</span><span class=lnt id=hl-36-15><a class=lnlinks href=#hl-36-15>15</a>
</span><span class=lnt id=hl-36-16><a class=lnlinks href=#hl-36-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>88</span><span class=p>]:</span> <span class=n>sorted_by_diff</span> <span class=o>=</span> <span class=n>mean_ratings</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=n>by</span><span class=o>=</span><span class=s1>&#39;diff&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>89</span><span class=p>]:</span> <span class=n>sorted_by_diff</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>89</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>gender</span>                                        <span class=n>F</span>         <span class=n>M</span>      <span class=n>diff</span>
</span></span><span class=line><span class=cl><span class=n>title</span>                                                              
</span></span><span class=line><span class=cl><span class=n>Dirty</span> <span class=n>Dancing</span> <span class=p>(</span><span class=mi>1987</span><span class=p>)</span>                   <span class=mf>3.790378</span>  <span class=mf>2.959596</span> <span class=o>-</span><span class=mf>0.830782</span>
</span></span><span class=line><span class=cl><span class=n>Jumpin</span><span class=s1>&#39; Jack Flash (1986)              3.254717  2.578358 -0.676359</span>
</span></span><span class=line><span class=cl><span class=n>Grease</span> <span class=p>(</span><span class=mi>1978</span><span class=p>)</span>                          <span class=mf>3.975265</span>  <span class=mf>3.367041</span> <span class=o>-</span><span class=mf>0.608224</span>
</span></span><span class=line><span class=cl><span class=n>Little</span> <span class=n>Women</span> <span class=p>(</span><span class=mi>1994</span><span class=p>)</span>                    <span class=mf>3.870588</span>  <span class=mf>3.321739</span> <span class=o>-</span><span class=mf>0.548849</span>
</span></span><span class=line><span class=cl><span class=n>Steel</span> <span class=n>Magnolias</span> <span class=p>(</span><span class=mi>1989</span><span class=p>)</span>                 <span class=mf>3.901734</span>  <span class=mf>3.365957</span> <span class=o>-</span><span class=mf>0.535777</span>
</span></span><span class=line><span class=cl><span class=n>Anastasia</span> <span class=p>(</span><span class=mi>1997</span><span class=p>)</span>                       <span class=mf>3.800000</span>  <span class=mf>3.281609</span> <span class=o>-</span><span class=mf>0.518391</span>
</span></span><span class=line><span class=cl><span class=n>Rocky</span> <span class=n>Horror</span> <span class=n>Picture</span> <span class=n>Show</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1975</span><span class=p>)</span>  <span class=mf>3.673016</span>  <span class=mf>3.160131</span> <span class=o>-</span><span class=mf>0.512885</span>
</span></span><span class=line><span class=cl><span class=n>Color</span> <span class=n>Purple</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1985</span><span class=p>)</span>               <span class=mf>4.158192</span>  <span class=mf>3.659341</span> <span class=o>-</span><span class=mf>0.498851</span>
</span></span><span class=line><span class=cl><span class=n>Age</span> <span class=n>of</span> <span class=n>Innocence</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1993</span><span class=p>)</span>           <span class=mf>3.827068</span>  <span class=mf>3.339506</span> <span class=o>-</span><span class=mf>0.487561</span>
</span></span><span class=line><span class=cl><span class=n>Free</span> <span class=n>Willy</span> <span class=p>(</span><span class=mi>1993</span><span class=p>)</span>                      <span class=mf>2.921348</span>  <span class=mf>2.438776</span> <span class=o>-</span><span class=mf>0.482573</span></span></span></code></pre></td></tr></table></div></div><p>å¯¹æ’åºç»“æœååºå¹¶å–å‡ºå‰10è¡Œï¼Œå¾—åˆ°çš„åˆ™æ˜¯ç”·æ€§è§‚ä¼—æ›´å–œæ¬¢çš„ç”µå½±ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-37-1><a class=lnlinks href=#hl-37-1> 1</a>
</span><span class=lnt id=hl-37-2><a class=lnlinks href=#hl-37-2> 2</a>
</span><span class=lnt id=hl-37-3><a class=lnlinks href=#hl-37-3> 3</a>
</span><span class=lnt id=hl-37-4><a class=lnlinks href=#hl-37-4> 4</a>
</span><span class=lnt id=hl-37-5><a class=lnlinks href=#hl-37-5> 5</a>
</span><span class=lnt id=hl-37-6><a class=lnlinks href=#hl-37-6> 6</a>
</span><span class=lnt id=hl-37-7><a class=lnlinks href=#hl-37-7> 7</a>
</span><span class=lnt id=hl-37-8><a class=lnlinks href=#hl-37-8> 8</a>
</span><span class=lnt id=hl-37-9><a class=lnlinks href=#hl-37-9> 9</a>
</span><span class=lnt id=hl-37-10><a class=lnlinks href=#hl-37-10>10</a>
</span><span class=lnt id=hl-37-11><a class=lnlinks href=#hl-37-11>11</a>
</span><span class=lnt id=hl-37-12><a class=lnlinks href=#hl-37-12>12</a>
</span><span class=lnt id=hl-37-13><a class=lnlinks href=#hl-37-13>13</a>
</span><span class=lnt id=hl-37-14><a class=lnlinks href=#hl-37-14>14</a>
</span><span class=lnt id=hl-37-15><a class=lnlinks href=#hl-37-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Reverse order of rows, take first 10 rows</span>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>90</span><span class=p>]:</span> <span class=n>sorted_by_diff</span><span class=p>[::</span><span class=o>-</span><span class=mi>1</span><span class=p>][:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>90</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>gender</span>                                         <span class=n>F</span>         <span class=n>M</span>      <span class=n>diff</span>
</span></span><span class=line><span class=cl><span class=n>title</span>                                                               
</span></span><span class=line><span class=cl><span class=n>Good</span><span class=p>,</span> <span class=n>The</span> <span class=n>Bad</span> <span class=ow>and</span> <span class=n>The</span> <span class=n>Ugly</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1966</span><span class=p>)</span>  <span class=mf>3.494949</span>  <span class=mf>4.221300</span>  <span class=mf>0.726351</span>
</span></span><span class=line><span class=cl><span class=n>Kentucky</span> <span class=n>Fried</span> <span class=n>Movie</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1977</span><span class=p>)</span>        <span class=mf>2.878788</span>  <span class=mf>3.555147</span>  <span class=mf>0.676359</span>
</span></span><span class=line><span class=cl><span class=n>Dumb</span> <span class=o>&amp;</span> <span class=n>Dumber</span> <span class=p>(</span><span class=mi>1994</span><span class=p>)</span>                    <span class=mf>2.697987</span>  <span class=mf>3.336595</span>  <span class=mf>0.638608</span>
</span></span><span class=line><span class=cl><span class=n>Longest</span> <span class=n>Day</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1962</span><span class=p>)</span>                 <span class=mf>3.411765</span>  <span class=mf>4.031447</span>  <span class=mf>0.619682</span>
</span></span><span class=line><span class=cl><span class=n>Cable</span> <span class=n>Guy</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1996</span><span class=p>)</span>                   <span class=mf>2.250000</span>  <span class=mf>2.863787</span>  <span class=mf>0.613787</span>
</span></span><span class=line><span class=cl><span class=n>Evil</span> <span class=n>Dead</span> <span class=n>II</span> <span class=p>(</span><span class=n>Dead</span> <span class=n>By</span> <span class=n>Dawn</span><span class=p>)</span> <span class=p>(</span><span class=mi>1987</span><span class=p>)</span>      <span class=mf>3.297297</span>  <span class=mf>3.909283</span>  <span class=mf>0.611985</span>
</span></span><span class=line><span class=cl><span class=n>Hidden</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1987</span><span class=p>)</span>                      <span class=mf>3.137931</span>  <span class=mf>3.745098</span>  <span class=mf>0.607167</span>
</span></span><span class=line><span class=cl><span class=n>Rocky</span> <span class=n>III</span> <span class=p>(</span><span class=mi>1982</span><span class=p>)</span>                        <span class=mf>2.361702</span>  <span class=mf>2.943503</span>  <span class=mf>0.581801</span>
</span></span><span class=line><span class=cl><span class=n>Caddyshack</span> <span class=p>(</span><span class=mi>1980</span><span class=p>)</span>                       <span class=mf>3.396135</span>  <span class=mf>3.969737</span>  <span class=mf>0.573602</span>
</span></span><span class=line><span class=cl><span class=n>For</span> <span class=n>a</span> <span class=n>Few</span> <span class=n>Dollars</span> <span class=n>More</span> <span class=p>(</span><span class=mi>1965</span><span class=p>)</span>           <span class=mf>3.409091</span>  <span class=mf>3.953795</span>  <span class=mf>0.544704</span></span></span></code></pre></td></tr></table></div></div><p>å¦‚æœåªæ˜¯æƒ³è¦æ‰¾å‡ºåˆ†æ­§æœ€å¤§çš„ç”µå½±ï¼ˆä¸è€ƒè™‘æ€§åˆ«å› ç´ ï¼‰ï¼Œåˆ™å¯ä»¥è®¡ç®—å¾—åˆ†æ•°æ®çš„æ–¹å·®æˆ–æ ‡å‡†å·®ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-38-1><a class=lnlinks href=#hl-38-1> 1</a>
</span><span class=lnt id=hl-38-2><a class=lnlinks href=#hl-38-2> 2</a>
</span><span class=lnt id=hl-38-3><a class=lnlinks href=#hl-38-3> 3</a>
</span><span class=lnt id=hl-38-4><a class=lnlinks href=#hl-38-4> 4</a>
</span><span class=lnt id=hl-38-5><a class=lnlinks href=#hl-38-5> 5</a>
</span><span class=lnt id=hl-38-6><a class=lnlinks href=#hl-38-6> 6</a>
</span><span class=lnt id=hl-38-7><a class=lnlinks href=#hl-38-7> 7</a>
</span><span class=lnt id=hl-38-8><a class=lnlinks href=#hl-38-8> 8</a>
</span><span class=lnt id=hl-38-9><a class=lnlinks href=#hl-38-9> 9</a>
</span><span class=lnt id=hl-38-10><a class=lnlinks href=#hl-38-10>10</a>
</span><span class=lnt id=hl-38-11><a class=lnlinks href=#hl-38-11>11</a>
</span><span class=lnt id=hl-38-12><a class=lnlinks href=#hl-38-12>12</a>
</span><span class=lnt id=hl-38-13><a class=lnlinks href=#hl-38-13>13</a>
</span><span class=lnt id=hl-38-14><a class=lnlinks href=#hl-38-14>14</a>
</span><span class=lnt id=hl-38-15><a class=lnlinks href=#hl-38-15>15</a>
</span><span class=lnt id=hl-38-16><a class=lnlinks href=#hl-38-16>16</a>
</span><span class=lnt id=hl-38-17><a class=lnlinks href=#hl-38-17>17</a>
</span><span class=lnt id=hl-38-18><a class=lnlinks href=#hl-38-18>18</a>
</span><span class=lnt id=hl-38-19><a class=lnlinks href=#hl-38-19>19</a>
</span><span class=lnt id=hl-38-20><a class=lnlinks href=#hl-38-20>20</a>
</span><span class=lnt id=hl-38-21><a class=lnlinks href=#hl-38-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Standard deviation of rating grouped by title</span>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>91</span><span class=p>]:</span> <span class=n>rating_std_by_title</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;title&#39;</span><span class=p>)[</span><span class=s1>&#39;rating&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>std</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Filter down to active_titles</span>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>92</span><span class=p>]:</span> <span class=n>rating_std_by_title</span> <span class=o>=</span> <span class=n>rating_std_by_title</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>active_titles</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Order Series by value in descending order</span>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>93</span><span class=p>]:</span> <span class=n>rating_std_by_title</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=n>ascending</span><span class=o>=</span><span class=kc>False</span><span class=p>)[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>93</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>title</span>
</span></span><span class=line><span class=cl><span class=n>Dumb</span> <span class=o>&amp;</span> <span class=n>Dumber</span> <span class=p>(</span><span class=mi>1994</span><span class=p>)</span>                     <span class=mf>1.321333</span>
</span></span><span class=line><span class=cl><span class=n>Blair</span> <span class=n>Witch</span> <span class=n>Project</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1999</span><span class=p>)</span>          <span class=mf>1.316368</span>
</span></span><span class=line><span class=cl><span class=n>Natural</span> <span class=n>Born</span> <span class=n>Killers</span> <span class=p>(</span><span class=mi>1994</span><span class=p>)</span>              <span class=mf>1.307198</span>
</span></span><span class=line><span class=cl><span class=n>Tank</span> <span class=n>Girl</span> <span class=p>(</span><span class=mi>1995</span><span class=p>)</span>                         <span class=mf>1.277695</span>
</span></span><span class=line><span class=cl><span class=n>Rocky</span> <span class=n>Horror</span> <span class=n>Picture</span> <span class=n>Show</span><span class=p>,</span> <span class=n>The</span> <span class=p>(</span><span class=mi>1975</span><span class=p>)</span>    <span class=mf>1.260177</span>
</span></span><span class=line><span class=cl><span class=n>Eyes</span> <span class=n>Wide</span> <span class=n>Shut</span> <span class=p>(</span><span class=mi>1999</span><span class=p>)</span>                    <span class=mf>1.259624</span>
</span></span><span class=line><span class=cl><span class=n>Evita</span> <span class=p>(</span><span class=mi>1996</span><span class=p>)</span>                             <span class=mf>1.253631</span>
</span></span><span class=line><span class=cl><span class=n>Billy</span> <span class=n>Madison</span> <span class=p>(</span><span class=mi>1995</span><span class=p>)</span>                     <span class=mf>1.249970</span>
</span></span><span class=line><span class=cl><span class=n>Fear</span> <span class=ow>and</span> <span class=n>Loathing</span> <span class=ow>in</span> <span class=n>Las</span> <span class=n>Vegas</span> <span class=p>(</span><span class=mi>1998</span><span class=p>)</span>    <span class=mf>1.246408</span>
</span></span><span class=line><span class=cl><span class=n>Bicentennial</span> <span class=n>Man</span> <span class=p>(</span><span class=mi>1999</span><span class=p>)</span>                  <span class=mf>1.245533</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>rating</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>float64</span></span></span></code></pre></td></tr></table></div></div><p>å¯èƒ½ä½ å·²ç»æ³¨æ„åˆ°äº†ï¼Œç”µå½±åˆ†ç±»æ˜¯ä»¥ç«–çº¿ï¼ˆ|ï¼‰åˆ†éš”çš„å­—ç¬¦ä¸²å½¢å¼ç»™å‡ºçš„ã€‚å¦‚æœæƒ³å¯¹ç”µå½±åˆ†ç±»è¿›è¡Œåˆ†æçš„è¯ï¼Œå°±éœ€è¦å…ˆå°†å…¶è½¬æ¢æˆæ›´æœ‰ç”¨çš„å½¢å¼æ‰è¡Œã€‚</p><h2 id=143-1880-2010å¹´é—´å…¨ç¾å©´å„¿å§“å>14.3 1880-2010å¹´é—´å…¨ç¾å©´å„¿å§“å
<a class=header-anchor href=#143-1880-2010%e5%b9%b4%e9%97%b4%e5%85%a8%e7%be%8e%e5%a9%b4%e5%84%bf%e5%a7%93%e5%90%8d></a></h2><p>ç¾å›½ç¤¾ä¼šä¿éšœæ€»ç½²ï¼ˆSSAï¼‰æä¾›äº†ä¸€ä»½ä»1880å¹´åˆ°ç°åœ¨çš„å©´å„¿åå­—é¢‘ç‡æ•°æ®ã€‚Hadley Wickhamï¼ˆè®¸å¤šæµè¡ŒRåŒ…çš„ä½œè€…ï¼‰ç»å¸¸ç”¨è¿™ä»½æ•°æ®æ¥æ¼”ç¤ºRçš„æ•°æ®å¤„ç†åŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬è¦åšä¸€äº›æ•°æ®è§„æ•´æ‰èƒ½åŠ è½½è¿™ä¸ªæ•°æ®é›†ï¼Œè¿™ä¹ˆåšå°±ä¼šäº§ç”Ÿä¸€ä¸ªå¦‚ä¸‹çš„DataFrameï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-39-1><a class=lnlinks href=#hl-39-1> 1</a>
</span><span class=lnt id=hl-39-2><a class=lnlinks href=#hl-39-2> 2</a>
</span><span class=lnt id=hl-39-3><a class=lnlinks href=#hl-39-3> 3</a>
</span><span class=lnt id=hl-39-4><a class=lnlinks href=#hl-39-4> 4</a>
</span><span class=lnt id=hl-39-5><a class=lnlinks href=#hl-39-5> 5</a>
</span><span class=lnt id=hl-39-6><a class=lnlinks href=#hl-39-6> 6</a>
</span><span class=lnt id=hl-39-7><a class=lnlinks href=#hl-39-7> 7</a>
</span><span class=lnt id=hl-39-8><a class=lnlinks href=#hl-39-8> 8</a>
</span><span class=lnt id=hl-39-9><a class=lnlinks href=#hl-39-9> 9</a>
</span><span class=lnt id=hl-39-10><a class=lnlinks href=#hl-39-10>10</a>
</span><span class=lnt id=hl-39-11><a class=lnlinks href=#hl-39-11>11</a>
</span><span class=lnt id=hl-39-12><a class=lnlinks href=#hl-39-12>12</a>
</span><span class=lnt id=hl-39-13><a class=lnlinks href=#hl-39-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>4</span><span class=p>]:</span> <span class=n>names</span><span class=o>.</span><span class=n>head</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>4</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=n>name</span> <span class=n>sex</span>  <span class=n>births</span>  <span class=n>year</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>       <span class=n>Mary</span>   <span class=n>F</span>    <span class=mi>7065</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>       <span class=n>Anna</span>   <span class=n>F</span>    <span class=mi>2604</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>       <span class=n>Emma</span>   <span class=n>F</span>    <span class=mi>2003</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>  <span class=n>Elizabeth</span>   <span class=n>F</span>    <span class=mi>1939</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>     <span class=n>Minnie</span>   <span class=n>F</span>    <span class=mi>1746</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=mi>5</span>   <span class=n>Margaret</span>   <span class=n>F</span>    <span class=mi>1578</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=mi>6</span>        <span class=n>Ida</span>   <span class=n>F</span>    <span class=mi>1472</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=mi>7</span>      <span class=n>Alice</span>   <span class=n>F</span>    <span class=mi>1414</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=mi>8</span>     <span class=n>Bertha</span>   <span class=n>F</span>    <span class=mi>1320</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=mi>9</span>      <span class=n>Sarah</span>   <span class=n>F</span>    <span class=mi>1288</span>  <span class=mi>1880</span></span></span></code></pre></td></tr></table></div></div><p>ä½ å¯ä»¥ç”¨è¿™ä¸ªæ•°æ®é›†åšå¾ˆå¤šäº‹ï¼Œä¾‹å¦‚ï¼š</p><ul><li>è®¡ç®—æŒ‡å®šåå­—ï¼ˆå¯ä»¥æ˜¯ä½ è‡ªå·±çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ«äººçš„ï¼‰çš„å¹´åº¦æ¯”ä¾‹ã€‚</li><li>è®¡ç®—æŸä¸ªåå­—çš„ç›¸å¯¹æ’åã€‚</li><li>è®¡ç®—å„å¹´åº¦æœ€æµè¡Œçš„åå­—ï¼Œä»¥åŠå¢é•¿æˆ–å‡å°‘æœ€å¿«çš„åå­—ã€‚</li><li>åˆ†æåå­—è¶‹åŠ¿ï¼šå…ƒéŸ³ã€è¾…éŸ³ã€é•¿åº¦ã€æ€»ä½“å¤šæ ·æ€§ã€æ‹¼å†™å˜åŒ–ã€é¦–å°¾å­—æ¯ç­‰ã€‚</li><li>åˆ†æå¤–æºæ€§è¶‹åŠ¿ï¼šåœ£ç»ä¸­çš„åå­—ã€åäººã€äººå£ç»“æ„å˜åŒ–ç­‰ã€‚</li></ul><p>åˆ©ç”¨å‰é¢ä»‹ç»è¿‡çš„é‚£äº›å·¥å…·ï¼Œè¿™äº›åˆ†æå·¥ä½œéƒ½èƒ½å¾ˆè½»æ¾åœ°å®Œæˆï¼Œæˆ‘ä¼šè®²è§£å…¶ä¸­çš„ä¸€äº›ã€‚</p><p>åˆ°ç¼–å†™æœ¬ä¹¦æ—¶ä¸ºæ­¢ï¼Œç¾å›½ç¤¾ä¼šä¿éšœæ€»ç½²å°†è¯¥æ•°æ®åº“æŒ‰å¹´åº¦åˆ¶æˆäº†å¤šä¸ªæ•°æ®æ–‡ä»¶ï¼Œå…¶ä¸­ç»™å‡ºäº†æ¯ä¸ªæ€§åˆ«/åå­—ç»„åˆçš„å‡ºç”Ÿæ€»æ•°ã€‚è¿™äº›æ–‡ä»¶çš„åŸå§‹æ¡£æ¡ˆå¯ä»¥åœ¨è¿™é‡Œè·å–ï¼š
<a href=http://www.ssa.gov/oact/babynames/limits.html title=http://www.ssa.gov/oact/babynames/limits.html rel="noopener external nofollow noreferrer" target=_blank class=exturl>http://www.ssa.gov/oact/babynames/limits.html
<i class="fa fa-external-link-alt"></i>
</a>ã€‚</p><p>å¦‚æœä½ åœ¨é˜…è¯»æœ¬ä¹¦çš„æ—¶å€™è¿™ä¸ªé¡µé¢å·²ç»ä¸è§äº†ï¼Œä¹Ÿå¯ä»¥ç”¨æœç´¢å¼•æ“æ‰¾æ‰¾ã€‚</p><p>ä¸‹è½½"National data"æ–‡ä»¶names.zipï¼Œè§£å‹åçš„ç›®å½•ä¸­å«æœ‰ä¸€ç»„æ–‡ä»¶ï¼ˆå¦‚yob1880.txtï¼‰ã€‚æˆ‘ç”¨UNIXçš„headå‘½ä»¤æŸ¥çœ‹äº†å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶çš„å‰10è¡Œï¼ˆåœ¨Windowsä¸Šï¼Œä½ å¯ä»¥ç”¨moreå‘½ä»¤ï¼Œæˆ–ç›´æ¥åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-40-1><a class=lnlinks href=#hl-40-1> 1</a>
</span><span class=lnt id=hl-40-2><a class=lnlinks href=#hl-40-2> 2</a>
</span><span class=lnt id=hl-40-3><a class=lnlinks href=#hl-40-3> 3</a>
</span><span class=lnt id=hl-40-4><a class=lnlinks href=#hl-40-4> 4</a>
</span><span class=lnt id=hl-40-5><a class=lnlinks href=#hl-40-5> 5</a>
</span><span class=lnt id=hl-40-6><a class=lnlinks href=#hl-40-6> 6</a>
</span><span class=lnt id=hl-40-7><a class=lnlinks href=#hl-40-7> 7</a>
</span><span class=lnt id=hl-40-8><a class=lnlinks href=#hl-40-8> 8</a>
</span><span class=lnt id=hl-40-9><a class=lnlinks href=#hl-40-9> 9</a>
</span><span class=lnt id=hl-40-10><a class=lnlinks href=#hl-40-10>10</a>
</span><span class=lnt id=hl-40-11><a class=lnlinks href=#hl-40-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>In [94]: !head -n 10 datasets/babynames/yob1880.txt
</span></span><span class=line><span class=cl>Mary,F,7065
</span></span><span class=line><span class=cl>Anna,F,2604
</span></span><span class=line><span class=cl>Emma,F,2003
</span></span><span class=line><span class=cl>Elizabeth,F,1939
</span></span><span class=line><span class=cl>Minnie,F,1746
</span></span><span class=line><span class=cl>Margaret,F,1578
</span></span><span class=line><span class=cl>Ida,F,1472
</span></span><span class=line><span class=cl>Alice,F,1414
</span></span><span class=line><span class=cl>Bertha,F,1320
</span></span><span class=line><span class=cl>Sarah,F,1288</span></span></code></pre></td></tr></table></div></div><p>ç”±äºè¿™æ˜¯ä¸€ä¸ªéå¸¸æ ‡å‡†çš„ä»¥é€—å·éš”å¼€çš„æ ¼å¼ï¼Œæ‰€ä»¥å¯ä»¥ç”¨pandas.read_csvå°†å…¶åŠ è½½åˆ°DataFrameä¸­ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-41-1><a class=lnlinks href=#hl-41-1> 1</a>
</span><span class=lnt id=hl-41-2><a class=lnlinks href=#hl-41-2> 2</a>
</span><span class=lnt id=hl-41-3><a class=lnlinks href=#hl-41-3> 3</a>
</span><span class=lnt id=hl-41-4><a class=lnlinks href=#hl-41-4> 4</a>
</span><span class=lnt id=hl-41-5><a class=lnlinks href=#hl-41-5> 5</a>
</span><span class=lnt id=hl-41-6><a class=lnlinks href=#hl-41-6> 6</a>
</span><span class=lnt id=hl-41-7><a class=lnlinks href=#hl-41-7> 7</a>
</span><span class=lnt id=hl-41-8><a class=lnlinks href=#hl-41-8> 8</a>
</span><span class=lnt id=hl-41-9><a class=lnlinks href=#hl-41-9> 9</a>
</span><span class=lnt id=hl-41-10><a class=lnlinks href=#hl-41-10>10</a>
</span><span class=lnt id=hl-41-11><a class=lnlinks href=#hl-41-11>11</a>
</span><span class=lnt id=hl-41-12><a class=lnlinks href=#hl-41-12>12</a>
</span><span class=lnt id=hl-41-13><a class=lnlinks href=#hl-41-13>13</a>
</span><span class=lnt id=hl-41-14><a class=lnlinks href=#hl-41-14>14</a>
</span><span class=lnt id=hl-41-15><a class=lnlinks href=#hl-41-15>15</a>
</span><span class=lnt id=hl-41-16><a class=lnlinks href=#hl-41-16>16</a>
</span><span class=lnt id=hl-41-17><a class=lnlinks href=#hl-41-17>17</a>
</span><span class=lnt id=hl-41-18><a class=lnlinks href=#hl-41-18>18</a>
</span><span class=lnt id=hl-41-19><a class=lnlinks href=#hl-41-19>19</a>
</span><span class=lnt id=hl-41-20><a class=lnlinks href=#hl-41-20>20</a>
</span><span class=lnt id=hl-41-21><a class=lnlinks href=#hl-41-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>95</span><span class=p>]:</span> <span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>96</span><span class=p>]:</span> <span class=n>names1880</span> <span class=o>=</span>
</span></span><span class=line><span class=cl><span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s1>&#39;datasets/babynames/yob1880.txt&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>....</span><span class=p>:</span>                         <span class=n>names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;sex&#39;</span><span class=p>,</span> <span class=s1>&#39;births&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>97</span><span class=p>]:</span> <span class=n>names1880</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>97</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>           <span class=n>name</span> <span class=n>sex</span>  <span class=n>births</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>          <span class=n>Mary</span>   <span class=n>F</span>    <span class=mi>7065</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>          <span class=n>Anna</span>   <span class=n>F</span>    <span class=mi>2604</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>          <span class=n>Emma</span>   <span class=n>F</span>    <span class=mi>2003</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>     <span class=n>Elizabeth</span>   <span class=n>F</span>    <span class=mi>1939</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>        <span class=n>Minnie</span>   <span class=n>F</span>    <span class=mi>1746</span>
</span></span><span class=line><span class=cl><span class=o>...</span>         <span class=o>...</span>  <span class=o>..</span>     <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=mi>1995</span>     <span class=n>Woodie</span>   <span class=n>M</span>       <span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=mi>1996</span>     <span class=n>Worthy</span>   <span class=n>M</span>       <span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=mi>1997</span>     <span class=n>Wright</span>   <span class=n>M</span>       <span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=mi>1998</span>       <span class=n>York</span>   <span class=n>M</span>       <span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=mi>1999</span>  <span class=n>Zachariah</span>   <span class=n>M</span>       <span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>2000</span> <span class=n>rows</span> <span class=n>x</span> <span class=mi>3</span> <span class=n>columns</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>è¿™äº›æ–‡ä»¶ä¸­ä»…å«æœ‰å½“å¹´å‡ºç°è¶…è¿‡5æ¬¡çš„åå­—ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨birthsåˆ—çš„sexåˆ†ç»„å°è®¡è¡¨ç¤ºè¯¥å¹´åº¦çš„birthsæ€»è®¡ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-42-1><a class=lnlinks href=#hl-42-1>1</a>
</span><span class=lnt id=hl-42-2><a class=lnlinks href=#hl-42-2>2</a>
</span><span class=lnt id=hl-42-3><a class=lnlinks href=#hl-42-3>3</a>
</span><span class=lnt id=hl-42-4><a class=lnlinks href=#hl-42-4>4</a>
</span><span class=lnt id=hl-42-5><a class=lnlinks href=#hl-42-5>5</a>
</span><span class=lnt id=hl-42-6><a class=lnlinks href=#hl-42-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>98</span><span class=p>]:</span> <span class=n>names1880</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;sex&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>births</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>98</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>sex</span>
</span></span><span class=line><span class=cl><span class=n>F</span>     <span class=mi>90993</span>
</span></span><span class=line><span class=cl><span class=n>M</span>    <span class=mi>110493</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>births</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>int64</span></span></span></code></pre></td></tr></table></div></div><p>ç”±äºè¯¥æ•°æ®é›†æŒ‰å¹´åº¦è¢«åˆ†éš”æˆäº†å¤šä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯è¦å°†æ‰€æœ‰æ•°æ®éƒ½ç»„è£…åˆ°ä¸€ä¸ªDataFrameé‡Œé¢ï¼Œå¹¶åŠ ä¸Šä¸€ä¸ªyearå­—æ®µã€‚ä½¿ç”¨pandas.concatå³å¯è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-43-1><a class=lnlinks href=#hl-43-1> 1</a>
</span><span class=lnt id=hl-43-2><a class=lnlinks href=#hl-43-2> 2</a>
</span><span class=lnt id=hl-43-3><a class=lnlinks href=#hl-43-3> 3</a>
</span><span class=lnt id=hl-43-4><a class=lnlinks href=#hl-43-4> 4</a>
</span><span class=lnt id=hl-43-5><a class=lnlinks href=#hl-43-5> 5</a>
</span><span class=lnt id=hl-43-6><a class=lnlinks href=#hl-43-6> 6</a>
</span><span class=lnt id=hl-43-7><a class=lnlinks href=#hl-43-7> 7</a>
</span><span class=lnt id=hl-43-8><a class=lnlinks href=#hl-43-8> 8</a>
</span><span class=lnt id=hl-43-9><a class=lnlinks href=#hl-43-9> 9</a>
</span><span class=lnt id=hl-43-10><a class=lnlinks href=#hl-43-10>10</a>
</span><span class=lnt id=hl-43-11><a class=lnlinks href=#hl-43-11>11</a>
</span><span class=lnt id=hl-43-12><a class=lnlinks href=#hl-43-12>12</a>
</span><span class=lnt id=hl-43-13><a class=lnlinks href=#hl-43-13>13</a>
</span><span class=lnt id=hl-43-14><a class=lnlinks href=#hl-43-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>years</span> <span class=o>=</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1880</span><span class=p>,</span> <span class=mi>2011</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>pieces</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=n>columns</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;sex&#39;</span><span class=p>,</span> <span class=s1>&#39;births&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>year</span> <span class=ow>in</span> <span class=n>years</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>path</span> <span class=o>=</span> <span class=s1>&#39;datasets/babynames/yob</span><span class=si>%d</span><span class=s1>.txt&#39;</span> <span class=o>%</span> <span class=n>year</span>
</span></span><span class=line><span class=cl>    <span class=n>frame</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>names</span><span class=o>=</span><span class=n>columns</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>frame</span><span class=p>[</span><span class=s1>&#39;year&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>year</span>
</span></span><span class=line><span class=cl>    <span class=n>pieces</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>frame</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Concatenate everything into a single DataFrame</span>
</span></span><span class=line><span class=cl><span class=n>names</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>concat</span><span class=p>(</span><span class=n>pieces</span><span class=p>,</span> <span class=n>ignore_index</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>è¿™é‡Œéœ€è¦æ³¨æ„å‡ ä»¶äº‹æƒ…ã€‚ç¬¬ä¸€ï¼Œconcaté»˜è®¤æ˜¯æŒ‰è¡Œå°†å¤šä¸ªDataFrameç»„åˆåˆ°ä¸€èµ·çš„ï¼›ç¬¬äºŒï¼Œå¿…é¡»æŒ‡å®šignore_index=Trueï¼Œå› ä¸ºæˆ‘ä»¬ä¸å¸Œæœ›ä¿ç•™read_csvæ‰€è¿”å›çš„åŸå§‹è¡Œå·ã€‚ç°åœ¨æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªéå¸¸å¤§çš„DataFrameï¼Œå®ƒå«æœ‰å…¨éƒ¨çš„åå­—æ•°æ®ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-44-1><a class=lnlinks href=#hl-44-1> 1</a>
</span><span class=lnt id=hl-44-2><a class=lnlinks href=#hl-44-2> 2</a>
</span><span class=lnt id=hl-44-3><a class=lnlinks href=#hl-44-3> 3</a>
</span><span class=lnt id=hl-44-4><a class=lnlinks href=#hl-44-4> 4</a>
</span><span class=lnt id=hl-44-5><a class=lnlinks href=#hl-44-5> 5</a>
</span><span class=lnt id=hl-44-6><a class=lnlinks href=#hl-44-6> 6</a>
</span><span class=lnt id=hl-44-7><a class=lnlinks href=#hl-44-7> 7</a>
</span><span class=lnt id=hl-44-8><a class=lnlinks href=#hl-44-8> 8</a>
</span><span class=lnt id=hl-44-9><a class=lnlinks href=#hl-44-9> 9</a>
</span><span class=lnt id=hl-44-10><a class=lnlinks href=#hl-44-10>10</a>
</span><span class=lnt id=hl-44-11><a class=lnlinks href=#hl-44-11>11</a>
</span><span class=lnt id=hl-44-12><a class=lnlinks href=#hl-44-12>12</a>
</span><span class=lnt id=hl-44-13><a class=lnlinks href=#hl-44-13>13</a>
</span><span class=lnt id=hl-44-14><a class=lnlinks href=#hl-44-14>14</a>
</span><span class=lnt id=hl-44-15><a class=lnlinks href=#hl-44-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>100</span><span class=p>]:</span> <span class=n>names</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>100</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>              <span class=n>name</span> <span class=n>sex</span>  <span class=n>births</span>  <span class=n>year</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>             <span class=n>Mary</span>   <span class=n>F</span>    <span class=mi>7065</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>             <span class=n>Anna</span>   <span class=n>F</span>    <span class=mi>2604</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>             <span class=n>Emma</span>   <span class=n>F</span>    <span class=mi>2003</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>        <span class=n>Elizabeth</span>   <span class=n>F</span>    <span class=mi>1939</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>           <span class=n>Minnie</span>   <span class=n>F</span>    <span class=mi>1746</span>  <span class=mi>1880</span>
</span></span><span class=line><span class=cl><span class=o>...</span>            <span class=o>...</span>  <span class=o>..</span>     <span class=o>...</span>   <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=mi>1690779</span>    <span class=n>Zymaire</span>   <span class=n>M</span>       <span class=mi>5</span>  <span class=mi>2010</span>
</span></span><span class=line><span class=cl><span class=mi>1690780</span>     <span class=n>Zyonne</span>   <span class=n>M</span>       <span class=mi>5</span>  <span class=mi>2010</span>
</span></span><span class=line><span class=cl><span class=mi>1690781</span>  <span class=n>Zyquarius</span>   <span class=n>M</span>       <span class=mi>5</span>  <span class=mi>2010</span>
</span></span><span class=line><span class=cl><span class=mi>1690782</span>      <span class=n>Zyran</span>   <span class=n>M</span>       <span class=mi>5</span>  <span class=mi>2010</span>
</span></span><span class=line><span class=cl><span class=mi>1690783</span>      <span class=n>Zzyzx</span>   <span class=n>M</span>       <span class=mi>5</span>  <span class=mi>2010</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>1690784</span> <span class=n>rows</span> <span class=n>x</span> <span class=mi>4</span> <span class=n>columns</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>æœ‰äº†è¿™äº›æ•°æ®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨groupbyæˆ–pivot_tableåœ¨yearå’Œsexçº§åˆ«ä¸Šå¯¹å…¶è¿›è¡Œèšåˆäº†ï¼Œå¦‚å›¾14-4æ‰€ç¤ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-45-1><a class=lnlinks href=#hl-45-1> 1</a>
</span><span class=lnt id=hl-45-2><a class=lnlinks href=#hl-45-2> 2</a>
</span><span class=lnt id=hl-45-3><a class=lnlinks href=#hl-45-3> 3</a>
</span><span class=lnt id=hl-45-4><a class=lnlinks href=#hl-45-4> 4</a>
</span><span class=lnt id=hl-45-5><a class=lnlinks href=#hl-45-5> 5</a>
</span><span class=lnt id=hl-45-6><a class=lnlinks href=#hl-45-6> 6</a>
</span><span class=lnt id=hl-45-7><a class=lnlinks href=#hl-45-7> 7</a>
</span><span class=lnt id=hl-45-8><a class=lnlinks href=#hl-45-8> 8</a>
</span><span class=lnt id=hl-45-9><a class=lnlinks href=#hl-45-9> 9</a>
</span><span class=lnt id=hl-45-10><a class=lnlinks href=#hl-45-10>10</a>
</span><span class=lnt id=hl-45-11><a class=lnlinks href=#hl-45-11>11</a>
</span><span class=lnt id=hl-45-12><a class=lnlinks href=#hl-45-12>12</a>
</span><span class=lnt id=hl-45-13><a class=lnlinks href=#hl-45-13>13</a>
</span><span class=lnt id=hl-45-14><a class=lnlinks href=#hl-45-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>101</span><span class=p>]:</span> <span class=n>total_births</span> <span class=o>=</span> <span class=n>names</span><span class=o>.</span><span class=n>pivot_table</span><span class=p>(</span><span class=s1>&#39;births&#39;</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=s1>&#39;year&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>.....</span><span class=p>:</span>                                  <span class=n>columns</span><span class=o>=</span><span class=s1>&#39;sex&#39;</span><span class=p>,</span> <span class=n>aggfunc</span><span class=o>=</span><span class=nb>sum</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>102</span><span class=p>]:</span> <span class=n>total_births</span><span class=o>.</span><span class=n>tail</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>102</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>sex</span>         <span class=n>F</span>        <span class=n>M</span>
</span></span><span class=line><span class=cl><span class=n>year</span>                  
</span></span><span class=line><span class=cl><span class=mi>2006</span>  <span class=mi>1896468</span>  <span class=mi>2050234</span>
</span></span><span class=line><span class=cl><span class=mi>2007</span>  <span class=mi>1916888</span>  <span class=mi>2069242</span>
</span></span><span class=line><span class=cl><span class=mi>2008</span>  <span class=mi>1883645</span>  <span class=mi>2032310</span>
</span></span><span class=line><span class=cl><span class=mi>2009</span>  <span class=mi>1827643</span>  <span class=mi>1973359</span>
</span></span><span class=line><span class=cl><span class=mi>2010</span>  <span class=mi>1759010</span>  <span class=mi>1898382</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>103</span><span class=p>]:</span> <span class=n>total_births</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s1>&#39;Total births by sex and year&#39;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://gitee.com/wugenqiang/images/raw/master/02/1240-20201031180243650.png alt="å›¾14-4 æŒ‰æ€§åˆ«å’Œå¹´åº¦ç»Ÿè®¡çš„æ€»å‡ºç”Ÿæ•°"></p><p>ä¸‹é¢æˆ‘ä»¬æ¥æ’å…¥ä¸€ä¸ªpropåˆ—ï¼Œç”¨äºå­˜æ”¾æŒ‡å®šåå­—çš„å©´å„¿æ•°ç›¸å¯¹äºæ€»å‡ºç”Ÿæ•°çš„æ¯”ä¾‹ã€‚propå€¼ä¸º0.02è¡¨ç¤ºæ¯100åå©´å„¿ä¸­æœ‰2åå–äº†å½“å‰è¿™ä¸ªåå­—ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å…ˆæŒ‰yearå’Œsexåˆ†ç»„ï¼Œç„¶åå†å°†æ–°åˆ—åŠ åˆ°å„ä¸ªåˆ†ç»„ä¸Šï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-46-1><a class=lnlinks href=#hl-46-1>1</a>
</span><span class=lnt id=hl-46-2><a class=lnlinks href=#hl-46-2>2</a>
</span><span class=lnt id=hl-46-3><a class=lnlinks href=#hl-46-3>3</a>
</span><span class=lnt id=hl-46-4><a class=lnlinks href=#hl-46-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>add_prop</span><span class=p>(</span><span class=n>group</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>group</span><span class=p>[</span><span class=s1>&#39;prop&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>group</span><span class=o>.</span><span class=n>births</span> <span class=o>/</span> <span class=n>group</span><span class=o>.</span><span class=n>births</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>group</span>
</span></span><span class=line><span class=cl><span class=n>names</span> <span class=o>=</span> <span class=n>names</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;year&#39;</span><span class=p>,</span> <span class=s1>&#39;sex&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>add_prop</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨ï¼Œå®Œæ•´çš„æ•°æ®é›†å°±æœ‰äº†ä¸‹é¢è¿™äº›åˆ—ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-47-1><a class=lnlinks href=#hl-47-1> 1</a>
</span><span class=lnt id=hl-47-2><a class=lnlinks href=#hl-47-2> 2</a>
</span><span class=lnt id=hl-47-3><a class=lnlinks href=#hl-47-3> 3</a>
</span><span class=lnt id=hl-47-4><a class=lnlinks href=#hl-47-4> 4</a>
</span><span class=lnt id=hl-47-5><a class=lnlinks href=#hl-47-5> 5</a>
</span><span class=lnt id=hl-47-6><a class=lnlinks href=#hl-47-6> 6</a>
</span><span class=lnt id=hl-47-7><a class=lnlinks href=#hl-47-7> 7</a>
</span><span class=lnt id=hl-47-8><a class=lnlinks href=#hl-47-8> 8</a>
</span><span class=lnt id=hl-47-9><a class=lnlinks href=#hl-47-9> 9</a>
</span><span class=lnt id=hl-47-10><a class=lnlinks href=#hl-47-10>10</a>
</span><span class=lnt id=hl-47-11><a class=lnlinks href=#hl-47-11>11</a>
</span><span class=lnt id=hl-47-12><a class=lnlinks href=#hl-47-12>12</a>
</span><span class=lnt id=hl-47-13><a class=lnlinks href=#hl-47-13>13</a>
</span><span class=lnt id=hl-47-14><a class=lnlinks href=#hl-47-14>14</a>
</span><span class=lnt id=hl-47-15><a class=lnlinks href=#hl-47-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>105</span><span class=p>]:</span> <span class=n>names</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>105</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>              <span class=n>name</span> <span class=n>sex</span>  <span class=n>births</span>  <span class=n>year</span>      <span class=n>prop</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>             <span class=n>Mary</span>   <span class=n>F</span>    <span class=mi>7065</span>  <span class=mi>1880</span>  <span class=mf>0.077643</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>             <span class=n>Anna</span>   <span class=n>F</span>    <span class=mi>2604</span>  <span class=mi>1880</span>  <span class=mf>0.028618</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>             <span class=n>Emma</span>   <span class=n>F</span>    <span class=mi>2003</span>  <span class=mi>1880</span>  <span class=mf>0.022013</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>        <span class=n>Elizabeth</span>   <span class=n>F</span>    <span class=mi>1939</span>  <span class=mi>1880</span>  <span class=mf>0.021309</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>           <span class=n>Minnie</span>   <span class=n>F</span>    <span class=mi>1746</span>  <span class=mi>1880</span>  <span class=mf>0.019188</span>
</span></span><span class=line><span class=cl><span class=o>...</span>            <span class=o>...</span>  <span class=o>..</span>     <span class=o>...</span>   <span class=o>...</span>       <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=mi>1690779</span>    <span class=n>Zymaire</span>   <span class=n>M</span>       <span class=mi>5</span>  <span class=mi>2010</span>  <span class=mf>0.000003</span>
</span></span><span class=line><span class=cl><span class=mi>1690780</span>     <span class=n>Zyonne</span>   <span class=n>M</span>       <span class=mi>5</span>  <span class=mi>2010</span>  <span class=mf>0.000003</span>
</span></span><span class=line><span class=cl><span class=mi>1690781</span>  <span class=n>Zyquarius</span>   <span class=n>M</span>       <span class=mi>5</span>  <span class=mi>2010</span>  <span class=mf>0.000003</span>
</span></span><span class=line><span class=cl><span class=mi>1690782</span>      <span class=n>Zyran</span>   <span class=n>M</span>       <span class=mi>5</span>  <span class=mi>2010</span>  <span class=mf>0.000003</span>
</span></span><span class=line><span class=cl><span class=mi>1690783</span>      <span class=n>Zzyzx</span>   <span class=n>M</span>       <span class=mi>5</span>  <span class=mi>2010</span>  <span class=mf>0.000003</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>1690784</span> <span class=n>rows</span> <span class=n>x</span> <span class=mi>5</span> <span class=n>columns</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>åœ¨æ‰§è¡Œè¿™æ ·çš„åˆ†ç»„å¤„ç†æ—¶ï¼Œä¸€èˆ¬éƒ½åº”è¯¥åšä¸€äº›æœ‰æ•ˆæ€§æ£€æŸ¥ï¼Œæ¯”å¦‚éªŒè¯æ‰€æœ‰åˆ†ç»„çš„propçš„æ€»å’Œæ˜¯å¦ä¸º1ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-48-1><a class=lnlinks href=#hl-48-1> 1</a>
</span><span class=lnt id=hl-48-2><a class=lnlinks href=#hl-48-2> 2</a>
</span><span class=lnt id=hl-48-3><a class=lnlinks href=#hl-48-3> 3</a>
</span><span class=lnt id=hl-48-4><a class=lnlinks href=#hl-48-4> 4</a>
</span><span class=lnt id=hl-48-5><a class=lnlinks href=#hl-48-5> 5</a>
</span><span class=lnt id=hl-48-6><a class=lnlinks href=#hl-48-6> 6</a>
</span><span class=lnt id=hl-48-7><a class=lnlinks href=#hl-48-7> 7</a>
</span><span class=lnt id=hl-48-8><a class=lnlinks href=#hl-48-8> 8</a>
</span><span class=lnt id=hl-48-9><a class=lnlinks href=#hl-48-9> 9</a>
</span><span class=lnt id=hl-48-10><a class=lnlinks href=#hl-48-10>10</a>
</span><span class=lnt id=hl-48-11><a class=lnlinks href=#hl-48-11>11</a>
</span><span class=lnt id=hl-48-12><a class=lnlinks href=#hl-48-12>12</a>
</span><span class=lnt id=hl-48-13><a class=lnlinks href=#hl-48-13>13</a>
</span><span class=lnt id=hl-48-14><a class=lnlinks href=#hl-48-14>14</a>
</span><span class=lnt id=hl-48-15><a class=lnlinks href=#hl-48-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>106</span><span class=p>]:</span> <span class=n>names</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;year&#39;</span><span class=p>,</span> <span class=s1>&#39;sex&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>prop</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>106</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>year</span>  <span class=n>sex</span>
</span></span><span class=line><span class=cl><span class=mi>1880</span>  <span class=n>F</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl>      <span class=n>M</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=mi>1881</span>  <span class=n>F</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl>      <span class=n>M</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=mi>1882</span>  <span class=n>F</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl>            <span class=o>...</span> 
</span></span><span class=line><span class=cl><span class=mi>2008</span>  <span class=n>M</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=mi>2009</span>  <span class=n>F</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl>      <span class=n>M</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=mi>2010</span>  <span class=n>F</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl>      <span class=n>M</span>      <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>prop</span><span class=p>,</span> <span class=n>Length</span><span class=p>:</span> <span class=mi>262</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>float64</span></span></span></code></pre></td></tr></table></div></div><p>å·¥ä½œå®Œæˆã€‚ä¸ºäº†ä¾¿äºå®ç°æ›´è¿›ä¸€æ­¥çš„åˆ†æï¼Œæˆ‘éœ€è¦å–å‡ºè¯¥æ•°æ®çš„ä¸€ä¸ªå­é›†ï¼šæ¯å¯¹sex/yearç»„åˆçš„å‰1000ä¸ªåå­—ã€‚è¿™åˆæ˜¯ä¸€ä¸ªåˆ†ç»„æ“ä½œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-49-1><a class=lnlinks href=#hl-49-1>1</a>
</span><span class=lnt id=hl-49-2><a class=lnlinks href=#hl-49-2>2</a>
</span><span class=lnt id=hl-49-3><a class=lnlinks href=#hl-49-3>3</a>
</span><span class=lnt id=hl-49-4><a class=lnlinks href=#hl-49-4>4</a>
</span><span class=lnt id=hl-49-5><a class=lnlinks href=#hl-49-5>5</a>
</span><span class=lnt id=hl-49-6><a class=lnlinks href=#hl-49-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_top1000</span><span class=p>(</span><span class=n>group</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>group</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=n>by</span><span class=o>=</span><span class=s1>&#39;births&#39;</span><span class=p>,</span> <span class=n>ascending</span><span class=o>=</span><span class=kc>False</span><span class=p>)[:</span><span class=mi>1000</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>grouped</span> <span class=o>=</span> <span class=n>names</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;year&#39;</span><span class=p>,</span> <span class=s1>&#39;sex&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>top1000</span> <span class=o>=</span> <span class=n>grouped</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>get_top1000</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># Drop the group index, not needed</span>
</span></span><span class=line><span class=cl><span class=n>top1000</span><span class=o>.</span><span class=n>reset_index</span><span class=p>(</span><span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>drop</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä½ å–œæ¬¢DIYçš„è¯ï¼Œä¹Ÿå¯ä»¥è¿™æ ·ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-50-1><a class=lnlinks href=#hl-50-1>1</a>
</span><span class=lnt id=hl-50-2><a class=lnlinks href=#hl-50-2>2</a>
</span><span class=lnt id=hl-50-3><a class=lnlinks href=#hl-50-3>3</a>
</span><span class=lnt id=hl-50-4><a class=lnlinks href=#hl-50-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>pieces</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>year</span><span class=p>,</span> <span class=n>group</span> <span class=ow>in</span> <span class=n>names</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;year&#39;</span><span class=p>,</span> <span class=s1>&#39;sex&#39;</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>    <span class=n>pieces</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>group</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=n>by</span><span class=o>=</span><span class=s1>&#39;births&#39;</span><span class=p>,</span> <span class=n>ascending</span><span class=o>=</span><span class=kc>False</span><span class=p>)[:</span><span class=mi>1000</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>top1000</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>concat</span><span class=p>(</span><span class=n>pieces</span><span class=p>,</span> <span class=n>ignore_index</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨çš„ç»“æœæ•°æ®é›†å°±å°å¤šäº†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-51-1><a class=lnlinks href=#hl-51-1> 1</a>
</span><span class=lnt id=hl-51-2><a class=lnlinks href=#hl-51-2> 2</a>
</span><span class=lnt id=hl-51-3><a class=lnlinks href=#hl-51-3> 3</a>
</span><span class=lnt id=hl-51-4><a class=lnlinks href=#hl-51-4> 4</a>
</span><span class=lnt id=hl-51-5><a class=lnlinks href=#hl-51-5> 5</a>
</span><span class=lnt id=hl-51-6><a class=lnlinks href=#hl-51-6> 6</a>
</span><span class=lnt id=hl-51-7><a class=lnlinks href=#hl-51-7> 7</a>
</span><span class=lnt id=hl-51-8><a class=lnlinks href=#hl-51-8> 8</a>
</span><span class=lnt id=hl-51-9><a class=lnlinks href=#hl-51-9> 9</a>
</span><span class=lnt id=hl-51-10><a class=lnlinks href=#hl-51-10>10</a>
</span><span class=lnt id=hl-51-11><a class=lnlinks href=#hl-51-11>11</a>
</span><span class=lnt id=hl-51-12><a class=lnlinks href=#hl-51-12>12</a>
</span><span class=lnt id=hl-51-13><a class=lnlinks href=#hl-51-13>13</a>
</span><span class=lnt id=hl-51-14><a class=lnlinks href=#hl-51-14>14</a>
</span><span class=lnt id=hl-51-15><a class=lnlinks href=#hl-51-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>108</span><span class=p>]:</span> <span class=n>top1000</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>108</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>             <span class=n>name</span> <span class=n>sex</span>  <span class=n>births</span>  <span class=n>year</span>      <span class=n>prop</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>            <span class=n>Mary</span>   <span class=n>F</span>    <span class=mi>7065</span>  <span class=mi>1880</span>  <span class=mf>0.077643</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>            <span class=n>Anna</span>   <span class=n>F</span>    <span class=mi>2604</span>  <span class=mi>1880</span>  <span class=mf>0.028618</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>            <span class=n>Emma</span>   <span class=n>F</span>    <span class=mi>2003</span>  <span class=mi>1880</span>  <span class=mf>0.022013</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>       <span class=n>Elizabeth</span>   <span class=n>F</span>    <span class=mi>1939</span>  <span class=mi>1880</span>  <span class=mf>0.021309</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>          <span class=n>Minnie</span>   <span class=n>F</span>    <span class=mi>1746</span>  <span class=mi>1880</span>  <span class=mf>0.019188</span>
</span></span><span class=line><span class=cl><span class=o>...</span>           <span class=o>...</span>  <span class=o>..</span>     <span class=o>...</span>   <span class=o>...</span>       <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=mi>261872</span>     <span class=n>Camilo</span>   <span class=n>M</span>     <span class=mi>194</span>  <span class=mi>2010</span>  <span class=mf>0.000102</span>
</span></span><span class=line><span class=cl><span class=mi>261873</span>     <span class=n>Destin</span>   <span class=n>M</span>     <span class=mi>194</span>  <span class=mi>2010</span>  <span class=mf>0.000102</span>
</span></span><span class=line><span class=cl><span class=mi>261874</span>     <span class=n>Jaquan</span>   <span class=n>M</span>     <span class=mi>194</span>  <span class=mi>2010</span>  <span class=mf>0.000102</span>
</span></span><span class=line><span class=cl><span class=mi>261875</span>     <span class=n>Jaydan</span>   <span class=n>M</span>     <span class=mi>194</span>  <span class=mi>2010</span>  <span class=mf>0.000102</span>
</span></span><span class=line><span class=cl><span class=mi>261876</span>     <span class=n>Maxton</span>   <span class=n>M</span>     <span class=mi>193</span>  <span class=mi>2010</span>  <span class=mf>0.000102</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>261877</span> <span class=n>rows</span> <span class=n>x</span> <span class=mi>5</span> <span class=n>columns</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>æ¥ä¸‹æ¥çš„æ•°æ®åˆ†æå·¥ä½œå°±é’ˆå¯¹è¿™ä¸ªtop1000æ•°æ®é›†äº†ã€‚</p><h3 id=1431-åˆ†æå‘½åè¶‹åŠ¿>14.3.1 åˆ†æå‘½åè¶‹åŠ¿
<a class=header-anchor href=#1431-%e5%88%86%e6%9e%90%e5%91%bd%e5%90%8d%e8%b6%8b%e5%8a%bf></a></h3><p>æœ‰äº†å®Œæ•´çš„æ•°æ®é›†å’Œåˆšæ‰ç”Ÿæˆçš„top1000æ•°æ®é›†ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹åˆ†æå„ç§å‘½åè¶‹åŠ¿äº†ã€‚é¦–å…ˆå°†å‰1000ä¸ªåå­—åˆ†ä¸ºç”·å¥³ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-52-1><a class=lnlinks href=#hl-52-1>1</a>
</span><span class=lnt id=hl-52-2><a class=lnlinks href=#hl-52-2>2</a>
</span><span class=lnt id=hl-52-3><a class=lnlinks href=#hl-52-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>109</span><span class=p>]:</span> <span class=n>boys</span> <span class=o>=</span> <span class=n>top1000</span><span class=p>[</span><span class=n>top1000</span><span class=o>.</span><span class=n>sex</span> <span class=o>==</span> <span class=s1>&#39;M&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>110</span><span class=p>]:</span> <span class=n>girls</span> <span class=o>=</span> <span class=n>top1000</span><span class=p>[</span><span class=n>top1000</span><span class=o>.</span><span class=n>sex</span> <span class=o>==</span> <span class=s1>&#39;F&#39;</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>è¿™æ˜¯ä¸¤ä¸ªç®€å•çš„æ—¶é—´åºåˆ—ï¼Œåªéœ€ç¨ä½œæ•´ç†å³å¯ç»˜åˆ¶å‡ºç›¸åº”çš„å›¾è¡¨ï¼ˆæ¯”å¦‚æ¯å¹´å«åšJohnå’ŒMaryçš„å©´å„¿æ•°ï¼‰ã€‚æˆ‘ä»¬å…ˆç”Ÿæˆä¸€å¼ æŒ‰yearå’Œnameç»Ÿè®¡çš„æ€»å‡ºç”Ÿæ•°é€è§†è¡¨ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-53-1><a class=lnlinks href=#hl-53-1>1</a>
</span><span class=lnt id=hl-53-2><a class=lnlinks href=#hl-53-2>2</a>
</span><span class=lnt id=hl-53-3><a class=lnlinks href=#hl-53-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>111</span><span class=p>]:</span> <span class=n>total_births</span> <span class=o>=</span> <span class=n>top1000</span><span class=o>.</span><span class=n>pivot_table</span><span class=p>(</span><span class=s1>&#39;births&#39;</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=s1>&#39;year&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>.....</span><span class=p>:</span>                                    <span class=n>columns</span><span class=o>=</span><span class=s1>&#39;name&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>.....</span><span class=p>:</span>                                    <span class=n>aggfunc</span><span class=o>=</span><span class=nb>sum</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨ï¼Œæˆ‘ä»¬ç”¨DataFrameçš„plotæ–¹æ³•ç»˜åˆ¶å‡ ä¸ªåå­—çš„æ›²çº¿å›¾ï¼ˆè§å›¾14-5ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-54-1><a class=lnlinks href=#hl-54-1> 1</a>
</span><span class=lnt id=hl-54-2><a class=lnlinks href=#hl-54-2> 2</a>
</span><span class=lnt id=hl-54-3><a class=lnlinks href=#hl-54-3> 3</a>
</span><span class=lnt id=hl-54-4><a class=lnlinks href=#hl-54-4> 4</a>
</span><span class=lnt id=hl-54-5><a class=lnlinks href=#hl-54-5> 5</a>
</span><span class=lnt id=hl-54-6><a class=lnlinks href=#hl-54-6> 6</a>
</span><span class=lnt id=hl-54-7><a class=lnlinks href=#hl-54-7> 7</a>
</span><span class=lnt id=hl-54-8><a class=lnlinks href=#hl-54-8> 8</a>
</span><span class=lnt id=hl-54-9><a class=lnlinks href=#hl-54-9> 9</a>
</span><span class=lnt id=hl-54-10><a class=lnlinks href=#hl-54-10>10</a>
</span><span class=lnt id=hl-54-11><a class=lnlinks href=#hl-54-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>112</span><span class=p>]:</span> <span class=n>total_births</span><span class=o>.</span><span class=n>info</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=k>class</span> <span class=err>&#39;</span><span class=nc>pandas</span><span class=o>.</span><span class=n>core</span><span class=o>.</span><span class=n>frame</span><span class=o>.</span><span class=n>DataFrame</span><span class=s1>&#39;&gt;</span>
</span></span><span class=line><span class=cl><span class=n>Int64Index</span><span class=p>:</span> <span class=mi>131</span> <span class=n>entries</span><span class=p>,</span> <span class=mi>1880</span> <span class=n>to</span> <span class=mi>2010</span>
</span></span><span class=line><span class=cl><span class=n>Columns</span><span class=p>:</span> <span class=mi>6868</span> <span class=n>entries</span><span class=p>,</span> <span class=n>Aaden</span> <span class=n>to</span> <span class=n>Zuri</span>
</span></span><span class=line><span class=cl><span class=n>dtypes</span><span class=p>:</span> <span class=n>float64</span><span class=p>(</span><span class=mi>6868</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>memory</span> <span class=n>usage</span><span class=p>:</span> <span class=mf>6.9</span> <span class=n>MB</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>113</span><span class=p>]:</span> <span class=n>subset</span> <span class=o>=</span> <span class=n>total_births</span><span class=p>[[</span><span class=s1>&#39;John&#39;</span><span class=p>,</span> <span class=s1>&#39;Harry&#39;</span><span class=p>,</span> <span class=s1>&#39;Mary&#39;</span><span class=p>,</span> <span class=s1>&#39;Marilyn&#39;</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>114</span><span class=p>]:</span> <span class=n>subset</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>subplots</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>12</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span> <span class=n>grid</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>.....</span><span class=p>:</span>             <span class=n>title</span><span class=o>=</span><span class=s2>&#34;Number of births per year&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://gitee.com/wugenqiang/images/raw/master/02/1240-20201031180302658.png alt="å›¾14-5 å‡ ä¸ªç”·å­©å’Œå¥³å­©åå­—éšæ—¶é—´å˜åŒ–çš„ä½¿ç”¨æ•°é‡"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œè¿™å‡ ä¸ªåå­—åœ¨ç¾å›½äººæ°‘çš„å¿ƒç›®ä¸­å·²ç»é£å…‰ä¸å†äº†ã€‚ä½†äº‹å®å¹¶éå¦‚æ­¤ç®€å•ï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€èŠ‚ä¸­å°±èƒ½çŸ¥é“æ˜¯æ€ä¹ˆä¸€å›äº‹äº†ã€‚</p><h3 id=1432-è¯„ä¼°å‘½åå¤šæ ·æ€§çš„å¢é•¿>14.3.2 è¯„ä¼°å‘½åå¤šæ ·æ€§çš„å¢é•¿
<a class=header-anchor href=#1432-%e8%af%84%e4%bc%b0%e5%91%bd%e5%90%8d%e5%a4%9a%e6%a0%b7%e6%80%a7%e7%9a%84%e5%a2%9e%e9%95%bf></a></h3><p>ä¸€ç§è§£é‡Šæ˜¯çˆ¶æ¯æ„¿æ„ç»™å°å­©èµ·å¸¸è§çš„åå­—è¶Šæ¥è¶Šå°‘ã€‚è¿™ä¸ªå‡è®¾å¯ä»¥ä»æ•°æ®ä¸­å¾—åˆ°éªŒè¯ã€‚ä¸€ä¸ªåŠæ³•æ˜¯è®¡ç®—æœ€æµè¡Œçš„1000ä¸ªåå­—æ‰€å çš„æ¯”ä¾‹ï¼Œæˆ‘æŒ‰yearå’Œsexè¿›è¡Œèšåˆå¹¶ç»˜å›¾ï¼ˆè§å›¾14-6ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-55-1><a class=lnlinks href=#hl-55-1>1</a>
</span><span class=lnt id=hl-55-2><a class=lnlinks href=#hl-55-2>2</a>
</span><span class=lnt id=hl-55-3><a class=lnlinks href=#hl-55-3>3</a>
</span><span class=lnt id=hl-55-4><a class=lnlinks href=#hl-55-4>4</a>
</span><span class=lnt id=hl-55-5><a class=lnlinks href=#hl-55-5>5</a>
</span><span class=lnt id=hl-55-6><a class=lnlinks href=#hl-55-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>116</span><span class=p>]:</span> <span class=n>table</span> <span class=o>=</span> <span class=n>top1000</span><span class=o>.</span><span class=n>pivot_table</span><span class=p>(</span><span class=s1>&#39;prop&#39;</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=s1>&#39;year&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>.....</span><span class=p>:</span>                             <span class=n>columns</span><span class=o>=</span><span class=s1>&#39;sex&#39;</span><span class=p>,</span> <span class=n>aggfunc</span><span class=o>=</span><span class=nb>sum</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>117</span><span class=p>]:</span> <span class=n>table</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s1>&#39;Sum of table1000.prop by year and sex&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>.....</span><span class=p>:</span>            <span class=n>yticks</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>linspace</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mf>1.2</span><span class=p>,</span> <span class=mi>13</span><span class=p>),</span> <span class=n>xticks</span><span class=o>=</span><span class=nb>range</span><span class=p>(</span><span class=mi>1880</span><span class=p>,</span> <span class=mi>2020</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://gitee.com/wugenqiang/images/raw/master/02/1240-20201031180317016.png alt="å›¾14-6 åˆ†æ€§åˆ«ç»Ÿè®¡çš„å‰1000ä¸ªåå­—åœ¨æ€»å‡ºç”Ÿäººæ•°ä¸­çš„æ¯”ä¾‹"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œåå­—çš„å¤šæ ·æ€§ç¡®å®å‡ºç°äº†å¢é•¿ï¼ˆå‰1000é¡¹çš„æ¯”ä¾‹é™ä½ï¼‰ã€‚å¦ä¸€ä¸ªåŠæ³•æ˜¯è®¡ç®—å æ€»å‡ºç”Ÿäººæ•°å‰50%çš„ä¸åŒåå­—çš„æ•°é‡ï¼Œè¿™ä¸ªæ•°å­—ä¸å¤ªå¥½è®¡ç®—ã€‚æˆ‘ä»¬åªè€ƒè™‘2010å¹´ç”·å­©çš„åå­—ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-56-1><a class=lnlinks href=#hl-56-1> 1</a>
</span><span class=lnt id=hl-56-2><a class=lnlinks href=#hl-56-2> 2</a>
</span><span class=lnt id=hl-56-3><a class=lnlinks href=#hl-56-3> 3</a>
</span><span class=lnt id=hl-56-4><a class=lnlinks href=#hl-56-4> 4</a>
</span><span class=lnt id=hl-56-5><a class=lnlinks href=#hl-56-5> 5</a>
</span><span class=lnt id=hl-56-6><a class=lnlinks href=#hl-56-6> 6</a>
</span><span class=lnt id=hl-56-7><a class=lnlinks href=#hl-56-7> 7</a>
</span><span class=lnt id=hl-56-8><a class=lnlinks href=#hl-56-8> 8</a>
</span><span class=lnt id=hl-56-9><a class=lnlinks href=#hl-56-9> 9</a>
</span><span class=lnt id=hl-56-10><a class=lnlinks href=#hl-56-10>10</a>
</span><span class=lnt id=hl-56-11><a class=lnlinks href=#hl-56-11>11</a>
</span><span class=lnt id=hl-56-12><a class=lnlinks href=#hl-56-12>12</a>
</span><span class=lnt id=hl-56-13><a class=lnlinks href=#hl-56-13>13</a>
</span><span class=lnt id=hl-56-14><a class=lnlinks href=#hl-56-14>14</a>
</span><span class=lnt id=hl-56-15><a class=lnlinks href=#hl-56-15>15</a>
</span><span class=lnt id=hl-56-16><a class=lnlinks href=#hl-56-16>16</a>
</span><span class=lnt id=hl-56-17><a class=lnlinks href=#hl-56-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>118</span><span class=p>]:</span> <span class=n>df</span> <span class=o>=</span> <span class=n>boys</span><span class=p>[</span><span class=n>boys</span><span class=o>.</span><span class=n>year</span> <span class=o>==</span> <span class=mi>2010</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>119</span><span class=p>]:</span> <span class=n>df</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>119</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>           <span class=n>name</span> <span class=n>sex</span>  <span class=n>births</span>  <span class=n>year</span>      <span class=n>prop</span>
</span></span><span class=line><span class=cl><span class=mi>260877</span>    <span class=n>Jacob</span>   <span class=n>M</span>   <span class=mi>21875</span>  <span class=mi>2010</span>  <span class=mf>0.011523</span>
</span></span><span class=line><span class=cl><span class=mi>260878</span>    <span class=n>Ethan</span>   <span class=n>M</span>   <span class=mi>17866</span>  <span class=mi>2010</span>  <span class=mf>0.009411</span>
</span></span><span class=line><span class=cl><span class=mi>260879</span>  <span class=n>Michael</span>   <span class=n>M</span>   <span class=mi>17133</span>  <span class=mi>2010</span>  <span class=mf>0.009025</span>
</span></span><span class=line><span class=cl><span class=mi>260880</span>   <span class=n>Jayden</span>   <span class=n>M</span>   <span class=mi>17030</span>  <span class=mi>2010</span>  <span class=mf>0.008971</span>
</span></span><span class=line><span class=cl><span class=mi>260881</span>  <span class=n>William</span>   <span class=n>M</span>   <span class=mi>16870</span>  <span class=mi>2010</span>  <span class=mf>0.008887</span>
</span></span><span class=line><span class=cl><span class=o>...</span>         <span class=o>...</span>  <span class=o>..</span>     <span class=o>...</span>   <span class=o>...</span>       <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=mi>261872</span>   <span class=n>Camilo</span>   <span class=n>M</span>     <span class=mi>194</span>  <span class=mi>2010</span>  <span class=mf>0.000102</span>
</span></span><span class=line><span class=cl><span class=mi>261873</span>   <span class=n>Destin</span>   <span class=n>M</span>     <span class=mi>194</span>  <span class=mi>2010</span>  <span class=mf>0.000102</span>
</span></span><span class=line><span class=cl><span class=mi>261874</span>   <span class=n>Jaquan</span>   <span class=n>M</span>     <span class=mi>194</span>  <span class=mi>2010</span>  <span class=mf>0.000102</span>
</span></span><span class=line><span class=cl><span class=mi>261875</span>   <span class=n>Jaydan</span>   <span class=n>M</span>     <span class=mi>194</span>  <span class=mi>2010</span>  <span class=mf>0.000102</span>
</span></span><span class=line><span class=cl><span class=mi>261876</span>   <span class=n>Maxton</span>   <span class=n>M</span>     <span class=mi>193</span>  <span class=mi>2010</span>  <span class=mf>0.000102</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>1000</span> <span class=n>rows</span> <span class=n>x</span> <span class=mi>5</span> <span class=n>columns</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>åœ¨å¯¹propé™åºæ’åˆ—ä¹‹åï¼Œæˆ‘ä»¬æƒ³çŸ¥é“å‰é¢å¤šå°‘ä¸ªåå­—çš„äººæ•°åŠ èµ·æ¥æ‰å¤Ÿ50%ã€‚è™½ç„¶ç¼–å†™ä¸€ä¸ªforå¾ªç¯ç¡®å®ä¹Ÿèƒ½è¾¾åˆ°ç›®çš„ï¼Œä½†NumPyæœ‰ä¸€ç§æ›´èªæ˜çš„çŸ¢é‡æ–¹å¼ã€‚å…ˆè®¡ç®—propçš„ç´¯è®¡å’Œcumsumï¼Œç„¶åå†é€šè¿‡searchsortedæ–¹æ³•æ‰¾å‡º0.5åº”è¯¥è¢«æ’å…¥åœ¨å“ªä¸ªä½ç½®æ‰èƒ½ä¿è¯ä¸ç ´åé¡ºåºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-57-1><a class=lnlinks href=#hl-57-1> 1</a>
</span><span class=lnt id=hl-57-2><a class=lnlinks href=#hl-57-2> 2</a>
</span><span class=lnt id=hl-57-3><a class=lnlinks href=#hl-57-3> 3</a>
</span><span class=lnt id=hl-57-4><a class=lnlinks href=#hl-57-4> 4</a>
</span><span class=lnt id=hl-57-5><a class=lnlinks href=#hl-57-5> 5</a>
</span><span class=lnt id=hl-57-6><a class=lnlinks href=#hl-57-6> 6</a>
</span><span class=lnt id=hl-57-7><a class=lnlinks href=#hl-57-7> 7</a>
</span><span class=lnt id=hl-57-8><a class=lnlinks href=#hl-57-8> 8</a>
</span><span class=lnt id=hl-57-9><a class=lnlinks href=#hl-57-9> 9</a>
</span><span class=lnt id=hl-57-10><a class=lnlinks href=#hl-57-10>10</a>
</span><span class=lnt id=hl-57-11><a class=lnlinks href=#hl-57-11>11</a>
</span><span class=lnt id=hl-57-12><a class=lnlinks href=#hl-57-12>12</a>
</span><span class=lnt id=hl-57-13><a class=lnlinks href=#hl-57-13>13</a>
</span><span class=lnt id=hl-57-14><a class=lnlinks href=#hl-57-14>14</a>
</span><span class=lnt id=hl-57-15><a class=lnlinks href=#hl-57-15>15</a>
</span><span class=lnt id=hl-57-16><a class=lnlinks href=#hl-57-16>16</a>
</span><span class=lnt id=hl-57-17><a class=lnlinks href=#hl-57-17>17</a>
</span><span class=lnt id=hl-57-18><a class=lnlinks href=#hl-57-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>120</span><span class=p>]:</span> <span class=n>prop_cumsum</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=n>by</span><span class=o>=</span><span class=s1>&#39;prop&#39;</span><span class=p>,</span> <span class=n>ascending</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=o>.</span><span class=n>prop</span><span class=o>.</span><span class=n>cumsum</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>121</span><span class=p>]:</span> <span class=n>prop_cumsum</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>121</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=mi>260877</span>    <span class=mf>0.011523</span>
</span></span><span class=line><span class=cl><span class=mi>260878</span>    <span class=mf>0.020934</span>
</span></span><span class=line><span class=cl><span class=mi>260879</span>    <span class=mf>0.029959</span>
</span></span><span class=line><span class=cl><span class=mi>260880</span>    <span class=mf>0.038930</span>
</span></span><span class=line><span class=cl><span class=mi>260881</span>    <span class=mf>0.047817</span>
</span></span><span class=line><span class=cl><span class=mi>260882</span>    <span class=mf>0.056579</span>
</span></span><span class=line><span class=cl><span class=mi>260883</span>    <span class=mf>0.065155</span>
</span></span><span class=line><span class=cl><span class=mi>260884</span>    <span class=mf>0.073414</span>
</span></span><span class=line><span class=cl><span class=mi>260885</span>    <span class=mf>0.081528</span>
</span></span><span class=line><span class=cl><span class=mi>260886</span>    <span class=mf>0.089621</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>prop</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>float64</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>122</span><span class=p>]:</span> <span class=n>prop_cumsum</span><span class=o>.</span><span class=n>values</span><span class=o>.</span><span class=n>searchsorted</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>122</span><span class=p>]:</span> <span class=mi>116</span></span></span></code></pre></td></tr></table></div></div><p>ç”±äºæ•°ç»„ç´¢å¼•æ˜¯ä»0å¼€å§‹çš„ï¼Œå› æ­¤æˆ‘ä»¬è¦ç»™è¿™ä¸ªç»“æœåŠ 1ï¼Œå³æœ€ç»ˆç»“æœä¸º117ã€‚æ‹¿1900å¹´çš„æ•°æ®æ¥åšä¸ªæ¯”è¾ƒï¼Œè¿™ä¸ªæ•°å­—è¦å°å¾—å¤šï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-58-1><a class=lnlinks href=#hl-58-1>1</a>
</span><span class=lnt id=hl-58-2><a class=lnlinks href=#hl-58-2>2</a>
</span><span class=lnt id=hl-58-3><a class=lnlinks href=#hl-58-3>3</a>
</span><span class=lnt id=hl-58-4><a class=lnlinks href=#hl-58-4>4</a>
</span><span class=lnt id=hl-58-5><a class=lnlinks href=#hl-58-5>5</a>
</span><span class=lnt id=hl-58-6><a class=lnlinks href=#hl-58-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>123</span><span class=p>]:</span> <span class=n>df</span> <span class=o>=</span> <span class=n>boys</span><span class=p>[</span><span class=n>boys</span><span class=o>.</span><span class=n>year</span> <span class=o>==</span> <span class=mi>1900</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>124</span><span class=p>]:</span> <span class=n>in1900</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=n>by</span><span class=o>=</span><span class=s1>&#39;prop&#39;</span><span class=p>,</span> <span class=n>ascending</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=o>.</span><span class=n>prop</span><span class=o>.</span><span class=n>cumsum</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>125</span><span class=p>]:</span> <span class=n>in1900</span><span class=o>.</span><span class=n>values</span><span class=o>.</span><span class=n>searchsorted</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>125</span><span class=p>]:</span> <span class=mi>25</span></span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨å°±å¯ä»¥å¯¹æ‰€æœ‰year/sexç»„åˆæ‰§è¡Œè¿™ä¸ªè®¡ç®—äº†ã€‚æŒ‰è¿™ä¸¤ä¸ªå­—æ®µè¿›è¡Œgroupbyå¤„ç†ï¼Œç„¶åç”¨ä¸€ä¸ªå‡½æ•°è®¡ç®—å„åˆ†ç»„çš„è¿™ä¸ªå€¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-59-1><a class=lnlinks href=#hl-59-1>1</a>
</span><span class=lnt id=hl-59-2><a class=lnlinks href=#hl-59-2>2</a>
</span><span class=lnt id=hl-59-3><a class=lnlinks href=#hl-59-3>3</a>
</span><span class=lnt id=hl-59-4><a class=lnlinks href=#hl-59-4>4</a>
</span><span class=lnt id=hl-59-5><a class=lnlinks href=#hl-59-5>5</a>
</span><span class=lnt id=hl-59-6><a class=lnlinks href=#hl-59-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_quantile_count</span><span class=p>(</span><span class=n>group</span><span class=p>,</span> <span class=n>q</span><span class=o>=</span><span class=mf>0.5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>group</span> <span class=o>=</span> <span class=n>group</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=n>by</span><span class=o>=</span><span class=s1>&#39;prop&#39;</span><span class=p>,</span> <span class=n>ascending</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>group</span><span class=o>.</span><span class=n>prop</span><span class=o>.</span><span class=n>cumsum</span><span class=p>()</span><span class=o>.</span><span class=n>values</span><span class=o>.</span><span class=n>searchsorted</span><span class=p>(</span><span class=n>q</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>diversity</span> <span class=o>=</span> <span class=n>top1000</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;year&#39;</span><span class=p>,</span> <span class=s1>&#39;sex&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>get_quantile_count</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>diversity</span> <span class=o>=</span> <span class=n>diversity</span><span class=o>.</span><span class=n>unstack</span><span class=p>(</span><span class=s1>&#39;sex&#39;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨ï¼Œdiversityè¿™ä¸ªDataFrameæ‹¥æœ‰ä¸¤ä¸ªæ—¶é—´åºåˆ—ï¼ˆæ¯ä¸ªæ€§åˆ«å„ä¸€ä¸ªï¼ŒæŒ‰å¹´åº¦ç´¢å¼•ï¼‰ã€‚é€šè¿‡IPythonï¼Œä½ å¯ä»¥æŸ¥çœ‹å…¶å†…å®¹ï¼Œè¿˜å¯ä»¥åƒä¹‹å‰é‚£æ ·ç»˜åˆ¶å›¾è¡¨ï¼ˆå¦‚å›¾14-7æ‰€ç¤ºï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-60-1><a class=lnlinks href=#hl-60-1> 1</a>
</span><span class=lnt id=hl-60-2><a class=lnlinks href=#hl-60-2> 2</a>
</span><span class=lnt id=hl-60-3><a class=lnlinks href=#hl-60-3> 3</a>
</span><span class=lnt id=hl-60-4><a class=lnlinks href=#hl-60-4> 4</a>
</span><span class=lnt id=hl-60-5><a class=lnlinks href=#hl-60-5> 5</a>
</span><span class=lnt id=hl-60-6><a class=lnlinks href=#hl-60-6> 6</a>
</span><span class=lnt id=hl-60-7><a class=lnlinks href=#hl-60-7> 7</a>
</span><span class=lnt id=hl-60-8><a class=lnlinks href=#hl-60-8> 8</a>
</span><span class=lnt id=hl-60-9><a class=lnlinks href=#hl-60-9> 9</a>
</span><span class=lnt id=hl-60-10><a class=lnlinks href=#hl-60-10>10</a>
</span><span class=lnt id=hl-60-11><a class=lnlinks href=#hl-60-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>128</span><span class=p>]:</span> <span class=n>diversity</span><span class=o>.</span><span class=n>head</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>128</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>sex</span>    <span class=n>F</span>   <span class=n>M</span>
</span></span><span class=line><span class=cl><span class=n>year</span>        
</span></span><span class=line><span class=cl><span class=mi>1880</span>  <span class=mi>38</span>  <span class=mi>14</span>
</span></span><span class=line><span class=cl><span class=mi>1881</span>  <span class=mi>38</span>  <span class=mi>14</span>
</span></span><span class=line><span class=cl><span class=mi>1882</span>  <span class=mi>38</span>  <span class=mi>15</span>
</span></span><span class=line><span class=cl><span class=mi>1883</span>  <span class=mi>39</span>  <span class=mi>15</span>
</span></span><span class=line><span class=cl><span class=mi>1884</span>  <span class=mi>39</span>  <span class=mi>16</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>129</span><span class=p>]:</span> <span class=n>diversity</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s2>&#34;Number of popular names in top 50%&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://gitee.com/wugenqiang/images/raw/master/02/1240-20201031180325177.png alt="å›¾14-7 æŒ‰å¹´åº¦ç»Ÿè®¡çš„å¯†åº¦è¡¨"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¥³å­©åå­—çš„å¤šæ ·æ€§æ€»æ˜¯æ¯”ç”·å­©çš„é«˜ï¼Œè€Œä¸”è¿˜åœ¨å˜å¾—è¶Šæ¥è¶Šé«˜ã€‚è¯»è€…ä»¬å¯ä»¥è‡ªå·±åˆ†æä¸€ä¸‹å…·ä½“æ˜¯ä»€ä¹ˆåœ¨é©±åŠ¨è¿™ä¸ªå¤šæ ·æ€§ï¼ˆæ¯”å¦‚æ‹¼å†™å½¢å¼çš„å˜åŒ–ï¼‰ã€‚</p><h3 id=1433-æœ€åä¸€ä¸ªå­—æ¯çš„å˜é©>14.3.3 â€œæœ€åä¸€ä¸ªå­—æ¯â€çš„å˜é©
<a class=header-anchor href=#1433-%e6%9c%80%e5%90%8e%e4%b8%80%e4%b8%aa%e5%ad%97%e6%af%8d%e7%9a%84%e5%8f%98%e9%9d%a9></a></h3><p>2007å¹´ï¼Œä¸€åå©´å„¿å§“åç ”ç©¶äººå‘˜Laura Wattenbergåœ¨å¥¹è‡ªå·±çš„ç½‘ç«™ä¸ŠæŒ‡å‡ºï¼ˆhttp://www.babynamewizard.comï¼‰ï¼šè¿‘ç™¾å¹´æ¥ï¼Œç”·å­©åå­—åœ¨æœ€åä¸€ä¸ªå­—æ¯ä¸Šçš„åˆ†å¸ƒå‘ç”Ÿäº†æ˜¾è‘—çš„å˜åŒ–ã€‚ä¸ºäº†äº†è§£å…·ä½“çš„æƒ…å†µï¼Œæˆ‘é¦–å…ˆå°†å…¨éƒ¨å‡ºç”Ÿæ•°æ®åœ¨å¹´åº¦ã€æ€§åˆ«ä»¥åŠæœ«å­—æ¯ä¸Šè¿›è¡Œäº†èšåˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-61-1><a class=lnlinks href=#hl-61-1>1</a>
</span><span class=lnt id=hl-61-2><a class=lnlinks href=#hl-61-2>2</a>
</span><span class=lnt id=hl-61-3><a class=lnlinks href=#hl-61-3>3</a>
</span><span class=lnt id=hl-61-4><a class=lnlinks href=#hl-61-4>4</a>
</span><span class=lnt id=hl-61-5><a class=lnlinks href=#hl-61-5>5</a>
</span><span class=lnt id=hl-61-6><a class=lnlinks href=#hl-61-6>6</a>
</span><span class=lnt id=hl-61-7><a class=lnlinks href=#hl-61-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># extract last letter from name column</span>
</span></span><span class=line><span class=cl><span class=n>get_last_letter</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>last_letters</span> <span class=o>=</span> <span class=n>names</span><span class=o>.</span><span class=n>name</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>get_last_letter</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>last_letters</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;last_letter&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>table</span> <span class=o>=</span> <span class=n>names</span><span class=o>.</span><span class=n>pivot_table</span><span class=p>(</span><span class=s1>&#39;births&#39;</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=n>last_letters</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                          <span class=n>columns</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;sex&#39;</span><span class=p>,</span> <span class=s1>&#39;year&#39;</span><span class=p>],</span> <span class=n>aggfunc</span><span class=o>=</span><span class=nb>sum</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>ç„¶åï¼Œæˆ‘é€‰å‡ºå…·æœ‰ä¸€å®šä»£è¡¨æ€§çš„ä¸‰å¹´ï¼Œå¹¶è¾“å‡ºå‰é¢å‡ è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-62-1><a class=lnlinks href=#hl-62-1> 1</a>
</span><span class=lnt id=hl-62-2><a class=lnlinks href=#hl-62-2> 2</a>
</span><span class=lnt id=hl-62-3><a class=lnlinks href=#hl-62-3> 3</a>
</span><span class=lnt id=hl-62-4><a class=lnlinks href=#hl-62-4> 4</a>
</span><span class=lnt id=hl-62-5><a class=lnlinks href=#hl-62-5> 5</a>
</span><span class=lnt id=hl-62-6><a class=lnlinks href=#hl-62-6> 6</a>
</span><span class=lnt id=hl-62-7><a class=lnlinks href=#hl-62-7> 7</a>
</span><span class=lnt id=hl-62-8><a class=lnlinks href=#hl-62-8> 8</a>
</span><span class=lnt id=hl-62-9><a class=lnlinks href=#hl-62-9> 9</a>
</span><span class=lnt id=hl-62-10><a class=lnlinks href=#hl-62-10>10</a>
</span><span class=lnt id=hl-62-11><a class=lnlinks href=#hl-62-11>11</a>
</span><span class=lnt id=hl-62-12><a class=lnlinks href=#hl-62-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>131</span><span class=p>]:</span> <span class=n>subtable</span> <span class=o>=</span> <span class=n>table</span><span class=o>.</span><span class=n>reindex</span><span class=p>(</span><span class=n>columns</span><span class=o>=</span><span class=p>[</span><span class=mi>1910</span><span class=p>,</span> <span class=mi>1960</span><span class=p>,</span> <span class=mi>2010</span><span class=p>],</span> <span class=n>level</span><span class=o>=</span><span class=s1>&#39;year&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>132</span><span class=p>]:</span> <span class=n>subtable</span><span class=o>.</span><span class=n>head</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>132</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>sex</span>                 <span class=n>F</span>                            <span class=n>M</span>                    
</span></span><span class=line><span class=cl><span class=n>year</span>             <span class=mi>1910</span>      <span class=mi>1960</span>      <span class=mi>2010</span>     <span class=mi>1910</span>      <span class=mi>1960</span>      <span class=mi>2010</span>
</span></span><span class=line><span class=cl><span class=n>last_letter</span>                                                           
</span></span><span class=line><span class=cl><span class=n>a</span>            <span class=mf>108376.0</span>  <span class=mf>691247.0</span>  <span class=mf>670605.0</span>    <span class=mf>977.0</span>    <span class=mf>5204.0</span>   <span class=mf>28438.0</span>
</span></span><span class=line><span class=cl><span class=n>b</span>                 <span class=n>NaN</span>     <span class=mf>694.0</span>     <span class=mf>450.0</span>    <span class=mf>411.0</span>    <span class=mf>3912.0</span>   <span class=mf>38859.0</span>
</span></span><span class=line><span class=cl><span class=n>c</span>                 <span class=mf>5.0</span>      <span class=mf>49.0</span>     <span class=mf>946.0</span>    <span class=mf>482.0</span>   <span class=mf>15476.0</span>   <span class=mf>23125.0</span>
</span></span><span class=line><span class=cl><span class=n>d</span>              <span class=mf>6750.0</span>    <span class=mf>3729.0</span>    <span class=mf>2607.0</span>  <span class=mf>22111.0</span>  <span class=mf>262112.0</span>   <span class=mf>44398.0</span>
</span></span><span class=line><span class=cl><span class=n>e</span>            <span class=mf>133569.0</span>  <span class=mf>435013.0</span>  <span class=mf>313833.0</span>  <span class=mf>28655.0</span>  <span class=mf>178823.0</span>  <span class=mf>129012.0</span></span></span></code></pre></td></tr></table></div></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æŒ‰æ€»å‡ºç”Ÿæ•°å¯¹è¯¥è¡¨è¿›è¡Œè§„èŒƒåŒ–å¤„ç†ï¼Œä»¥ä¾¿è®¡ç®—å‡ºå„æ€§åˆ«å„æœ«å­—æ¯å æ€»å‡ºç”Ÿäººæ•°çš„æ¯”ä¾‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-63-1><a class=lnlinks href=#hl-63-1> 1</a>
</span><span class=lnt id=hl-63-2><a class=lnlinks href=#hl-63-2> 2</a>
</span><span class=lnt id=hl-63-3><a class=lnlinks href=#hl-63-3> 3</a>
</span><span class=lnt id=hl-63-4><a class=lnlinks href=#hl-63-4> 4</a>
</span><span class=lnt id=hl-63-5><a class=lnlinks href=#hl-63-5> 5</a>
</span><span class=lnt id=hl-63-6><a class=lnlinks href=#hl-63-6> 6</a>
</span><span class=lnt id=hl-63-7><a class=lnlinks href=#hl-63-7> 7</a>
</span><span class=lnt id=hl-63-8><a class=lnlinks href=#hl-63-8> 8</a>
</span><span class=lnt id=hl-63-9><a class=lnlinks href=#hl-63-9> 9</a>
</span><span class=lnt id=hl-63-10><a class=lnlinks href=#hl-63-10>10</a>
</span><span class=lnt id=hl-63-11><a class=lnlinks href=#hl-63-11>11</a>
</span><span class=lnt id=hl-63-12><a class=lnlinks href=#hl-63-12>12</a>
</span><span class=lnt id=hl-63-13><a class=lnlinks href=#hl-63-13>13</a>
</span><span class=lnt id=hl-63-14><a class=lnlinks href=#hl-63-14>14</a>
</span><span class=lnt id=hl-63-15><a class=lnlinks href=#hl-63-15>15</a>
</span><span class=lnt id=hl-63-16><a class=lnlinks href=#hl-63-16>16</a>
</span><span class=lnt id=hl-63-17><a class=lnlinks href=#hl-63-17>17</a>
</span><span class=lnt id=hl-63-18><a class=lnlinks href=#hl-63-18>18</a>
</span><span class=lnt id=hl-63-19><a class=lnlinks href=#hl-63-19>19</a>
</span><span class=lnt id=hl-63-20><a class=lnlinks href=#hl-63-20>20</a>
</span><span class=lnt id=hl-63-21><a class=lnlinks href=#hl-63-21>21</a>
</span><span class=lnt id=hl-63-22><a class=lnlinks href=#hl-63-22>22</a>
</span><span class=lnt id=hl-63-23><a class=lnlinks href=#hl-63-23>23</a>
</span><span class=lnt id=hl-63-24><a class=lnlinks href=#hl-63-24>24</a>
</span><span class=lnt id=hl-63-25><a class=lnlinks href=#hl-63-25>25</a>
</span><span class=lnt id=hl-63-26><a class=lnlinks href=#hl-63-26>26</a>
</span><span class=lnt id=hl-63-27><a class=lnlinks href=#hl-63-27>27</a>
</span><span class=lnt id=hl-63-28><a class=lnlinks href=#hl-63-28>28</a>
</span><span class=lnt id=hl-63-29><a class=lnlinks href=#hl-63-29>29</a>
</span><span class=lnt id=hl-63-30><a class=lnlinks href=#hl-63-30>30</a>
</span><span class=lnt id=hl-63-31><a class=lnlinks href=#hl-63-31>31</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>133</span><span class=p>]:</span> <span class=n>subtable</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>133</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>sex</span>  <span class=n>year</span>
</span></span><span class=line><span class=cl><span class=n>F</span>    <span class=mi>1910</span>     <span class=mf>396416.0</span>
</span></span><span class=line><span class=cl>     <span class=mi>1960</span>    <span class=mf>2022062.0</span>
</span></span><span class=line><span class=cl>     <span class=mi>2010</span>    <span class=mf>1759010.0</span>
</span></span><span class=line><span class=cl><span class=n>M</span>    <span class=mi>1910</span>     <span class=mf>194198.0</span>
</span></span><span class=line><span class=cl>     <span class=mi>1960</span>    <span class=mf>2132588.0</span>
</span></span><span class=line><span class=cl><span class=mi>2010</span>    <span class=mf>1898382.0</span>
</span></span><span class=line><span class=cl><span class=n>dtype</span><span class=p>:</span> <span class=n>float64</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>134</span><span class=p>]:</span> <span class=n>letter_prop</span> <span class=o>=</span> <span class=n>subtable</span> <span class=o>/</span> <span class=n>subtable</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>135</span><span class=p>]:</span> <span class=n>letter_prop</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>135</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>sex</span>                 <span class=n>F</span>                             <span class=n>M</span>                    
</span></span><span class=line><span class=cl><span class=n>year</span>             <span class=mi>1910</span>      <span class=mi>1960</span>      <span class=mi>2010</span>      <span class=mi>1910</span>      <span class=mi>1960</span>      <span class=mi>2010</span>
</span></span><span class=line><span class=cl><span class=n>last_letter</span>                                                            
</span></span><span class=line><span class=cl><span class=n>a</span>            <span class=mf>0.273390</span>  <span class=mf>0.341853</span>  <span class=mf>0.381240</span>  <span class=mf>0.005031</span>  <span class=mf>0.002440</span>  <span class=mf>0.014980</span>
</span></span><span class=line><span class=cl><span class=n>b</span>                 <span class=n>NaN</span>  <span class=mf>0.000343</span>  <span class=mf>0.000256</span>  <span class=mf>0.002116</span>  <span class=mf>0.001834</span>  <span class=mf>0.020470</span>
</span></span><span class=line><span class=cl><span class=n>c</span>            <span class=mf>0.000013</span>  <span class=mf>0.000024</span>  <span class=mf>0.000538</span>  <span class=mf>0.002482</span>  <span class=mf>0.007257</span>  <span class=mf>0.012181</span>
</span></span><span class=line><span class=cl><span class=n>d</span>            <span class=mf>0.017028</span>  <span class=mf>0.001844</span>  <span class=mf>0.001482</span>  <span class=mf>0.113858</span>  <span class=mf>0.122908</span>  <span class=mf>0.023387</span>
</span></span><span class=line><span class=cl><span class=n>e</span>            <span class=mf>0.336941</span>  <span class=mf>0.215133</span>  <span class=mf>0.178415</span>  <span class=mf>0.147556</span>  <span class=mf>0.083853</span>  <span class=mf>0.067959</span>
</span></span><span class=line><span class=cl><span class=o>...</span>               <span class=o>...</span>       <span class=o>...</span>       <span class=o>...</span>       <span class=o>...</span>       <span class=o>...</span>       <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=n>v</span>                 <span class=n>NaN</span>  <span class=mf>0.000060</span>  <span class=mf>0.000117</span>  <span class=mf>0.000113</span>
</span></span><span class=line><span class=cl><span class=mf>0.000037</span>  <span class=mf>0.001434</span>
</span></span><span class=line><span class=cl><span class=n>w</span>            <span class=mf>0.000020</span>  <span class=mf>0.000031</span>  <span class=mf>0.001182</span>  <span class=mf>0.006329</span>  <span class=mf>0.007711</span>  <span class=mf>0.016148</span>
</span></span><span class=line><span class=cl><span class=n>x</span>            <span class=mf>0.000015</span>  <span class=mf>0.000037</span>  <span class=mf>0.000727</span>  <span class=mf>0.003965</span>  <span class=mf>0.001851</span>  <span class=mf>0.008614</span>
</span></span><span class=line><span class=cl><span class=n>y</span>            <span class=mf>0.110972</span>  <span class=mf>0.152569</span>  <span class=mf>0.116828</span>  <span class=mf>0.077349</span>  <span class=mf>0.160987</span>  <span class=mf>0.058168</span>
</span></span><span class=line><span class=cl><span class=n>z</span>            <span class=mf>0.002439</span>  <span class=mf>0.000659</span>  <span class=mf>0.000704</span>  <span class=mf>0.000170</span>  <span class=mf>0.000184</span>  <span class=mf>0.001831</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>26</span> <span class=n>rows</span> <span class=n>x</span> <span class=mi>6</span> <span class=n>columns</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>æœ‰äº†è¿™ä¸ªå­—æ¯æ¯”ä¾‹æ•°æ®ä¹‹åï¼Œå°±å¯ä»¥ç”Ÿæˆä¸€å¼ å„å¹´åº¦å„æ€§åˆ«çš„æ¡å½¢å›¾äº†ï¼Œå¦‚å›¾14-8æ‰€ç¤ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-64-1><a class=lnlinks href=#hl-64-1>1</a>
</span><span class=lnt id=hl-64-2><a class=lnlinks href=#hl-64-2>2</a>
</span><span class=lnt id=hl-64-3><a class=lnlinks href=#hl-64-3>3</a>
</span><span class=lnt id=hl-64-4><a class=lnlinks href=#hl-64-4>4</a>
</span><span class=lnt id=hl-64-5><a class=lnlinks href=#hl-64-5>5</a>
</span><span class=lnt id=hl-64-6><a class=lnlinks href=#hl-64-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fig</span><span class=p>,</span> <span class=n>axes</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>8</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>letter_prop</span><span class=p>[</span><span class=s1>&#39;M&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s1>&#39;bar&#39;</span><span class=p>,</span> <span class=n>rot</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>axes</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Male&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>letter_prop</span><span class=p>[</span><span class=s1>&#39;F&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s1>&#39;bar&#39;</span><span class=p>,</span> <span class=n>rot</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>axes</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Female&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                      <span class=n>legend</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://gitee.com/wugenqiang/images/raw/master/02/1240-20201031180345568.png alt="å›¾14-8 ç”·å­©å¥³å­©åå­—ä¸­å„ä¸ªæœ«å­—æ¯çš„æ¯”ä¾‹"></p><p>å¯ä»¥çœ‹å‡ºï¼Œä»20ä¸–çºª60å¹´ä»£å¼€å§‹ï¼Œä»¥å­—æ¯"n"ç»“å°¾çš„ç”·å­©åå­—å‡ºç°äº†æ˜¾è‘—çš„å¢é•¿ã€‚å›åˆ°ä¹‹å‰åˆ›å»ºçš„é‚£ä¸ªå®Œæ•´è¡¨ï¼ŒæŒ‰å¹´åº¦å’Œæ€§åˆ«å¯¹å…¶è¿›è¡Œè§„èŒƒåŒ–å¤„ç†ï¼Œå¹¶åœ¨ç”·å­©åå­—ä¸­é€‰å–å‡ ä¸ªå­—æ¯ï¼Œæœ€åè¿›è¡Œè½¬ç½®ä»¥ä¾¿å°†å„ä¸ªåˆ—åšæˆä¸€ä¸ªæ—¶é—´åºåˆ—ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-65-1><a class=lnlinks href=#hl-65-1> 1</a>
</span><span class=lnt id=hl-65-2><a class=lnlinks href=#hl-65-2> 2</a>
</span><span class=lnt id=hl-65-3><a class=lnlinks href=#hl-65-3> 3</a>
</span><span class=lnt id=hl-65-4><a class=lnlinks href=#hl-65-4> 4</a>
</span><span class=lnt id=hl-65-5><a class=lnlinks href=#hl-65-5> 5</a>
</span><span class=lnt id=hl-65-6><a class=lnlinks href=#hl-65-6> 6</a>
</span><span class=lnt id=hl-65-7><a class=lnlinks href=#hl-65-7> 7</a>
</span><span class=lnt id=hl-65-8><a class=lnlinks href=#hl-65-8> 8</a>
</span><span class=lnt id=hl-65-9><a class=lnlinks href=#hl-65-9> 9</a>
</span><span class=lnt id=hl-65-10><a class=lnlinks href=#hl-65-10>10</a>
</span><span class=lnt id=hl-65-11><a class=lnlinks href=#hl-65-11>11</a>
</span><span class=lnt id=hl-65-12><a class=lnlinks href=#hl-65-12>12</a>
</span><span class=lnt id=hl-65-13><a class=lnlinks href=#hl-65-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>138</span><span class=p>]:</span> <span class=n>letter_prop</span> <span class=o>=</span> <span class=n>table</span> <span class=o>/</span> <span class=n>table</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>139</span><span class=p>]:</span> <span class=n>dny_ts</span> <span class=o>=</span> <span class=n>letter_prop</span><span class=o>.</span><span class=n>loc</span><span class=p>[[</span><span class=s1>&#39;d&#39;</span><span class=p>,</span> <span class=s1>&#39;n&#39;</span><span class=p>,</span> <span class=s1>&#39;y&#39;</span><span class=p>],</span> <span class=s1>&#39;M&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>T</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>140</span><span class=p>]:</span> <span class=n>dny_ts</span><span class=o>.</span><span class=n>head</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>140</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>last_letter</span>         <span class=n>d</span>         <span class=n>n</span>         <span class=n>y</span>
</span></span><span class=line><span class=cl><span class=n>year</span>                                     
</span></span><span class=line><span class=cl><span class=mi>1880</span>         <span class=mf>0.083055</span>  <span class=mf>0.153213</span>  <span class=mf>0.075760</span>
</span></span><span class=line><span class=cl><span class=mi>1881</span>         <span class=mf>0.083247</span>  <span class=mf>0.153214</span>  <span class=mf>0.077451</span>
</span></span><span class=line><span class=cl><span class=mi>1882</span>         <span class=mf>0.085340</span>  <span class=mf>0.149560</span>  <span class=mf>0.077537</span>
</span></span><span class=line><span class=cl><span class=mi>1883</span>         <span class=mf>0.084066</span>  <span class=mf>0.151646</span>  <span class=mf>0.079144</span>
</span></span><span class=line><span class=cl><span class=mi>1884</span>         <span class=mf>0.086120</span>  <span class=mf>0.149915</span>  <span class=mf>0.080405</span></span></span></code></pre></td></tr></table></div></div><p>æœ‰äº†è¿™ä¸ªæ—¶é—´åºåˆ—çš„DataFrameä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡å…¶plotæ–¹æ³•ç»˜åˆ¶å‡ºä¸€å¼ è¶‹åŠ¿å›¾äº†ï¼ˆå¦‚å›¾14-9æ‰€ç¤ºï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-66-1><a class=lnlinks href=#hl-66-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>143</span><span class=p>]:</span> <span class=n>dny_ts</span><span class=o>.</span><span class=n>plot</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://gitee.com/wugenqiang/images/raw/master/02/1240-20201031180352940.png alt="å›¾14-9 å„å¹´å‡ºç”Ÿçš„ç”·å­©ä¸­åå­—ä»¥d/n/yç»“å°¾çš„äººæ•°æ¯”ä¾‹"></p><h3 id=1434-å˜æˆå¥³å­©åå­—çš„ç”·å­©åå­—ä»¥åŠç›¸åçš„æƒ…å†µ>14.3.4 å˜æˆå¥³å­©åå­—çš„ç”·å­©åå­—ï¼ˆä»¥åŠç›¸åçš„æƒ…å†µï¼‰
<a class=header-anchor href=#1434-%e5%8f%98%e6%88%90%e5%a5%b3%e5%ad%a9%e5%90%8d%e5%ad%97%e7%9a%84%e7%94%b7%e5%ad%a9%e5%90%8d%e5%ad%97%e4%bb%a5%e5%8f%8a%e7%9b%b8%e5%8f%8d%e7%9a%84%e6%83%85%e5%86%b5></a></h3><p>å¦ä¸€ä¸ªæœ‰è¶£çš„è¶‹åŠ¿æ˜¯ï¼Œæ—©å¹´æµè¡Œäºç”·å­©çš„åå­—è¿‘å¹´æ¥â€œå˜æ€§äº†â€ï¼Œä¾‹å¦‚Lesleyæˆ–Leslieã€‚å›åˆ°top1000æ•°æ®é›†ï¼Œæ‰¾å‡ºå…¶ä¸­ä»¥"lesl"å¼€å¤´çš„ä¸€ç»„åå­—ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-67-1><a class=lnlinks href=#hl-67-1> 1</a>
</span><span class=lnt id=hl-67-2><a class=lnlinks href=#hl-67-2> 2</a>
</span><span class=lnt id=hl-67-3><a class=lnlinks href=#hl-67-3> 3</a>
</span><span class=lnt id=hl-67-4><a class=lnlinks href=#hl-67-4> 4</a>
</span><span class=lnt id=hl-67-5><a class=lnlinks href=#hl-67-5> 5</a>
</span><span class=lnt id=hl-67-6><a class=lnlinks href=#hl-67-6> 6</a>
</span><span class=lnt id=hl-67-7><a class=lnlinks href=#hl-67-7> 7</a>
</span><span class=lnt id=hl-67-8><a class=lnlinks href=#hl-67-8> 8</a>
</span><span class=lnt id=hl-67-9><a class=lnlinks href=#hl-67-9> 9</a>
</span><span class=lnt id=hl-67-10><a class=lnlinks href=#hl-67-10>10</a>
</span><span class=lnt id=hl-67-11><a class=lnlinks href=#hl-67-11>11</a>
</span><span class=lnt id=hl-67-12><a class=lnlinks href=#hl-67-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>144</span><span class=p>]:</span> <span class=n>all_names</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>(</span><span class=n>top1000</span><span class=o>.</span><span class=n>name</span><span class=o>.</span><span class=n>unique</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>145</span><span class=p>]:</span> <span class=n>lesley_like</span> <span class=o>=</span> <span class=n>all_names</span><span class=p>[</span><span class=n>all_names</span><span class=o>.</span><span class=n>str</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span><span class=o>.</span><span class=n>str</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=s1>&#39;lesl&#39;</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>146</span><span class=p>]:</span> <span class=n>lesley_like</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>146</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=mi>632</span>     <span class=n>Leslie</span>
</span></span><span class=line><span class=cl><span class=mi>2294</span>    <span class=n>Lesley</span>
</span></span><span class=line><span class=cl><span class=mi>4262</span>    <span class=n>Leslee</span>
</span></span><span class=line><span class=cl><span class=mi>4728</span>     <span class=n>Lesli</span>
</span></span><span class=line><span class=cl><span class=mi>6103</span>     <span class=n>Lesly</span>
</span></span><span class=line><span class=cl><span class=n>dtype</span><span class=p>:</span> <span class=nb>object</span></span></span></code></pre></td></tr></table></div></div><p>ç„¶ååˆ©ç”¨è¿™ä¸ªç»“æœè¿‡æ»¤å…¶ä»–çš„åå­—ï¼Œå¹¶æŒ‰åå­—åˆ†ç»„è®¡ç®—å‡ºç”Ÿæ•°ä»¥æŸ¥çœ‹ç›¸å¯¹é¢‘ç‡ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-68-1><a class=lnlinks href=#hl-68-1> 1</a>
</span><span class=lnt id=hl-68-2><a class=lnlinks href=#hl-68-2> 2</a>
</span><span class=lnt id=hl-68-3><a class=lnlinks href=#hl-68-3> 3</a>
</span><span class=lnt id=hl-68-4><a class=lnlinks href=#hl-68-4> 4</a>
</span><span class=lnt id=hl-68-5><a class=lnlinks href=#hl-68-5> 5</a>
</span><span class=lnt id=hl-68-6><a class=lnlinks href=#hl-68-6> 6</a>
</span><span class=lnt id=hl-68-7><a class=lnlinks href=#hl-68-7> 7</a>
</span><span class=lnt id=hl-68-8><a class=lnlinks href=#hl-68-8> 8</a>
</span><span class=lnt id=hl-68-9><a class=lnlinks href=#hl-68-9> 9</a>
</span><span class=lnt id=hl-68-10><a class=lnlinks href=#hl-68-10>10</a>
</span><span class=lnt id=hl-68-11><a class=lnlinks href=#hl-68-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>147</span><span class=p>]:</span> <span class=n>filtered</span> <span class=o>=</span> <span class=n>top1000</span><span class=p>[</span><span class=n>top1000</span><span class=o>.</span><span class=n>name</span><span class=o>.</span><span class=n>isin</span><span class=p>(</span><span class=n>lesley_like</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>148</span><span class=p>]:</span> <span class=n>filtered</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>births</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>148</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>name</span>
</span></span><span class=line><span class=cl><span class=n>Leslee</span>      <span class=mi>1082</span>
</span></span><span class=line><span class=cl><span class=n>Lesley</span>     <span class=mi>35022</span>
</span></span><span class=line><span class=cl><span class=n>Lesli</span>        <span class=mi>929</span>
</span></span><span class=line><span class=cl><span class=n>Leslie</span>    <span class=mi>370429</span>
</span></span><span class=line><span class=cl><span class=n>Lesly</span>      <span class=mi>10067</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>births</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>int64</span></span></span></code></pre></td></tr></table></div></div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŒ‰æ€§åˆ«å’Œå¹´åº¦è¿›è¡Œèšåˆï¼Œå¹¶æŒ‰å¹´åº¦è¿›è¡Œè§„èŒƒåŒ–å¤„ç†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-69-1><a class=lnlinks href=#hl-69-1> 1</a>
</span><span class=lnt id=hl-69-2><a class=lnlinks href=#hl-69-2> 2</a>
</span><span class=lnt id=hl-69-3><a class=lnlinks href=#hl-69-3> 3</a>
</span><span class=lnt id=hl-69-4><a class=lnlinks href=#hl-69-4> 4</a>
</span><span class=lnt id=hl-69-5><a class=lnlinks href=#hl-69-5> 5</a>
</span><span class=lnt id=hl-69-6><a class=lnlinks href=#hl-69-6> 6</a>
</span><span class=lnt id=hl-69-7><a class=lnlinks href=#hl-69-7> 7</a>
</span><span class=lnt id=hl-69-8><a class=lnlinks href=#hl-69-8> 8</a>
</span><span class=lnt id=hl-69-9><a class=lnlinks href=#hl-69-9> 9</a>
</span><span class=lnt id=hl-69-10><a class=lnlinks href=#hl-69-10>10</a>
</span><span class=lnt id=hl-69-11><a class=lnlinks href=#hl-69-11>11</a>
</span><span class=lnt id=hl-69-12><a class=lnlinks href=#hl-69-12>12</a>
</span><span class=lnt id=hl-69-13><a class=lnlinks href=#hl-69-13>13</a>
</span><span class=lnt id=hl-69-14><a class=lnlinks href=#hl-69-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>149</span><span class=p>]:</span> <span class=n>table</span> <span class=o>=</span> <span class=n>filtered</span><span class=o>.</span><span class=n>pivot_table</span><span class=p>(</span><span class=s1>&#39;births&#39;</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=s1>&#39;year&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>.....</span><span class=p>:</span>                              <span class=n>columns</span><span class=o>=</span><span class=s1>&#39;sex&#39;</span><span class=p>,</span> <span class=n>aggfunc</span><span class=o>=</span><span class=s1>&#39;sum&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>150</span><span class=p>]:</span> <span class=n>table</span> <span class=o>=</span> <span class=n>table</span><span class=o>.</span><span class=n>div</span><span class=p>(</span><span class=n>table</span><span class=o>.</span><span class=n>sum</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=n>axis</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>151</span><span class=p>]:</span> <span class=n>table</span><span class=o>.</span><span class=n>tail</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>151</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>sex</span>     <span class=n>F</span>   <span class=n>M</span>
</span></span><span class=line><span class=cl><span class=n>year</span>         
</span></span><span class=line><span class=cl><span class=mi>2006</span>  <span class=mf>1.0</span> <span class=n>NaN</span>
</span></span><span class=line><span class=cl><span class=mi>2007</span>  <span class=mf>1.0</span> <span class=n>NaN</span>
</span></span><span class=line><span class=cl><span class=mi>2008</span>  <span class=mf>1.0</span> <span class=n>NaN</span>
</span></span><span class=line><span class=cl><span class=mi>2009</span>  <span class=mf>1.0</span> <span class=n>NaN</span>
</span></span><span class=line><span class=cl><span class=mi>2010</span>  <span class=mf>1.0</span> <span class=n>NaN</span></span></span></code></pre></td></tr></table></div></div><p>æœ€åï¼Œå°±å¯ä»¥è½»æ¾ç»˜åˆ¶ä¸€å¼ åˆ†æ€§åˆ«çš„å¹´åº¦æ›²çº¿å›¾äº†ï¼ˆå¦‚å›¾2-10æ‰€ç¤ºï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-70-1><a class=lnlinks href=#hl-70-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>153</span><span class=p>]:</span> <span class=n>table</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>style</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;M&#39;</span><span class=p>:</span> <span class=s1>&#39;k-&#39;</span><span class=p>,</span> <span class=s1>&#39;F&#39;</span><span class=p>:</span> <span class=s1>&#39;k--&#39;</span><span class=p>})</span></span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://gitee.com/wugenqiang/images/raw/master/02/1240-20201031180408537.png alt="å›¾14-10 å„å¹´åº¦ä½¿ç”¨â€œLesleyå‹â€åå­—çš„ç”·å¥³æ¯”ä¾‹"></p><h2 id=144-usdaé£Ÿå“æ•°æ®åº“>14.4 USDAé£Ÿå“æ•°æ®åº“
<a class=header-anchor href=#144-usda%e9%a3%9f%e5%93%81%e6%95%b0%e6%8d%ae%e5%ba%93></a></h2><p>ç¾å›½å†œä¸šéƒ¨ï¼ˆUSDAï¼‰åˆ¶ä½œäº†ä¸€ä»½æœ‰å…³é£Ÿç‰©è¥å…»ä¿¡æ¯çš„æ•°æ®åº“ã€‚Ashley Williamsåˆ¶ä½œäº†è¯¥æ•°æ®çš„JSONç‰ˆï¼ˆhttp://ashleyw.co.uk/project/food-nutrient-databaseï¼‰ã€‚å…¶ä¸­çš„è®°å½•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-71-1><a class=lnlinks href=#hl-71-1> 1</a>
</span><span class=lnt id=hl-71-2><a class=lnlinks href=#hl-71-2> 2</a>
</span><span class=lnt id=hl-71-3><a class=lnlinks href=#hl-71-3> 3</a>
</span><span class=lnt id=hl-71-4><a class=lnlinks href=#hl-71-4> 4</a>
</span><span class=lnt id=hl-71-5><a class=lnlinks href=#hl-71-5> 5</a>
</span><span class=lnt id=hl-71-6><a class=lnlinks href=#hl-71-6> 6</a>
</span><span class=lnt id=hl-71-7><a class=lnlinks href=#hl-71-7> 7</a>
</span><span class=lnt id=hl-71-8><a class=lnlinks href=#hl-71-8> 8</a>
</span><span class=lnt id=hl-71-9><a class=lnlinks href=#hl-71-9> 9</a>
</span><span class=lnt id=hl-71-10><a class=lnlinks href=#hl-71-10>10</a>
</span><span class=lnt id=hl-71-11><a class=lnlinks href=#hl-71-11>11</a>
</span><span class=lnt id=hl-71-12><a class=lnlinks href=#hl-71-12>12</a>
</span><span class=lnt id=hl-71-13><a class=lnlinks href=#hl-71-13>13</a>
</span><span class=lnt id=hl-71-14><a class=lnlinks href=#hl-71-14>14</a>
</span><span class=lnt id=hl-71-15><a class=lnlinks href=#hl-71-15>15</a>
</span><span class=lnt id=hl-71-16><a class=lnlinks href=#hl-71-16>16</a>
</span><span class=lnt id=hl-71-17><a class=lnlinks href=#hl-71-17>17</a>
</span><span class=lnt id=hl-71-18><a class=lnlinks href=#hl-71-18>18</a>
</span><span class=lnt id=hl-71-19><a class=lnlinks href=#hl-71-19>19</a>
</span><span class=lnt id=hl-71-20><a class=lnlinks href=#hl-71-20>20</a>
</span><span class=lnt id=hl-71-21><a class=lnlinks href=#hl-71-21>21</a>
</span><span class=lnt id=hl-71-22><a class=lnlinks href=#hl-71-22>22</a>
</span><span class=lnt id=hl-71-23><a class=lnlinks href=#hl-71-23>23</a>
</span><span class=lnt id=hl-71-24><a class=lnlinks href=#hl-71-24>24</a>
</span><span class=lnt id=hl-71-25><a class=lnlinks href=#hl-71-25>25</a>
</span><span class=lnt id=hl-71-26><a class=lnlinks href=#hl-71-26>26</a>
</span><span class=lnt id=hl-71-27><a class=lnlinks href=#hl-71-27>27</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;id&#34;</span><span class=p>:</span> <span class=mi>21441</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;KENTUCKY FRIED CHICKEN, Fried Chicken, EXTRA CRISPY,</span>
</span></span><span class=line><span class=cl><span class=n>Wing</span><span class=p>,</span> <span class=n>meat</span> <span class=ow>and</span> <span class=n>skin</span> <span class=k>with</span> <span class=n>breading</span><span class=s2>&#34;,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;tags&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;KFC&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;manufacturer&#34;</span><span class=p>:</span> <span class=s2>&#34;Kentucky Fried Chicken&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;group&#34;</span><span class=p>:</span> <span class=s2>&#34;Fast Foods&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;portions&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;amount&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;unit&#34;</span><span class=p>:</span> <span class=s2>&#34;wing, with skin&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;grams&#34;</span><span class=p>:</span> <span class=mf>68.0</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;nutrients&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;value&#34;</span><span class=p>:</span> <span class=mf>20.8</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;units&#34;</span><span class=p>:</span> <span class=s2>&#34;g&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Protein&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;group&#34;</span><span class=p>:</span> <span class=s2>&#34;Composition&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>æ¯ç§é£Ÿç‰©éƒ½å¸¦æœ‰è‹¥å¹²æ ‡è¯†æ€§å±æ€§ä»¥åŠä¸¤ä¸ªæœ‰å…³è¥å…»æˆåˆ†å’Œåˆ†é‡çš„åˆ—è¡¨ã€‚è¿™ç§å½¢å¼çš„æ•°æ®ä¸æ˜¯å¾ˆé€‚åˆåˆ†æå·¥ä½œï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åšä¸€äº›è§„æ•´åŒ–ä»¥ä½¿å…¶å…·æœ‰æ›´å¥½ç”¨çš„å½¢å¼ã€‚</p><p>ä»ä¸Šé¢åˆ—ä¸¾çš„é‚£ä¸ªç½‘å€ä¸‹è½½å¹¶è§£å‹æ•°æ®ä¹‹åï¼Œä½ å¯ä»¥ç”¨ä»»ä½•å–œæ¬¢çš„JSONåº“å°†å…¶åŠ è½½åˆ°Pythonä¸­ã€‚æˆ‘ç”¨çš„æ˜¯Pythonå†…ç½®çš„jsonæ¨¡å—ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-72-1><a class=lnlinks href=#hl-72-1>1</a>
</span><span class=lnt id=hl-72-2><a class=lnlinks href=#hl-72-2>2</a>
</span><span class=lnt id=hl-72-3><a class=lnlinks href=#hl-72-3>3</a>
</span><span class=lnt id=hl-72-4><a class=lnlinks href=#hl-72-4>4</a>
</span><span class=lnt id=hl-72-5><a class=lnlinks href=#hl-72-5>5</a>
</span><span class=lnt id=hl-72-6><a class=lnlinks href=#hl-72-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>154</span><span class=p>]:</span> <span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>155</span><span class=p>]:</span> <span class=n>db</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=nb>open</span><span class=p>(</span><span class=s1>&#39;datasets/usda_food/database.json&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>156</span><span class=p>]:</span> <span class=nb>len</span><span class=p>(</span><span class=n>db</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>156</span><span class=p>]:</span> <span class=mi>6636</span></span></span></code></pre></td></tr></table></div></div><p>dbä¸­çš„æ¯ä¸ªæ¡ç›®éƒ½æ˜¯ä¸€ä¸ªå«æœ‰æŸç§é£Ÿç‰©å…¨éƒ¨æ•°æ®çš„å­—å…¸ã€‚nutrientså­—æ®µæ˜¯ä¸€ä¸ªå­—å…¸åˆ—è¡¨ï¼Œå…¶ä¸­çš„æ¯ä¸ªå­—å…¸å¯¹åº”ä¸€ç§è¥å…»æˆåˆ†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-73-1><a class=lnlinks href=#hl-73-1> 1</a>
</span><span class=lnt id=hl-73-2><a class=lnlinks href=#hl-73-2> 2</a>
</span><span class=lnt id=hl-73-3><a class=lnlinks href=#hl-73-3> 3</a>
</span><span class=lnt id=hl-73-4><a class=lnlinks href=#hl-73-4> 4</a>
</span><span class=lnt id=hl-73-5><a class=lnlinks href=#hl-73-5> 5</a>
</span><span class=lnt id=hl-73-6><a class=lnlinks href=#hl-73-6> 6</a>
</span><span class=lnt id=hl-73-7><a class=lnlinks href=#hl-73-7> 7</a>
</span><span class=lnt id=hl-73-8><a class=lnlinks href=#hl-73-8> 8</a>
</span><span class=lnt id=hl-73-9><a class=lnlinks href=#hl-73-9> 9</a>
</span><span class=lnt id=hl-73-10><a class=lnlinks href=#hl-73-10>10</a>
</span><span class=lnt id=hl-73-11><a class=lnlinks href=#hl-73-11>11</a>
</span><span class=lnt id=hl-73-12><a class=lnlinks href=#hl-73-12>12</a>
</span><span class=lnt id=hl-73-13><a class=lnlinks href=#hl-73-13>13</a>
</span><span class=lnt id=hl-73-14><a class=lnlinks href=#hl-73-14>14</a>
</span><span class=lnt id=hl-73-15><a class=lnlinks href=#hl-73-15>15</a>
</span><span class=lnt id=hl-73-16><a class=lnlinks href=#hl-73-16>16</a>
</span><span class=lnt id=hl-73-17><a class=lnlinks href=#hl-73-17>17</a>
</span><span class=lnt id=hl-73-18><a class=lnlinks href=#hl-73-18>18</a>
</span><span class=lnt id=hl-73-19><a class=lnlinks href=#hl-73-19>19</a>
</span><span class=lnt id=hl-73-20><a class=lnlinks href=#hl-73-20>20</a>
</span><span class=lnt id=hl-73-21><a class=lnlinks href=#hl-73-21>21</a>
</span><span class=lnt id=hl-73-22><a class=lnlinks href=#hl-73-22>22</a>
</span><span class=lnt id=hl-73-23><a class=lnlinks href=#hl-73-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>157</span><span class=p>]:</span> <span class=n>db</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>157</span><span class=p>]:</span> <span class=n>dict_keys</span><span class=p>([</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;description&#39;</span><span class=p>,</span> <span class=s1>&#39;tags&#39;</span><span class=p>,</span> <span class=s1>&#39;manufacturer&#39;</span><span class=p>,</span> <span class=s1>&#39;group&#39;</span><span class=p>,</span> <span class=s1>&#39;porti</span>
</span></span><span class=line><span class=cl><span class=n>ons</span><span class=s1>&#39;, &#39;</span><span class=n>nutrients</span><span class=s1>&#39;])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>158</span><span class=p>]:</span> <span class=n>db</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=s1>&#39;nutrients&#39;</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>158</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=p>{</span><span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;Protein&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;group&#39;</span><span class=p>:</span> <span class=s1>&#39;Composition&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;units&#39;</span><span class=p>:</span> <span class=s1>&#39;g&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;value&#39;</span><span class=p>:</span> <span class=mf>25.18</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>159</span><span class=p>]:</span> <span class=n>nutrients</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>db</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=s1>&#39;nutrients&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>160</span><span class=p>]:</span> <span class=n>nutrients</span><span class=p>[:</span><span class=mi>7</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>160</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>                   <span class=n>description</span>        <span class=n>group</span> <span class=n>units</span>    <span class=n>value</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>                      <span class=n>Protein</span>  <span class=n>Composition</span>     <span class=n>g</span>    <span class=mf>25.18</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>            <span class=n>Total</span> <span class=n>lipid</span> <span class=p>(</span><span class=n>fat</span><span class=p>)</span>  <span class=n>Composition</span>     <span class=n>g</span>    <span class=mf>29.20</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>  <span class=n>Carbohydrate</span><span class=p>,</span> <span class=n>by</span> <span class=n>difference</span>  <span class=n>Composition</span>     <span class=n>g</span>     <span class=mf>3.06</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>                          <span class=n>Ash</span>        <span class=n>Other</span>     <span class=n>g</span>     <span class=mf>3.28</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>                       <span class=n>Energy</span>       <span class=n>Energy</span>  <span class=n>kcal</span>   <span class=mf>376.00</span>
</span></span><span class=line><span class=cl><span class=mi>5</span>                        <span class=n>Water</span>  <span class=n>Composition</span>     <span class=n>g</span>    <span class=mf>39.28</span>
</span></span><span class=line><span class=cl><span class=mi>6</span>                       <span class=n>Energy</span>       <span class=n>Energy</span>    <span class=n>kJ</span>  <span class=mf>1573.00</span></span></span></code></pre></td></tr></table></div></div><p>åœ¨å°†å­—å…¸åˆ—è¡¨è½¬æ¢ä¸ºDataFrameæ—¶ï¼Œå¯ä»¥åªæŠ½å–å…¶ä¸­çš„ä¸€éƒ¨åˆ†å­—æ®µã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å°†å–å‡ºé£Ÿç‰©çš„åç§°ã€åˆ†ç±»ã€ç¼–å·ä»¥åŠåˆ¶é€ å•†ç­‰ä¿¡æ¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-74-1><a class=lnlinks href=#hl-74-1> 1</a>
</span><span class=lnt id=hl-74-2><a class=lnlinks href=#hl-74-2> 2</a>
</span><span class=lnt id=hl-74-3><a class=lnlinks href=#hl-74-3> 3</a>
</span><span class=lnt id=hl-74-4><a class=lnlinks href=#hl-74-4> 4</a>
</span><span class=lnt id=hl-74-5><a class=lnlinks href=#hl-74-5> 5</a>
</span><span class=lnt id=hl-74-6><a class=lnlinks href=#hl-74-6> 6</a>
</span><span class=lnt id=hl-74-7><a class=lnlinks href=#hl-74-7> 7</a>
</span><span class=lnt id=hl-74-8><a class=lnlinks href=#hl-74-8> 8</a>
</span><span class=lnt id=hl-74-9><a class=lnlinks href=#hl-74-9> 9</a>
</span><span class=lnt id=hl-74-10><a class=lnlinks href=#hl-74-10>10</a>
</span><span class=lnt id=hl-74-11><a class=lnlinks href=#hl-74-11>11</a>
</span><span class=lnt id=hl-74-12><a class=lnlinks href=#hl-74-12>12</a>
</span><span class=lnt id=hl-74-13><a class=lnlinks href=#hl-74-13>13</a>
</span><span class=lnt id=hl-74-14><a class=lnlinks href=#hl-74-14>14</a>
</span><span class=lnt id=hl-74-15><a class=lnlinks href=#hl-74-15>15</a>
</span><span class=lnt id=hl-74-16><a class=lnlinks href=#hl-74-16>16</a>
</span><span class=lnt id=hl-74-17><a class=lnlinks href=#hl-74-17>17</a>
</span><span class=lnt id=hl-74-18><a class=lnlinks href=#hl-74-18>18</a>
</span><span class=lnt id=hl-74-19><a class=lnlinks href=#hl-74-19>19</a>
</span><span class=lnt id=hl-74-20><a class=lnlinks href=#hl-74-20>20</a>
</span><span class=lnt id=hl-74-21><a class=lnlinks href=#hl-74-21>21</a>
</span><span class=lnt id=hl-74-22><a class=lnlinks href=#hl-74-22>22</a>
</span><span class=lnt id=hl-74-23><a class=lnlinks href=#hl-74-23>23</a>
</span><span class=lnt id=hl-74-24><a class=lnlinks href=#hl-74-24>24</a>
</span><span class=lnt id=hl-74-25><a class=lnlinks href=#hl-74-25>25</a>
</span><span class=lnt id=hl-74-26><a class=lnlinks href=#hl-74-26>26</a>
</span><span class=lnt id=hl-74-27><a class=lnlinks href=#hl-74-27>27</a>
</span><span class=lnt id=hl-74-28><a class=lnlinks href=#hl-74-28>28</a>
</span><span class=lnt id=hl-74-29><a class=lnlinks href=#hl-74-29>29</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>161</span><span class=p>]:</span> <span class=n>info_keys</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;description&#39;</span><span class=p>,</span> <span class=s1>&#39;group&#39;</span><span class=p>,</span> <span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;manufacturer&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>162</span><span class=p>]:</span> <span class=n>info</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>db</span><span class=p>,</span> <span class=n>columns</span><span class=o>=</span><span class=n>info_keys</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>163</span><span class=p>]:</span> <span class=n>info</span><span class=p>[:</span><span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>163</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>                          <span class=n>description</span>                   <span class=n>group</span>    <span class=nb>id</span>  \
</span></span><span class=line><span class=cl><span class=mi>0</span>                     <span class=n>Cheese</span><span class=p>,</span> <span class=n>caraway</span>  <span class=n>Dairy</span> <span class=ow>and</span> <span class=n>Egg</span> <span class=n>Products</span>  <span class=mi>1008</span>   
</span></span><span class=line><span class=cl><span class=mi>1</span>                     <span class=n>Cheese</span><span class=p>,</span> <span class=n>cheddar</span>  <span class=n>Dairy</span> <span class=ow>and</span> <span class=n>Egg</span> <span class=n>Products</span>  <span class=mi>1009</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>                        <span class=n>Cheese</span><span class=p>,</span> <span class=n>edam</span>  <span class=n>Dairy</span> <span class=ow>and</span> <span class=n>Egg</span> <span class=n>Products</span>  <span class=mi>1018</span>   
</span></span><span class=line><span class=cl><span class=mi>3</span>                        <span class=n>Cheese</span><span class=p>,</span> <span class=n>feta</span>  <span class=n>Dairy</span> <span class=ow>and</span> <span class=n>Egg</span> <span class=n>Products</span>  <span class=mi>1019</span>   
</span></span><span class=line><span class=cl><span class=mi>4</span>  <span class=n>Cheese</span><span class=p>,</span> <span class=n>mozzarella</span><span class=p>,</span> <span class=n>part</span> <span class=n>skim</span> <span class=n>milk</span>  <span class=n>Dairy</span> <span class=ow>and</span> <span class=n>Egg</span> <span class=n>Products</span>  <span class=mi>1028</span>   
</span></span><span class=line><span class=cl>  <span class=n>manufacturer</span>  
</span></span><span class=line><span class=cl><span class=mi>0</span>               
</span></span><span class=line><span class=cl><span class=mi>1</span>               
</span></span><span class=line><span class=cl><span class=mi>2</span>               
</span></span><span class=line><span class=cl><span class=mi>3</span>               
</span></span><span class=line><span class=cl><span class=mi>4</span>               
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>164</span><span class=p>]:</span> <span class=n>info</span><span class=o>.</span><span class=n>info</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=k>class</span> <span class=err>&#39;</span><span class=nc>pandas</span><span class=o>.</span><span class=n>core</span><span class=o>.</span><span class=n>frame</span><span class=o>.</span><span class=n>DataFrame</span><span class=s1>&#39;&gt;</span>
</span></span><span class=line><span class=cl><span class=n>RangeIndex</span><span class=p>:</span> <span class=mi>6636</span> <span class=n>entries</span><span class=p>,</span> <span class=mi>0</span> <span class=n>to</span> <span class=mi>6635</span>
</span></span><span class=line><span class=cl><span class=n>Data</span> <span class=n>columns</span> <span class=p>(</span><span class=n>total</span> <span class=mi>4</span> <span class=n>columns</span><span class=p>):</span>
</span></span><span class=line><span class=cl><span class=n>description</span>     <span class=mi>6636</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>group</span>           <span class=mi>6636</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=nb>id</span>              <span class=mi>6636</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=n>int64</span>
</span></span><span class=line><span class=cl><span class=n>manufacturer</span>    <span class=mi>5195</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>dtypes</span><span class=p>:</span> <span class=n>int64</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=nb>object</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>memory</span> <span class=n>usage</span><span class=p>:</span> <span class=mf>207.5</span><span class=o>+</span> <span class=n>KB</span></span></span></code></pre></td></tr></table></div></div><p>é€šè¿‡value_countsï¼Œä½ å¯ä»¥æŸ¥çœ‹é£Ÿç‰©ç±»åˆ«çš„åˆ†å¸ƒæƒ…å†µï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-75-1><a class=lnlinks href=#hl-75-1> 1</a>
</span><span class=lnt id=hl-75-2><a class=lnlinks href=#hl-75-2> 2</a>
</span><span class=lnt id=hl-75-3><a class=lnlinks href=#hl-75-3> 3</a>
</span><span class=lnt id=hl-75-4><a class=lnlinks href=#hl-75-4> 4</a>
</span><span class=lnt id=hl-75-5><a class=lnlinks href=#hl-75-5> 5</a>
</span><span class=lnt id=hl-75-6><a class=lnlinks href=#hl-75-6> 6</a>
</span><span class=lnt id=hl-75-7><a class=lnlinks href=#hl-75-7> 7</a>
</span><span class=lnt id=hl-75-8><a class=lnlinks href=#hl-75-8> 8</a>
</span><span class=lnt id=hl-75-9><a class=lnlinks href=#hl-75-9> 9</a>
</span><span class=lnt id=hl-75-10><a class=lnlinks href=#hl-75-10>10</a>
</span><span class=lnt id=hl-75-11><a class=lnlinks href=#hl-75-11>11</a>
</span><span class=lnt id=hl-75-12><a class=lnlinks href=#hl-75-12>12</a>
</span><span class=lnt id=hl-75-13><a class=lnlinks href=#hl-75-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>165</span><span class=p>]:</span> <span class=n>pd</span><span class=o>.</span><span class=n>value_counts</span><span class=p>(</span><span class=n>info</span><span class=o>.</span><span class=n>group</span><span class=p>)[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>165</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>Vegetables</span> <span class=ow>and</span> <span class=n>Vegetable</span> <span class=n>Products</span>    <span class=mi>812</span>
</span></span><span class=line><span class=cl><span class=n>Beef</span> <span class=n>Products</span>                        <span class=mi>618</span>
</span></span><span class=line><span class=cl><span class=n>Baked</span> <span class=n>Products</span>                       <span class=mi>496</span>
</span></span><span class=line><span class=cl><span class=n>Breakfast</span> <span class=n>Cereals</span>                    <span class=mi>403</span>
</span></span><span class=line><span class=cl><span class=n>Fast</span> <span class=n>Foods</span>                           <span class=mi>365</span>
</span></span><span class=line><span class=cl><span class=n>Legumes</span> <span class=ow>and</span> <span class=n>Legume</span> <span class=n>Products</span>          <span class=mi>365</span>
</span></span><span class=line><span class=cl><span class=n>Lamb</span><span class=p>,</span> <span class=n>Veal</span><span class=p>,</span> <span class=ow>and</span> <span class=n>Game</span> <span class=n>Products</span>        <span class=mi>345</span>
</span></span><span class=line><span class=cl><span class=n>Sweets</span>                               <span class=mi>341</span>
</span></span><span class=line><span class=cl><span class=n>Pork</span> <span class=n>Products</span>                        <span class=mi>328</span>
</span></span><span class=line><span class=cl><span class=n>Fruits</span> <span class=ow>and</span> <span class=n>Fruit</span> <span class=n>Juices</span>              <span class=mi>328</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>group</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>int64</span></span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨ï¼Œä¸ºäº†å¯¹å…¨éƒ¨è¥å…»æ•°æ®åšä¸€äº›åˆ†æï¼Œæœ€ç®€å•çš„åŠæ³•æ˜¯å°†æ‰€æœ‰é£Ÿç‰©çš„è¥å…»æˆåˆ†æ•´åˆåˆ°ä¸€ä¸ªå¤§è¡¨ä¸­ã€‚æˆ‘ä»¬åˆ†å‡ ä¸ªæ­¥éª¤æ¥å®ç°è¯¥ç›®çš„ã€‚é¦–å…ˆï¼Œå°†å„é£Ÿç‰©çš„è¥å…»æˆåˆ†åˆ—è¡¨è½¬æ¢ä¸ºä¸€ä¸ªDataFrameï¼Œå¹¶æ·»åŠ ä¸€ä¸ªè¡¨ç¤ºç¼–å·çš„åˆ—ï¼Œç„¶åå°†è¯¥DataFrameæ·»åŠ åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚æœ€åé€šè¿‡concatå°†è¿™äº›ä¸œè¥¿è¿æ¥èµ·æ¥å°±å¯ä»¥äº†ï¼š</p><p>é¡ºåˆ©çš„è¯ï¼Œnutrientsçš„ç»“æœæ˜¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-76-1><a class=lnlinks href=#hl-76-1> 1</a>
</span><span class=lnt id=hl-76-2><a class=lnlinks href=#hl-76-2> 2</a>
</span><span class=lnt id=hl-76-3><a class=lnlinks href=#hl-76-3> 3</a>
</span><span class=lnt id=hl-76-4><a class=lnlinks href=#hl-76-4> 4</a>
</span><span class=lnt id=hl-76-5><a class=lnlinks href=#hl-76-5> 5</a>
</span><span class=lnt id=hl-76-6><a class=lnlinks href=#hl-76-6> 6</a>
</span><span class=lnt id=hl-76-7><a class=lnlinks href=#hl-76-7> 7</a>
</span><span class=lnt id=hl-76-8><a class=lnlinks href=#hl-76-8> 8</a>
</span><span class=lnt id=hl-76-9><a class=lnlinks href=#hl-76-9> 9</a>
</span><span class=lnt id=hl-76-10><a class=lnlinks href=#hl-76-10>10</a>
</span><span class=lnt id=hl-76-11><a class=lnlinks href=#hl-76-11>11</a>
</span><span class=lnt id=hl-76-12><a class=lnlinks href=#hl-76-12>12</a>
</span><span class=lnt id=hl-76-13><a class=lnlinks href=#hl-76-13>13</a>
</span><span class=lnt id=hl-76-14><a class=lnlinks href=#hl-76-14>14</a>
</span><span class=lnt id=hl-76-15><a class=lnlinks href=#hl-76-15>15</a>
</span><span class=lnt id=hl-76-16><a class=lnlinks href=#hl-76-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>167</span><span class=p>]:</span> <span class=n>nutrients</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>167</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>                               <span class=n>description</span>        <span class=n>group</span> <span class=n>units</span>    <span class=n>value</span>     <span class=nb>id</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>                                  <span class=n>Protein</span>  <span class=n>Composition</span>     <span class=n>g</span>   <span class=mf>25.180</span>   <span class=mi>1008</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>                        <span class=n>Total</span> <span class=n>lipid</span> <span class=p>(</span><span class=n>fat</span><span class=p>)</span>  <span class=n>Composition</span>     <span class=n>g</span>   <span class=mf>29.200</span>   <span class=mi>1008</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>              <span class=n>Carbohydrate</span><span class=p>,</span> <span class=n>by</span> <span class=n>difference</span>  <span class=n>Composition</span>     <span class=n>g</span>    <span class=mf>3.060</span>   <span class=mi>1008</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>                                      <span class=n>Ash</span>        <span class=n>Other</span>     <span class=n>g</span>    <span class=mf>3.280</span>   <span class=mi>1008</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>                                   <span class=n>Energy</span>       <span class=n>Energy</span>  <span class=n>kcal</span>  <span class=mf>376.000</span>   <span class=mi>1008</span>
</span></span><span class=line><span class=cl><span class=o>...</span>                                    <span class=o>...</span>          <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=o>...</span>      <span class=o>...</span>    <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=mi>389350</span>                 <span class=n>Vitamin</span> <span class=n>B</span><span class=o>-</span><span class=mi>12</span><span class=p>,</span> <span class=n>added</span>     <span class=n>Vitamins</span>   <span class=n>mcg</span>    <span class=mf>0.000</span>  <span class=mi>43546</span>
</span></span><span class=line><span class=cl><span class=mi>389351</span>                         <span class=n>Cholesterol</span>        <span class=n>Other</span>    <span class=n>mg</span>    <span class=mf>0.000</span>  <span class=mi>43546</span>
</span></span><span class=line><span class=cl><span class=mi>389352</span>        <span class=n>Fatty</span> <span class=n>acids</span><span class=p>,</span> <span class=n>total</span> <span class=n>saturated</span>        <span class=n>Other</span>     <span class=n>g</span>    <span class=mf>0.072</span>  <span class=mi>43546</span>
</span></span><span class=line><span class=cl><span class=mi>389353</span>  <span class=n>Fatty</span> <span class=n>acids</span><span class=p>,</span> <span class=n>total</span> <span class=n>monounsaturated</span>        <span class=n>Other</span>     <span class=n>g</span>    <span class=mf>0.028</span>  <span class=mi>43546</span>
</span></span><span class=line><span class=cl><span class=mi>389354</span>  <span class=n>Fatty</span> <span class=n>acids</span><span class=p>,</span> <span class=n>total</span> <span class=n>polyunsaturated</span>        <span class=n>Other</span>     <span class=n>g</span>    <span class=mf>0.041</span>  <span class=mi>43546</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>389355</span> <span class=n>rows</span> <span class=n>x</span> <span class=mi>5</span> <span class=n>columns</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>æˆ‘å‘ç°è¿™ä¸ªDataFrameä¸­æ— è®ºå¦‚ä½•éƒ½ä¼šæœ‰ä¸€äº›é‡å¤é¡¹ï¼Œæ‰€ä»¥ç›´æ¥ä¸¢å¼ƒå°±å¯ä»¥äº†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-77-1><a class=lnlinks href=#hl-77-1>1</a>
</span><span class=lnt id=hl-77-2><a class=lnlinks href=#hl-77-2>2</a>
</span><span class=lnt id=hl-77-3><a class=lnlinks href=#hl-77-3>3</a>
</span><span class=lnt id=hl-77-4><a class=lnlinks href=#hl-77-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>168</span><span class=p>]:</span> <span class=n>nutrients</span><span class=o>.</span><span class=n>duplicated</span><span class=p>()</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>  <span class=c1># number of duplicates</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>168</span><span class=p>]:</span> <span class=mi>14179</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>169</span><span class=p>]:</span> <span class=n>nutrients</span> <span class=o>=</span> <span class=n>nutrients</span><span class=o>.</span><span class=n>drop_duplicates</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>ç”±äºä¸¤ä¸ªDataFrameå¯¹è±¡ä¸­éƒ½æœ‰"group"å’Œ"description"ï¼Œæ‰€ä»¥ä¸ºäº†æ˜ç¡®åˆ°åº•è°æ˜¯è°ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å®ƒä»¬è¿›è¡Œé‡å‘½åï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-78-1><a class=lnlinks href=#hl-78-1> 1</a>
</span><span class=lnt id=hl-78-2><a class=lnlinks href=#hl-78-2> 2</a>
</span><span class=lnt id=hl-78-3><a class=lnlinks href=#hl-78-3> 3</a>
</span><span class=lnt id=hl-78-4><a class=lnlinks href=#hl-78-4> 4</a>
</span><span class=lnt id=hl-78-5><a class=lnlinks href=#hl-78-5> 5</a>
</span><span class=lnt id=hl-78-6><a class=lnlinks href=#hl-78-6> 6</a>
</span><span class=lnt id=hl-78-7><a class=lnlinks href=#hl-78-7> 7</a>
</span><span class=lnt id=hl-78-8><a class=lnlinks href=#hl-78-8> 8</a>
</span><span class=lnt id=hl-78-9><a class=lnlinks href=#hl-78-9> 9</a>
</span><span class=lnt id=hl-78-10><a class=lnlinks href=#hl-78-10>10</a>
</span><span class=lnt id=hl-78-11><a class=lnlinks href=#hl-78-11>11</a>
</span><span class=lnt id=hl-78-12><a class=lnlinks href=#hl-78-12>12</a>
</span><span class=lnt id=hl-78-13><a class=lnlinks href=#hl-78-13>13</a>
</span><span class=lnt id=hl-78-14><a class=lnlinks href=#hl-78-14>14</a>
</span><span class=lnt id=hl-78-15><a class=lnlinks href=#hl-78-15>15</a>
</span><span class=lnt id=hl-78-16><a class=lnlinks href=#hl-78-16>16</a>
</span><span class=lnt id=hl-78-17><a class=lnlinks href=#hl-78-17>17</a>
</span><span class=lnt id=hl-78-18><a class=lnlinks href=#hl-78-18>18</a>
</span><span class=lnt id=hl-78-19><a class=lnlinks href=#hl-78-19>19</a>
</span><span class=lnt id=hl-78-20><a class=lnlinks href=#hl-78-20>20</a>
</span><span class=lnt id=hl-78-21><a class=lnlinks href=#hl-78-21>21</a>
</span><span class=lnt id=hl-78-22><a class=lnlinks href=#hl-78-22>22</a>
</span><span class=lnt id=hl-78-23><a class=lnlinks href=#hl-78-23>23</a>
</span><span class=lnt id=hl-78-24><a class=lnlinks href=#hl-78-24>24</a>
</span><span class=lnt id=hl-78-25><a class=lnlinks href=#hl-78-25>25</a>
</span><span class=lnt id=hl-78-26><a class=lnlinks href=#hl-78-26>26</a>
</span><span class=lnt id=hl-78-27><a class=lnlinks href=#hl-78-27>27</a>
</span><span class=lnt id=hl-78-28><a class=lnlinks href=#hl-78-28>28</a>
</span><span class=lnt id=hl-78-29><a class=lnlinks href=#hl-78-29>29</a>
</span><span class=lnt id=hl-78-30><a class=lnlinks href=#hl-78-30>30</a>
</span><span class=lnt id=hl-78-31><a class=lnlinks href=#hl-78-31>31</a>
</span><span class=lnt id=hl-78-32><a class=lnlinks href=#hl-78-32>32</a>
</span><span class=lnt id=hl-78-33><a class=lnlinks href=#hl-78-33>33</a>
</span><span class=lnt id=hl-78-34><a class=lnlinks href=#hl-78-34>34</a>
</span><span class=lnt id=hl-78-35><a class=lnlinks href=#hl-78-35>35</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>170</span><span class=p>]:</span> <span class=n>col_mapping</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;description&#39;</span> <span class=p>:</span> <span class=s1>&#39;food&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>.....</span><span class=p>:</span>                <span class=s1>&#39;group&#39;</span>       <span class=p>:</span> <span class=s1>&#39;fgroup&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>171</span><span class=p>]:</span> <span class=n>info</span> <span class=o>=</span> <span class=n>info</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span><span class=n>columns</span><span class=o>=</span><span class=n>col_mapping</span><span class=p>,</span> <span class=n>copy</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>172</span><span class=p>]:</span> <span class=n>info</span><span class=o>.</span><span class=n>info</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=k>class</span> <span class=err>&#39;</span><span class=nc>pandas</span><span class=o>.</span><span class=n>core</span><span class=o>.</span><span class=n>frame</span><span class=o>.</span><span class=n>DataFrame</span><span class=s1>&#39;&gt;</span>
</span></span><span class=line><span class=cl><span class=n>RangeIndex</span><span class=p>:</span> <span class=mi>6636</span> <span class=n>entries</span><span class=p>,</span> <span class=mi>0</span> <span class=n>to</span> <span class=mi>6635</span>
</span></span><span class=line><span class=cl><span class=n>Data</span> <span class=n>columns</span> <span class=p>(</span><span class=n>total</span> <span class=mi>4</span> <span class=n>columns</span><span class=p>):</span>
</span></span><span class=line><span class=cl><span class=n>food</span>            <span class=mi>6636</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>fgroup</span>          <span class=mi>6636</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=nb>id</span>              <span class=mi>6636</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=n>int64</span>
</span></span><span class=line><span class=cl><span class=n>manufacturer</span>    <span class=mi>5195</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>dtypes</span><span class=p>:</span> <span class=n>int64</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=nb>object</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>memory</span> <span class=n>usage</span><span class=p>:</span> <span class=mf>207.5</span><span class=o>+</span> <span class=n>KB</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>173</span><span class=p>]:</span> <span class=n>col_mapping</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;description&#39;</span> <span class=p>:</span> <span class=s1>&#39;nutrient&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>.....</span><span class=p>:</span>                <span class=s1>&#39;group&#39;</span> <span class=p>:</span> <span class=s1>&#39;nutgroup&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>174</span><span class=p>]:</span> <span class=n>nutrients</span> <span class=o>=</span> <span class=n>nutrients</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span><span class=n>columns</span><span class=o>=</span><span class=n>col_mapping</span><span class=p>,</span> <span class=n>copy</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>175</span><span class=p>]:</span> <span class=n>nutrients</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>175</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl>                                  <span class=n>nutrient</span>     <span class=n>nutgroup</span> <span class=n>units</span>    <span class=n>value</span>     <span class=nb>id</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>                                  <span class=n>Protein</span>  <span class=n>Composition</span>     <span class=n>g</span>   <span class=mf>25.180</span>   <span class=mi>1008</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>                        <span class=n>Total</span> <span class=n>lipid</span> <span class=p>(</span><span class=n>fat</span><span class=p>)</span>  <span class=n>Composition</span>     <span class=n>g</span>   <span class=mf>29.200</span>   <span class=mi>1008</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>              <span class=n>Carbohydrate</span><span class=p>,</span> <span class=n>by</span> <span class=n>difference</span>  <span class=n>Composition</span>     <span class=n>g</span>    <span class=mf>3.060</span>   <span class=mi>1008</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>                                      <span class=n>Ash</span>        <span class=n>Other</span>     <span class=n>g</span>    <span class=mf>3.280</span>   <span class=mi>1008</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>                                   <span class=n>Energy</span>       <span class=n>Energy</span>  <span class=n>kcal</span>  <span class=mf>376.000</span>   <span class=mi>1008</span>
</span></span><span class=line><span class=cl><span class=o>...</span>                                    <span class=o>...</span>          <span class=o>...</span>   <span class=o>...</span>      <span class=o>...</span>    <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=mi>389350</span>                 <span class=n>Vitamin</span> <span class=n>B</span><span class=o>-</span><span class=mi>12</span><span class=p>,</span> <span class=n>added</span>     <span class=n>Vitamins</span>   <span class=n>mcg</span>    <span class=mf>0.000</span>  <span class=mi>43546</span>
</span></span><span class=line><span class=cl><span class=mi>389351</span>                         <span class=n>Cholesterol</span>        <span class=n>Other</span>    <span class=n>mg</span>    <span class=mf>0.000</span>  <span class=mi>43546</span>
</span></span><span class=line><span class=cl><span class=mi>389352</span>        <span class=n>Fatty</span> <span class=n>acids</span><span class=p>,</span> <span class=n>total</span> <span class=n>saturated</span>        <span class=n>Other</span>     <span class=n>g</span>    <span class=mf>0.072</span>  <span class=mi>43546</span>
</span></span><span class=line><span class=cl><span class=mi>389353</span>  <span class=n>Fatty</span> <span class=n>acids</span><span class=p>,</span> <span class=n>total</span> <span class=n>monounsaturated</span>        <span class=n>Other</span>     <span class=n>g</span>    <span class=mf>0.028</span>  <span class=mi>43546</span>
</span></span><span class=line><span class=cl><span class=mi>389354</span>  <span class=n>Fatty</span> <span class=n>acids</span><span class=p>,</span> <span class=n>total</span> <span class=n>polyunsaturated</span>        <span class=n>Other</span>     <span class=n>g</span>    <span class=mf>0.041</span>  <span class=mi>43546</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>375176</span> <span class=n>rows</span> <span class=n>x</span> <span class=mi>5</span> <span class=n>columns</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>åšå®Œè¿™äº›ï¼Œå°±å¯ä»¥å°†infoè·Ÿnutrientsåˆå¹¶èµ·æ¥ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-79-1><a class=lnlinks href=#hl-79-1> 1</a>
</span><span class=lnt id=hl-79-2><a class=lnlinks href=#hl-79-2> 2</a>
</span><span class=lnt id=hl-79-3><a class=lnlinks href=#hl-79-3> 3</a>
</span><span class=lnt id=hl-79-4><a class=lnlinks href=#hl-79-4> 4</a>
</span><span class=lnt id=hl-79-5><a class=lnlinks href=#hl-79-5> 5</a>
</span><span class=lnt id=hl-79-6><a class=lnlinks href=#hl-79-6> 6</a>
</span><span class=lnt id=hl-79-7><a class=lnlinks href=#hl-79-7> 7</a>
</span><span class=lnt id=hl-79-8><a class=lnlinks href=#hl-79-8> 8</a>
</span><span class=lnt id=hl-79-9><a class=lnlinks href=#hl-79-9> 9</a>
</span><span class=lnt id=hl-79-10><a class=lnlinks href=#hl-79-10>10</a>
</span><span class=lnt id=hl-79-11><a class=lnlinks href=#hl-79-11>11</a>
</span><span class=lnt id=hl-79-12><a class=lnlinks href=#hl-79-12>12</a>
</span><span class=lnt id=hl-79-13><a class=lnlinks href=#hl-79-13>13</a>
</span><span class=lnt id=hl-79-14><a class=lnlinks href=#hl-79-14>14</a>
</span><span class=lnt id=hl-79-15><a class=lnlinks href=#hl-79-15>15</a>
</span><span class=lnt id=hl-79-16><a class=lnlinks href=#hl-79-16>16</a>
</span><span class=lnt id=hl-79-17><a class=lnlinks href=#hl-79-17>17</a>
</span><span class=lnt id=hl-79-18><a class=lnlinks href=#hl-79-18>18</a>
</span><span class=lnt id=hl-79-19><a class=lnlinks href=#hl-79-19>19</a>
</span><span class=lnt id=hl-79-20><a class=lnlinks href=#hl-79-20>20</a>
</span><span class=lnt id=hl-79-21><a class=lnlinks href=#hl-79-21>21</a>
</span><span class=lnt id=hl-79-22><a class=lnlinks href=#hl-79-22>22</a>
</span><span class=lnt id=hl-79-23><a class=lnlinks href=#hl-79-23>23</a>
</span><span class=lnt id=hl-79-24><a class=lnlinks href=#hl-79-24>24</a>
</span><span class=lnt id=hl-79-25><a class=lnlinks href=#hl-79-25>25</a>
</span><span class=lnt id=hl-79-26><a class=lnlinks href=#hl-79-26>26</a>
</span><span class=lnt id=hl-79-27><a class=lnlinks href=#hl-79-27>27</a>
</span><span class=lnt id=hl-79-28><a class=lnlinks href=#hl-79-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>176</span><span class=p>]:</span> <span class=n>ndata</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>nutrients</span><span class=p>,</span> <span class=n>info</span><span class=p>,</span> <span class=n>on</span><span class=o>=</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=n>how</span><span class=o>=</span><span class=s1>&#39;outer&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>177</span><span class=p>]:</span> <span class=n>ndata</span><span class=o>.</span><span class=n>info</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=k>class</span> <span class=err>&#39;</span><span class=nc>pandas</span><span class=o>.</span><span class=n>core</span><span class=o>.</span><span class=n>frame</span><span class=o>.</span><span class=n>DataFrame</span><span class=s1>&#39;&gt;</span>
</span></span><span class=line><span class=cl><span class=n>Int64Index</span><span class=p>:</span> <span class=mi>375176</span> <span class=n>entries</span><span class=p>,</span> <span class=mi>0</span> <span class=n>to</span> <span class=mi>375175</span>
</span></span><span class=line><span class=cl><span class=n>Data</span> <span class=n>columns</span> <span class=p>(</span><span class=n>total</span> <span class=mi>8</span> <span class=n>columns</span><span class=p>):</span>
</span></span><span class=line><span class=cl><span class=n>nutrient</span>        <span class=mi>375176</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>nutgroup</span>        <span class=mi>375176</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>units</span>           <span class=mi>375176</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>value</span>           <span class=mi>375176</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=n>float64</span>
</span></span><span class=line><span class=cl><span class=nb>id</span>              <span class=mi>375176</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=n>int64</span>
</span></span><span class=line><span class=cl><span class=n>food</span>            <span class=mi>375176</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>fgroup</span>          <span class=mi>375176</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>manufacturer</span>    <span class=mi>293054</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>dtypes</span><span class=p>:</span> <span class=n>float64</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=n>int64</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=nb>object</span><span class=p>(</span><span class=mi>6</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>memory</span> <span class=n>usage</span><span class=p>:</span> <span class=mf>25.8</span><span class=o>+</span> <span class=n>MB</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>178</span><span class=p>]:</span> <span class=n>ndata</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=mi>30000</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>178</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>nutrient</span>                                       <span class=n>Glycine</span>
</span></span><span class=line><span class=cl><span class=n>nutgroup</span>                                   <span class=n>Amino</span> <span class=n>Acids</span>
</span></span><span class=line><span class=cl><span class=n>units</span>                                                <span class=n>g</span>
</span></span><span class=line><span class=cl><span class=n>value</span>                                             <span class=mf>0.04</span>
</span></span><span class=line><span class=cl><span class=nb>id</span>                                                <span class=mi>6158</span>
</span></span><span class=line><span class=cl><span class=n>food</span>            <span class=n>Soup</span><span class=p>,</span> <span class=n>tomato</span> <span class=n>bisque</span><span class=p>,</span> <span class=n>canned</span><span class=p>,</span> <span class=n>condensed</span>
</span></span><span class=line><span class=cl><span class=n>fgroup</span>                      <span class=n>Soups</span><span class=p>,</span> <span class=n>Sauces</span><span class=p>,</span> <span class=ow>and</span> <span class=n>Gravies</span>
</span></span><span class=line><span class=cl><span class=n>manufacturer</span>                                          
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=mi>30000</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=nb>object</span></span></span></code></pre></td></tr></table></div></div><p>æˆ‘ä»¬ç°åœ¨å¯ä»¥æ ¹æ®é£Ÿç‰©åˆ†ç±»å’Œè¥å…»ç±»å‹ç”»å‡ºä¸€å¼ ä¸­ä½å€¼å›¾ï¼ˆå¦‚å›¾14-11æ‰€ç¤ºï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-80-1><a class=lnlinks href=#hl-80-1>1</a>
</span><span class=lnt id=hl-80-2><a class=lnlinks href=#hl-80-2>2</a>
</span><span class=lnt id=hl-80-3><a class=lnlinks href=#hl-80-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>180</span><span class=p>]:</span> <span class=n>result</span> <span class=o>=</span> <span class=n>ndata</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;nutrient&#39;</span><span class=p>,</span> <span class=s1>&#39;fgroup&#39;</span><span class=p>])[</span><span class=s1>&#39;value&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>quantile</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>181</span><span class=p>]:</span> <span class=n>result</span><span class=p>[</span><span class=s1>&#39;Zinc, Zn&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>sort_values</span><span class=p>()</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s1>&#39;barh&#39;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://gitee.com/wugenqiang/images/raw/master/02/1240-20201031180432697.png alt="å›¾ç‰‡14-11 æ ¹æ®è¥å…»åˆ†ç±»å¾—å‡ºçš„é”Œä¸­ä½å€¼"></p><p>åªè¦ç¨å¾®åŠ¨ä¸€åŠ¨è„‘å­ï¼Œå°±å¯ä»¥å‘ç°å„è¥å…»æˆåˆ†æœ€ä¸ºä¸°å¯Œçš„é£Ÿç‰©æ˜¯ä»€ä¹ˆäº†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-81-1><a class=lnlinks href=#hl-81-1>1</a>
</span><span class=lnt id=hl-81-2><a class=lnlinks href=#hl-81-2>2</a>
</span><span class=lnt id=hl-81-3><a class=lnlinks href=#hl-81-3>3</a>
</span><span class=lnt id=hl-81-4><a class=lnlinks href=#hl-81-4>4</a>
</span><span class=lnt id=hl-81-5><a class=lnlinks href=#hl-81-5>5</a>
</span><span class=lnt id=hl-81-6><a class=lnlinks href=#hl-81-6>6</a>
</span><span class=lnt id=hl-81-7><a class=lnlinks href=#hl-81-7>7</a>
</span><span class=lnt id=hl-81-8><a class=lnlinks href=#hl-81-8>8</a>
</span><span class=lnt id=hl-81-9><a class=lnlinks href=#hl-81-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>by_nutrient</span> <span class=o>=</span> <span class=n>ndata</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;nutgroup&#39;</span><span class=p>,</span> <span class=s1>&#39;nutrient&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>get_maximum</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>x</span><span class=o>.</span><span class=n>value</span><span class=o>.</span><span class=n>idxmax</span><span class=p>()]</span>
</span></span><span class=line><span class=cl><span class=n>get_minimum</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>x</span><span class=o>.</span><span class=n>value</span><span class=o>.</span><span class=n>idxmin</span><span class=p>()]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>max_foods</span> <span class=o>=</span> <span class=n>by_nutrient</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>get_maximum</span><span class=p>)[[</span><span class=s1>&#39;value&#39;</span><span class=p>,</span> <span class=s1>&#39;food&#39;</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># make the food a little smaller</span>
</span></span><span class=line><span class=cl><span class=n>max_foods</span><span class=o>.</span><span class=n>food</span> <span class=o>=</span> <span class=n>max_foods</span><span class=o>.</span><span class=n>food</span><span class=o>.</span><span class=n>str</span><span class=p>[:</span><span class=mi>50</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>ç”±äºå¾—åˆ°çš„DataFrameå¾ˆå¤§ï¼Œæ‰€ä»¥ä¸æ–¹ä¾¿åœ¨ä¹¦é‡Œé¢å…¨éƒ¨æ‰“å°å‡ºæ¥ã€‚è¿™é‡Œåªç»™å‡º"Amino Acids"è¥å…»åˆ†ç»„ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-82-1><a class=lnlinks href=#hl-82-1> 1</a>
</span><span class=lnt id=hl-82-2><a class=lnlinks href=#hl-82-2> 2</a>
</span><span class=lnt id=hl-82-3><a class=lnlinks href=#hl-82-3> 3</a>
</span><span class=lnt id=hl-82-4><a class=lnlinks href=#hl-82-4> 4</a>
</span><span class=lnt id=hl-82-5><a class=lnlinks href=#hl-82-5> 5</a>
</span><span class=lnt id=hl-82-6><a class=lnlinks href=#hl-82-6> 6</a>
</span><span class=lnt id=hl-82-7><a class=lnlinks href=#hl-82-7> 7</a>
</span><span class=lnt id=hl-82-8><a class=lnlinks href=#hl-82-8> 8</a>
</span><span class=lnt id=hl-82-9><a class=lnlinks href=#hl-82-9> 9</a>
</span><span class=lnt id=hl-82-10><a class=lnlinks href=#hl-82-10>10</a>
</span><span class=lnt id=hl-82-11><a class=lnlinks href=#hl-82-11>11</a>
</span><span class=lnt id=hl-82-12><a class=lnlinks href=#hl-82-12>12</a>
</span><span class=lnt id=hl-82-13><a class=lnlinks href=#hl-82-13>13</a>
</span><span class=lnt id=hl-82-14><a class=lnlinks href=#hl-82-14>14</a>
</span><span class=lnt id=hl-82-15><a class=lnlinks href=#hl-82-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>183</span><span class=p>]:</span> <span class=n>max_foods</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=s1>&#39;Amino Acids&#39;</span><span class=p>][</span><span class=s1>&#39;food&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>183</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>nutrient</span>
</span></span><span class=line><span class=cl><span class=n>Alanine</span>                          <span class=n>Gelatins</span><span class=p>,</span> <span class=n>dry</span> <span class=n>powder</span><span class=p>,</span> <span class=n>unsweetened</span>
</span></span><span class=line><span class=cl><span class=n>Arginine</span>                              <span class=n>Seeds</span><span class=p>,</span> <span class=n>sesame</span> <span class=n>flour</span><span class=p>,</span> <span class=n>low</span><span class=o>-</span><span class=n>fat</span>
</span></span><span class=line><span class=cl><span class=n>Aspartic</span> <span class=n>acid</span>                                  <span class=n>Soy</span> <span class=n>protein</span> <span class=n>isolate</span>
</span></span><span class=line><span class=cl><span class=n>Cystine</span>               <span class=n>Seeds</span><span class=p>,</span> <span class=n>cottonseed</span> <span class=n>flour</span><span class=p>,</span> <span class=n>low</span> <span class=n>fat</span> <span class=p>(</span><span class=n>glandless</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Glutamic</span> <span class=n>acid</span>                                  <span class=n>Soy</span> <span class=n>protein</span> <span class=n>isolate</span>
</span></span><span class=line><span class=cl>                                       <span class=o>...</span>                        
</span></span><span class=line><span class=cl><span class=n>Serine</span>           <span class=n>Soy</span> <span class=n>protein</span> <span class=n>isolate</span><span class=p>,</span> <span class=n>PROTEIN</span> <span class=n>TECHNOLOGIES</span> <span class=n>INTE</span><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=n>Threonine</span>        <span class=n>Soy</span> <span class=n>protein</span> <span class=n>isolate</span><span class=p>,</span> <span class=n>PROTEIN</span> <span class=n>TECHNOLOGIES</span> <span class=n>INTE</span><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=n>Tryptophan</span>        <span class=n>Sea</span> <span class=n>lion</span><span class=p>,</span> <span class=n>Steller</span><span class=p>,</span> <span class=n>meat</span> <span class=k>with</span> <span class=n>fat</span> <span class=p>(</span><span class=n>Alaska</span> <span class=n>Native</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Tyrosine</span>         <span class=n>Soy</span> <span class=n>protein</span> <span class=n>isolate</span><span class=p>,</span> <span class=n>PROTEIN</span> <span class=n>TECHNOLOGIES</span> <span class=n>INTE</span><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=n>Valine</span>           <span class=n>Soy</span> <span class=n>protein</span> <span class=n>isolate</span><span class=p>,</span> <span class=n>PROTEIN</span> <span class=n>TECHNOLOGIES</span> <span class=n>INTE</span><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>food</span><span class=p>,</span> <span class=n>Length</span><span class=p>:</span> <span class=mi>19</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=nb>object</span></span></span></code></pre></td></tr></table></div></div><h2 id=145-2012è”é‚¦é€‰ä¸¾å§”å‘˜ä¼šæ•°æ®åº“>14.5 2012è”é‚¦é€‰ä¸¾å§”å‘˜ä¼šæ•°æ®åº“
<a class=header-anchor href=#145-2012%e8%81%94%e9%82%a6%e9%80%89%e4%b8%be%e5%a7%94%e5%91%98%e4%bc%9a%e6%95%b0%e6%8d%ae%e5%ba%93></a></h2><p>ç¾å›½è”é‚¦é€‰ä¸¾å§”å‘˜ä¼šå‘å¸ƒäº†æœ‰å…³æ”¿æ²»ç«é€‰èµåŠ©æ–¹é¢çš„æ•°æ®ã€‚å…¶ä¸­åŒ…æ‹¬èµåŠ©è€…çš„å§“åã€èŒä¸šã€é›‡ä¸»ã€åœ°å€ä»¥åŠå‡ºèµ„é¢ç­‰ä¿¡æ¯ã€‚æˆ‘ä»¬å¯¹2012å¹´ç¾å›½æ€»ç»Ÿå¤§é€‰çš„æ•°æ®é›†æ¯”è¾ƒæ„Ÿå…´è¶£ï¼ˆhttp://www.fec.gov/disclosurep/PDownload.doï¼‰ã€‚æˆ‘åœ¨2012å¹´6æœˆä¸‹è½½çš„æ•°æ®é›†æ˜¯ä¸€ä¸ª150MBçš„CSVæ–‡ä»¶ï¼ˆP00000001-ALL.csvï¼‰ï¼Œæˆ‘ä»¬å…ˆç”¨pandas.read_csvå°†å…¶åŠ è½½è¿›æ¥ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-83-1><a class=lnlinks href=#hl-83-1> 1</a>
</span><span class=lnt id=hl-83-2><a class=lnlinks href=#hl-83-2> 2</a>
</span><span class=lnt id=hl-83-3><a class=lnlinks href=#hl-83-3> 3</a>
</span><span class=lnt id=hl-83-4><a class=lnlinks href=#hl-83-4> 4</a>
</span><span class=lnt id=hl-83-5><a class=lnlinks href=#hl-83-5> 5</a>
</span><span class=lnt id=hl-83-6><a class=lnlinks href=#hl-83-6> 6</a>
</span><span class=lnt id=hl-83-7><a class=lnlinks href=#hl-83-7> 7</a>
</span><span class=lnt id=hl-83-8><a class=lnlinks href=#hl-83-8> 8</a>
</span><span class=lnt id=hl-83-9><a class=lnlinks href=#hl-83-9> 9</a>
</span><span class=lnt id=hl-83-10><a class=lnlinks href=#hl-83-10>10</a>
</span><span class=lnt id=hl-83-11><a class=lnlinks href=#hl-83-11>11</a>
</span><span class=lnt id=hl-83-12><a class=lnlinks href=#hl-83-12>12</a>
</span><span class=lnt id=hl-83-13><a class=lnlinks href=#hl-83-13>13</a>
</span><span class=lnt id=hl-83-14><a class=lnlinks href=#hl-83-14>14</a>
</span><span class=lnt id=hl-83-15><a class=lnlinks href=#hl-83-15>15</a>
</span><span class=lnt id=hl-83-16><a class=lnlinks href=#hl-83-16>16</a>
</span><span class=lnt id=hl-83-17><a class=lnlinks href=#hl-83-17>17</a>
</span><span class=lnt id=hl-83-18><a class=lnlinks href=#hl-83-18>18</a>
</span><span class=lnt id=hl-83-19><a class=lnlinks href=#hl-83-19>19</a>
</span><span class=lnt id=hl-83-20><a class=lnlinks href=#hl-83-20>20</a>
</span><span class=lnt id=hl-83-21><a class=lnlinks href=#hl-83-21>21</a>
</span><span class=lnt id=hl-83-22><a class=lnlinks href=#hl-83-22>22</a>
</span><span class=lnt id=hl-83-23><a class=lnlinks href=#hl-83-23>23</a>
</span><span class=lnt id=hl-83-24><a class=lnlinks href=#hl-83-24>24</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>184</span><span class=p>]:</span> <span class=n>fec</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s1>&#39;datasets/fec/P00000001-ALL.csv&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>185</span><span class=p>]:</span> <span class=n>fec</span><span class=o>.</span><span class=n>info</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=k>class</span> <span class=err>&#39;</span><span class=nc>pandas</span><span class=o>.</span><span class=n>core</span><span class=o>.</span><span class=n>frame</span><span class=o>.</span><span class=n>DataFrame</span><span class=s1>&#39;&gt;</span>
</span></span><span class=line><span class=cl><span class=n>RangeIndex</span><span class=p>:</span> <span class=mi>1001731</span> <span class=n>entries</span><span class=p>,</span> <span class=mi>0</span> <span class=n>to</span> <span class=mi>1001730</span>
</span></span><span class=line><span class=cl><span class=n>Data</span> <span class=n>columns</span> <span class=p>(</span><span class=n>total</span> <span class=mi>16</span> <span class=n>columns</span><span class=p>):</span>
</span></span><span class=line><span class=cl><span class=n>cmte_id</span>              <span class=mi>1001731</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>cand_id</span>              <span class=mi>1001731</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>cand_nm</span>              <span class=mi>1001731</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>contbr_nm</span>            <span class=mi>1001731</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>contbr_city</span>          <span class=mi>1001712</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>contbr_st</span>            <span class=mi>1001727</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>contbr_zip</span>           <span class=mi>1001620</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>contbr_employer</span>      <span class=mi>988002</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>contbr_occupation</span>    <span class=mi>993301</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>contb_receipt_amt</span>    <span class=mi>1001731</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=n>float64</span>
</span></span><span class=line><span class=cl><span class=n>contb_receipt_dt</span>     <span class=mi>1001731</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>receipt_desc</span>         <span class=mi>14166</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>memo_cd</span>              <span class=mi>92482</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>memo_text</span>            <span class=mi>97770</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>form_tp</span>              <span class=mi>1001731</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl><span class=n>file_num</span>             <span class=mi>1001731</span> <span class=n>non</span><span class=o>-</span><span class=n>null</span> <span class=n>int64</span>
</span></span><span class=line><span class=cl><span class=n>dtypes</span><span class=p>:</span> <span class=n>float64</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=n>int64</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=nb>object</span><span class=p>(</span><span class=mi>14</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>memory</span> <span class=n>usage</span><span class=p>:</span> <span class=mf>122.3</span><span class=o>+</span> <span class=n>MB</span></span></span></code></pre></td></tr></table></div></div><p>è¯¥DataFrameä¸­çš„è®°å½•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-84-1><a class=lnlinks href=#hl-84-1> 1</a>
</span><span class=lnt id=hl-84-2><a class=lnlinks href=#hl-84-2> 2</a>
</span><span class=lnt id=hl-84-3><a class=lnlinks href=#hl-84-3> 3</a>
</span><span class=lnt id=hl-84-4><a class=lnlinks href=#hl-84-4> 4</a>
</span><span class=lnt id=hl-84-5><a class=lnlinks href=#hl-84-5> 5</a>
</span><span class=lnt id=hl-84-6><a class=lnlinks href=#hl-84-6> 6</a>
</span><span class=lnt id=hl-84-7><a class=lnlinks href=#hl-84-7> 7</a>
</span><span class=lnt id=hl-84-8><a class=lnlinks href=#hl-84-8> 8</a>
</span><span class=lnt id=hl-84-9><a class=lnlinks href=#hl-84-9> 9</a>
</span><span class=lnt id=hl-84-10><a class=lnlinks href=#hl-84-10>10</a>
</span><span class=lnt id=hl-84-11><a class=lnlinks href=#hl-84-11>11</a>
</span><span class=lnt id=hl-84-12><a class=lnlinks href=#hl-84-12>12</a>
</span><span class=lnt id=hl-84-13><a class=lnlinks href=#hl-84-13>13</a>
</span><span class=lnt id=hl-84-14><a class=lnlinks href=#hl-84-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>186</span><span class=p>]:</span> <span class=n>fec</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=mi>123456</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>186</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>cmte_id</span>             <span class=n>C00431445</span>
</span></span><span class=line><span class=cl><span class=n>cand_id</span>             <span class=n>P80003338</span>
</span></span><span class=line><span class=cl><span class=n>cand_nm</span>         <span class=n>Obama</span><span class=p>,</span> <span class=n>Barack</span>
</span></span><span class=line><span class=cl><span class=n>contbr_nm</span>         <span class=n>ELLMAN</span><span class=p>,</span> <span class=n>IRA</span>
</span></span><span class=line><span class=cl><span class=n>contbr_city</span>             <span class=n>TEMPE</span>
</span></span><span class=line><span class=cl>                    <span class=o>...</span>      
</span></span><span class=line><span class=cl><span class=n>receipt_desc</span>              <span class=n>NaN</span>
</span></span><span class=line><span class=cl><span class=n>memo_cd</span>                   <span class=n>NaN</span>
</span></span><span class=line><span class=cl><span class=n>memo_text</span>                 <span class=n>NaN</span>
</span></span><span class=line><span class=cl><span class=n>form_tp</span>                 <span class=n>SA17A</span>
</span></span><span class=line><span class=cl><span class=n>file_num</span>               <span class=mi>772372</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=mi>123456</span><span class=p>,</span> <span class=n>Length</span><span class=p>:</span> <span class=mi>16</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=nb>object</span></span></span></code></pre></td></tr></table></div></div><p>ä½ å¯èƒ½å·²ç»æƒ³å‡ºäº†è®¸å¤šåŠæ³•ä»è¿™äº›ç«é€‰èµåŠ©æ•°æ®ä¸­æŠ½å–æœ‰å…³èµåŠ©äººå’ŒèµåŠ©æ¨¡å¼çš„ç»Ÿè®¡ä¿¡æ¯ã€‚æˆ‘å°†åœ¨æ¥ä¸‹æ¥çš„å†…å®¹ä¸­ä»‹ç»å‡ ç§ä¸åŒçš„åˆ†æå·¥ä½œï¼ˆè¿ç”¨åˆ°ç›®å‰ä¸ºæ­¢å·²ç»å­¦åˆ°çš„æ–¹æ³•ï¼‰ã€‚</p><p>ä¸éš¾çœ‹å‡ºï¼Œè¯¥æ•°æ®ä¸­æ²¡æœ‰å…šæ´¾ä¿¡æ¯ï¼Œå› æ­¤æœ€å¥½æŠŠå®ƒåŠ è¿›å»ã€‚é€šè¿‡uniqueï¼Œä½ å¯ä»¥è·å–å…¨éƒ¨çš„å€™é€‰äººåå•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-85-1><a class=lnlinks href=#hl-85-1> 1</a>
</span><span class=lnt id=hl-85-2><a class=lnlinks href=#hl-85-2> 2</a>
</span><span class=lnt id=hl-85-3><a class=lnlinks href=#hl-85-3> 3</a>
</span><span class=lnt id=hl-85-4><a class=lnlinks href=#hl-85-4> 4</a>
</span><span class=lnt id=hl-85-5><a class=lnlinks href=#hl-85-5> 5</a>
</span><span class=lnt id=hl-85-6><a class=lnlinks href=#hl-85-6> 6</a>
</span><span class=lnt id=hl-85-7><a class=lnlinks href=#hl-85-7> 7</a>
</span><span class=lnt id=hl-85-8><a class=lnlinks href=#hl-85-8> 8</a>
</span><span class=lnt id=hl-85-9><a class=lnlinks href=#hl-85-9> 9</a>
</span><span class=lnt id=hl-85-10><a class=lnlinks href=#hl-85-10>10</a>
</span><span class=lnt id=hl-85-11><a class=lnlinks href=#hl-85-11>11</a>
</span><span class=lnt id=hl-85-12><a class=lnlinks href=#hl-85-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>187</span><span class=p>]:</span> <span class=n>unique_cands</span> <span class=o>=</span> <span class=n>fec</span><span class=o>.</span><span class=n>cand_nm</span><span class=o>.</span><span class=n>unique</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>188</span><span class=p>]:</span> <span class=n>unique_cands</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>188</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>array</span><span class=p>([</span><span class=s1>&#39;Bachmann, Michelle&#39;</span><span class=p>,</span> <span class=s1>&#39;Romney, Mitt&#39;</span><span class=p>,</span> <span class=s1>&#39;Obama, Barack&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s2>&#34;Roemer, Charles E. &#39;Buddy&#39; III&#34;</span><span class=p>,</span> <span class=s1>&#39;Pawlenty, Timothy&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Johnson, Gary Earl&#39;</span><span class=p>,</span> <span class=s1>&#39;Paul, Ron&#39;</span><span class=p>,</span> <span class=s1>&#39;Santorum, Rick&#39;</span><span class=p>,</span> <span class=s1>&#39;Cain, Herman&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Gingrich, Newt&#39;</span><span class=p>,</span> <span class=s1>&#39;McCotter, Thaddeus G&#39;</span><span class=p>,</span> <span class=s1>&#39;Huntsman, Jon&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Perry, Rick&#39;</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=nb>object</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>189</span><span class=p>]:</span> <span class=n>unique_cands</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>189</span><span class=p>]:</span> <span class=s1>&#39;Obama, Barack&#39;</span></span></span></code></pre></td></tr></table></div></div><p>æŒ‡æ˜å…šæ´¾ä¿¡æ¯çš„æ–¹æ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨å­—å…¸ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-86-1><a class=lnlinks href=#hl-86-1> 1</a>
</span><span class=lnt id=hl-86-2><a class=lnlinks href=#hl-86-2> 2</a>
</span><span class=lnt id=hl-86-3><a class=lnlinks href=#hl-86-3> 3</a>
</span><span class=lnt id=hl-86-4><a class=lnlinks href=#hl-86-4> 4</a>
</span><span class=lnt id=hl-86-5><a class=lnlinks href=#hl-86-5> 5</a>
</span><span class=lnt id=hl-86-6><a class=lnlinks href=#hl-86-6> 6</a>
</span><span class=lnt id=hl-86-7><a class=lnlinks href=#hl-86-7> 7</a>
</span><span class=lnt id=hl-86-8><a class=lnlinks href=#hl-86-8> 8</a>
</span><span class=lnt id=hl-86-9><a class=lnlinks href=#hl-86-9> 9</a>
</span><span class=lnt id=hl-86-10><a class=lnlinks href=#hl-86-10>10</a>
</span><span class=lnt id=hl-86-11><a class=lnlinks href=#hl-86-11>11</a>
</span><span class=lnt id=hl-86-12><a class=lnlinks href=#hl-86-12>12</a>
</span><span class=lnt id=hl-86-13><a class=lnlinks href=#hl-86-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>parties</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;Bachmann, Michelle&#39;</span><span class=p>:</span> <span class=s1>&#39;Republican&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=s1>&#39;Cain, Herman&#39;</span><span class=p>:</span> <span class=s1>&#39;Republican&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=s1>&#39;Gingrich, Newt&#39;</span><span class=p>:</span> <span class=s1>&#39;Republican&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=s1>&#39;Huntsman, Jon&#39;</span><span class=p>:</span> <span class=s1>&#39;Republican&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=s1>&#39;Johnson, Gary Earl&#39;</span><span class=p>:</span> <span class=s1>&#39;Republican&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=s1>&#39;McCotter, Thaddeus G&#39;</span><span class=p>:</span> <span class=s1>&#39;Republican&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=s1>&#39;Obama, Barack&#39;</span><span class=p>:</span> <span class=s1>&#39;Democrat&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=s1>&#39;Paul, Ron&#39;</span><span class=p>:</span> <span class=s1>&#39;Republican&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=s1>&#39;Pawlenty, Timothy&#39;</span><span class=p>:</span> <span class=s1>&#39;Republican&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=s1>&#39;Perry, Rick&#39;</span><span class=p>:</span> <span class=s1>&#39;Republican&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=s2>&#34;Roemer, Charles E. &#39;Buddy&#39; III&#34;</span><span class=p>:</span> <span class=s1>&#39;Republican&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=s1>&#39;Romney, Mitt&#39;</span><span class=p>:</span> <span class=s1>&#39;Republican&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>           <span class=s1>&#39;Santorum, Rick&#39;</span><span class=p>:</span> <span class=s1>&#39;Republican&#39;</span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨ï¼Œé€šè¿‡è¿™ä¸ªæ˜ å°„ä»¥åŠSerieså¯¹è±¡çš„mapæ–¹æ³•ï¼Œä½ å¯ä»¥æ ¹æ®å€™é€‰äººå§“åå¾—åˆ°ä¸€ç»„å…šæ´¾ä¿¡æ¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-87-1><a class=lnlinks href=#hl-87-1> 1</a>
</span><span class=lnt id=hl-87-2><a class=lnlinks href=#hl-87-2> 2</a>
</span><span class=lnt id=hl-87-3><a class=lnlinks href=#hl-87-3> 3</a>
</span><span class=lnt id=hl-87-4><a class=lnlinks href=#hl-87-4> 4</a>
</span><span class=lnt id=hl-87-5><a class=lnlinks href=#hl-87-5> 5</a>
</span><span class=lnt id=hl-87-6><a class=lnlinks href=#hl-87-6> 6</a>
</span><span class=lnt id=hl-87-7><a class=lnlinks href=#hl-87-7> 7</a>
</span><span class=lnt id=hl-87-8><a class=lnlinks href=#hl-87-8> 8</a>
</span><span class=lnt id=hl-87-9><a class=lnlinks href=#hl-87-9> 9</a>
</span><span class=lnt id=hl-87-10><a class=lnlinks href=#hl-87-10>10</a>
</span><span class=lnt id=hl-87-11><a class=lnlinks href=#hl-87-11>11</a>
</span><span class=lnt id=hl-87-12><a class=lnlinks href=#hl-87-12>12</a>
</span><span class=lnt id=hl-87-13><a class=lnlinks href=#hl-87-13>13</a>
</span><span class=lnt id=hl-87-14><a class=lnlinks href=#hl-87-14>14</a>
</span><span class=lnt id=hl-87-15><a class=lnlinks href=#hl-87-15>15</a>
</span><span class=lnt id=hl-87-16><a class=lnlinks href=#hl-87-16>16</a>
</span><span class=lnt id=hl-87-17><a class=lnlinks href=#hl-87-17>17</a>
</span><span class=lnt id=hl-87-18><a class=lnlinks href=#hl-87-18>18</a>
</span><span class=lnt id=hl-87-19><a class=lnlinks href=#hl-87-19>19</a>
</span><span class=lnt id=hl-87-20><a class=lnlinks href=#hl-87-20>20</a>
</span><span class=lnt id=hl-87-21><a class=lnlinks href=#hl-87-21>21</a>
</span><span class=lnt id=hl-87-22><a class=lnlinks href=#hl-87-22>22</a>
</span><span class=lnt id=hl-87-23><a class=lnlinks href=#hl-87-23>23</a>
</span><span class=lnt id=hl-87-24><a class=lnlinks href=#hl-87-24>24</a>
</span><span class=lnt id=hl-87-25><a class=lnlinks href=#hl-87-25>25</a>
</span><span class=lnt id=hl-87-26><a class=lnlinks href=#hl-87-26>26</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>191</span><span class=p>]:</span> <span class=n>fec</span><span class=o>.</span><span class=n>cand_nm</span><span class=p>[</span><span class=mi>123456</span><span class=p>:</span><span class=mi>123461</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>191</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=mi>123456</span>    <span class=n>Obama</span><span class=p>,</span> <span class=n>Barack</span>
</span></span><span class=line><span class=cl><span class=mi>123457</span>    <span class=n>Obama</span><span class=p>,</span> <span class=n>Barack</span>
</span></span><span class=line><span class=cl><span class=mi>123458</span>    <span class=n>Obama</span><span class=p>,</span> <span class=n>Barack</span>
</span></span><span class=line><span class=cl><span class=mi>123459</span>    <span class=n>Obama</span><span class=p>,</span> <span class=n>Barack</span>
</span></span><span class=line><span class=cl><span class=mi>123460</span>    <span class=n>Obama</span><span class=p>,</span> <span class=n>Barack</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>cand_nm</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>192</span><span class=p>]:</span> <span class=n>fec</span><span class=o>.</span><span class=n>cand_nm</span><span class=p>[</span><span class=mi>123456</span><span class=p>:</span><span class=mi>123461</span><span class=p>]</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>parties</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>192</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=mi>123456</span>    <span class=n>Democrat</span>
</span></span><span class=line><span class=cl><span class=mi>123457</span>    <span class=n>Democrat</span>
</span></span><span class=line><span class=cl><span class=mi>123458</span>    <span class=n>Democrat</span>
</span></span><span class=line><span class=cl><span class=mi>123459</span>    <span class=n>Democrat</span>
</span></span><span class=line><span class=cl><span class=mi>123460</span>    <span class=n>Democrat</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>cand_nm</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=nb>object</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Add it as a column</span>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>193</span><span class=p>]:</span> <span class=n>fec</span><span class=p>[</span><span class=s1>&#39;party&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>fec</span><span class=o>.</span><span class=n>cand_nm</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>parties</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>194</span><span class=p>]:</span> <span class=n>fec</span><span class=p>[</span><span class=s1>&#39;party&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>value_counts</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>194</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>Democrat</span>      <span class=mi>593746</span>
</span></span><span class=line><span class=cl><span class=n>Republican</span>    <span class=mi>407985</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>party</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>int64</span></span></span></code></pre></td></tr></table></div></div><p>è¿™é‡Œæœ‰ä¸¤ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ç¬¬ä¸€ï¼Œè¯¥æ•°æ®æ—¢åŒ…æ‹¬èµåŠ©ä¹ŸåŒ…æ‹¬é€€æ¬¾ï¼ˆè´Ÿçš„å‡ºèµ„é¢ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-88-1><a class=lnlinks href=#hl-88-1>1</a>
</span><span class=lnt id=hl-88-2><a class=lnlinks href=#hl-88-2>2</a>
</span><span class=lnt id=hl-88-3><a class=lnlinks href=#hl-88-3>3</a>
</span><span class=lnt id=hl-88-4><a class=lnlinks href=#hl-88-4>4</a>
</span><span class=lnt id=hl-88-5><a class=lnlinks href=#hl-88-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>195</span><span class=p>]:</span> <span class=p>(</span><span class=n>fec</span><span class=o>.</span><span class=n>contb_receipt_amt</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span><span class=o>.</span><span class=n>value_counts</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>195</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=kc>True</span>     <span class=mi>991475</span>
</span></span><span class=line><span class=cl><span class=kc>False</span>     <span class=mi>10256</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>contb_receipt_amt</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>int64</span></span></span></code></pre></td></tr></table></div></div><p>ä¸ºäº†ç®€åŒ–åˆ†æè¿‡ç¨‹ï¼Œæˆ‘é™å®šè¯¥æ•°æ®é›†åªèƒ½æœ‰æ­£çš„å‡ºèµ„é¢ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-89-1><a class=lnlinks href=#hl-89-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>196</span><span class=p>]:</span> <span class=n>fec</span> <span class=o>=</span> <span class=n>fec</span><span class=p>[</span><span class=n>fec</span><span class=o>.</span><span class=n>contb_receipt_amt</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>ç”±äºBarack Obamaå’ŒMitt Romneyæ˜¯æœ€ä¸»è¦çš„ä¸¤åå€™é€‰äººï¼Œæ‰€ä»¥æˆ‘è¿˜ä¸“é—¨å‡†å¤‡äº†ä¸€ä¸ªå­é›†ï¼ŒåªåŒ…å«é’ˆå¯¹ä»–ä»¬ä¸¤äººçš„ç«é€‰æ´»åŠ¨çš„èµåŠ©ä¿¡æ¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-90-1><a class=lnlinks href=#hl-90-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>197</span><span class=p>]:</span> <span class=n>fec_mrbo</span> <span class=o>=</span> <span class=n>fec</span><span class=p>[</span><span class=n>fec</span><span class=o>.</span><span class=n>cand_nm</span><span class=o>.</span><span class=n>isin</span><span class=p>([</span><span class=s1>&#39;Obama, Barack&#39;</span><span class=p>,</span><span class=s1>&#39;Romney, Mitt&#39;</span><span class=p>])]</span></span></span></code></pre></td></tr></table></div></div><h3 id=1451-æ ¹æ®èŒä¸šå’Œé›‡ä¸»ç»Ÿè®¡èµåŠ©ä¿¡æ¯>14.5.1 æ ¹æ®èŒä¸šå’Œé›‡ä¸»ç»Ÿè®¡èµåŠ©ä¿¡æ¯
<a class=header-anchor href=#1451-%e6%a0%b9%e6%8d%ae%e8%81%8c%e4%b8%9a%e5%92%8c%e9%9b%87%e4%b8%bb%e7%bb%9f%e8%ae%a1%e8%b5%9e%e5%8a%a9%e4%bf%a1%e6%81%af></a></h3><p>åŸºäºèŒä¸šçš„èµåŠ©ä¿¡æ¯ç»Ÿè®¡æ˜¯å¦ä¸€ç§ç»å¸¸è¢«ç ”ç©¶çš„ç»Ÿè®¡ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œå¾‹å¸ˆä»¬æ›´å€¾å‘äºèµ„åŠ©æ°‘ä¸»å…šï¼Œè€Œä¼ä¸šä¸»åˆ™æ›´å€¾å‘äºèµ„åŠ©å…±å’Œå…šã€‚ä½ å¯ä»¥ä¸ç›¸ä¿¡æˆ‘ï¼Œè‡ªå·±çœ‹é‚£äº›æ•°æ®å°±çŸ¥é“äº†ã€‚é¦–å…ˆï¼Œæ ¹æ®èŒä¸šè®¡ç®—å‡ºèµ„æ€»é¢ï¼Œè¿™å¾ˆç®€å•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-91-1><a class=lnlinks href=#hl-91-1> 1</a>
</span><span class=lnt id=hl-91-2><a class=lnlinks href=#hl-91-2> 2</a>
</span><span class=lnt id=hl-91-3><a class=lnlinks href=#hl-91-3> 3</a>
</span><span class=lnt id=hl-91-4><a class=lnlinks href=#hl-91-4> 4</a>
</span><span class=lnt id=hl-91-5><a class=lnlinks href=#hl-91-5> 5</a>
</span><span class=lnt id=hl-91-6><a class=lnlinks href=#hl-91-6> 6</a>
</span><span class=lnt id=hl-91-7><a class=lnlinks href=#hl-91-7> 7</a>
</span><span class=lnt id=hl-91-8><a class=lnlinks href=#hl-91-8> 8</a>
</span><span class=lnt id=hl-91-9><a class=lnlinks href=#hl-91-9> 9</a>
</span><span class=lnt id=hl-91-10><a class=lnlinks href=#hl-91-10>10</a>
</span><span class=lnt id=hl-91-11><a class=lnlinks href=#hl-91-11>11</a>
</span><span class=lnt id=hl-91-12><a class=lnlinks href=#hl-91-12>12</a>
</span><span class=lnt id=hl-91-13><a class=lnlinks href=#hl-91-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>198</span><span class=p>]:</span> <span class=n>fec</span><span class=o>.</span><span class=n>contbr_occupation</span><span class=o>.</span><span class=n>value_counts</span><span class=p>()[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>198</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>RETIRED</span>                                   <span class=mi>233990</span>
</span></span><span class=line><span class=cl><span class=n>INFORMATION</span> <span class=n>REQUESTED</span>                      <span class=mi>35107</span>
</span></span><span class=line><span class=cl><span class=n>ATTORNEY</span>                                   <span class=mi>34286</span>
</span></span><span class=line><span class=cl><span class=n>HOMEMAKER</span>                                  <span class=mi>29931</span>
</span></span><span class=line><span class=cl><span class=n>PHYSICIAN</span>                                  <span class=mi>23432</span>
</span></span><span class=line><span class=cl><span class=n>INFORMATION</span> <span class=n>REQUESTED</span> <span class=n>PER</span> <span class=n>BEST</span> <span class=n>EFFORTS</span>     <span class=mi>21138</span>
</span></span><span class=line><span class=cl><span class=n>ENGINEER</span>                                   <span class=mi>14334</span>
</span></span><span class=line><span class=cl><span class=n>TEACHER</span>                                    <span class=mi>13990</span>
</span></span><span class=line><span class=cl><span class=n>CONSULTANT</span>                                 <span class=mi>13273</span>
</span></span><span class=line><span class=cl><span class=n>PROFESSOR</span>                                  <span class=mi>12555</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>contbr_occupation</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>int64</span></span></span></code></pre></td></tr></table></div></div><p>ä¸éš¾çœ‹å‡ºï¼Œè®¸å¤šèŒä¸šéƒ½æ¶‰åŠç›¸åŒçš„åŸºæœ¬å·¥ä½œç±»å‹ï¼Œæˆ–è€…åŒä¸€æ ·ä¸œè¥¿æœ‰å¤šç§å˜ä½“ã€‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µå¯ä»¥æ¸…ç†ä¸€äº›è¿™æ ·çš„æ•°æ®ï¼ˆå°†ä¸€ä¸ªèŒä¸šä¿¡æ¯æ˜ å°„åˆ°å¦ä¸€ä¸ªï¼‰ã€‚æ³¨æ„ï¼Œè¿™é‡Œå·§å¦™åœ°åˆ©ç”¨äº†dict.getï¼Œå®ƒå…è®¸æ²¡æœ‰æ˜ å°„å…³ç³»çš„èŒä¸šä¹Ÿèƒ½â€œé€šè¿‡â€ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-92-1><a class=lnlinks href=#hl-92-1> 1</a>
</span><span class=lnt id=hl-92-2><a class=lnlinks href=#hl-92-2> 2</a>
</span><span class=lnt id=hl-92-3><a class=lnlinks href=#hl-92-3> 3</a>
</span><span class=lnt id=hl-92-4><a class=lnlinks href=#hl-92-4> 4</a>
</span><span class=lnt id=hl-92-5><a class=lnlinks href=#hl-92-5> 5</a>
</span><span class=lnt id=hl-92-6><a class=lnlinks href=#hl-92-6> 6</a>
</span><span class=lnt id=hl-92-7><a class=lnlinks href=#hl-92-7> 7</a>
</span><span class=lnt id=hl-92-8><a class=lnlinks href=#hl-92-8> 8</a>
</span><span class=lnt id=hl-92-9><a class=lnlinks href=#hl-92-9> 9</a>
</span><span class=lnt id=hl-92-10><a class=lnlinks href=#hl-92-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>occ_mapping</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=s1>&#39;INFORMATION REQUESTED PER BEST EFFORTS&#39;</span> <span class=p>:</span> <span class=s1>&#39;NOT PROVIDED&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=s1>&#39;INFORMATION REQUESTED&#39;</span> <span class=p>:</span> <span class=s1>&#39;NOT PROVIDED&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=s1>&#39;INFORMATION REQUESTED (BEST EFFORTS)&#39;</span> <span class=p>:</span> <span class=s1>&#39;NOT PROVIDED&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=s1>&#39;C.E.O.&#39;</span><span class=p>:</span> <span class=s1>&#39;CEO&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># If no mapping provided, return x</span>
</span></span><span class=line><span class=cl><span class=n>f</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>occ_mapping</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fec</span><span class=o>.</span><span class=n>contbr_occupation</span> <span class=o>=</span> <span class=n>fec</span><span class=o>.</span><span class=n>contbr_occupation</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>f</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>æˆ‘å¯¹é›‡ä¸»ä¿¡æ¯ä¹Ÿè¿›è¡Œäº†åŒæ ·çš„å¤„ç†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-93-1><a class=lnlinks href=#hl-93-1> 1</a>
</span><span class=lnt id=hl-93-2><a class=lnlinks href=#hl-93-2> 2</a>
</span><span class=lnt id=hl-93-3><a class=lnlinks href=#hl-93-3> 3</a>
</span><span class=lnt id=hl-93-4><a class=lnlinks href=#hl-93-4> 4</a>
</span><span class=lnt id=hl-93-5><a class=lnlinks href=#hl-93-5> 5</a>
</span><span class=lnt id=hl-93-6><a class=lnlinks href=#hl-93-6> 6</a>
</span><span class=lnt id=hl-93-7><a class=lnlinks href=#hl-93-7> 7</a>
</span><span class=lnt id=hl-93-8><a class=lnlinks href=#hl-93-8> 8</a>
</span><span class=lnt id=hl-93-9><a class=lnlinks href=#hl-93-9> 9</a>
</span><span class=lnt id=hl-93-10><a class=lnlinks href=#hl-93-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>emp_mapping</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=s1>&#39;INFORMATION REQUESTED PER BEST EFFORTS&#39;</span> <span class=p>:</span> <span class=s1>&#39;NOT PROVIDED&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=s1>&#39;INFORMATION REQUESTED&#39;</span> <span class=p>:</span> <span class=s1>&#39;NOT PROVIDED&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=s1>&#39;SELF&#39;</span> <span class=p>:</span> <span class=s1>&#39;SELF-EMPLOYED&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=s1>&#39;SELF EMPLOYED&#39;</span> <span class=p>:</span> <span class=s1>&#39;SELF-EMPLOYED&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># If no mapping provided, return x</span>
</span></span><span class=line><span class=cl><span class=n>f</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>emp_mapping</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fec</span><span class=o>.</span><span class=n>contbr_employer</span> <span class=o>=</span> <span class=n>fec</span><span class=o>.</span><span class=n>contbr_employer</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>f</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡pivot_tableæ ¹æ®å…šæ´¾å’ŒèŒä¸šå¯¹æ•°æ®è¿›è¡Œèšåˆï¼Œç„¶åè¿‡æ»¤æ‰æ€»å‡ºèµ„é¢ä¸è¶³200ä¸‡ç¾å…ƒçš„æ•°æ®ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-94-1><a class=lnlinks href=#hl-94-1> 1</a>
</span><span class=lnt id=hl-94-2><a class=lnlinks href=#hl-94-2> 2</a>
</span><span class=lnt id=hl-94-3><a class=lnlinks href=#hl-94-3> 3</a>
</span><span class=lnt id=hl-94-4><a class=lnlinks href=#hl-94-4> 4</a>
</span><span class=lnt id=hl-94-5><a class=lnlinks href=#hl-94-5> 5</a>
</span><span class=lnt id=hl-94-6><a class=lnlinks href=#hl-94-6> 6</a>
</span><span class=lnt id=hl-94-7><a class=lnlinks href=#hl-94-7> 7</a>
</span><span class=lnt id=hl-94-8><a class=lnlinks href=#hl-94-8> 8</a>
</span><span class=lnt id=hl-94-9><a class=lnlinks href=#hl-94-9> 9</a>
</span><span class=lnt id=hl-94-10><a class=lnlinks href=#hl-94-10>10</a>
</span><span class=lnt id=hl-94-11><a class=lnlinks href=#hl-94-11>11</a>
</span><span class=lnt id=hl-94-12><a class=lnlinks href=#hl-94-12>12</a>
</span><span class=lnt id=hl-94-13><a class=lnlinks href=#hl-94-13>13</a>
</span><span class=lnt id=hl-94-14><a class=lnlinks href=#hl-94-14>14</a>
</span><span class=lnt id=hl-94-15><a class=lnlinks href=#hl-94-15>15</a>
</span><span class=lnt id=hl-94-16><a class=lnlinks href=#hl-94-16>16</a>
</span><span class=lnt id=hl-94-17><a class=lnlinks href=#hl-94-17>17</a>
</span><span class=lnt id=hl-94-18><a class=lnlinks href=#hl-94-18>18</a>
</span><span class=lnt id=hl-94-19><a class=lnlinks href=#hl-94-19>19</a>
</span><span class=lnt id=hl-94-20><a class=lnlinks href=#hl-94-20>20</a>
</span><span class=lnt id=hl-94-21><a class=lnlinks href=#hl-94-21>21</a>
</span><span class=lnt id=hl-94-22><a class=lnlinks href=#hl-94-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>201</span><span class=p>]:</span> <span class=n>by_occupation</span> <span class=o>=</span> <span class=n>fec</span><span class=o>.</span><span class=n>pivot_table</span><span class=p>(</span><span class=s1>&#39;contb_receipt_amt&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>.....</span><span class=p>:</span>                                 <span class=n>index</span><span class=o>=</span><span class=s1>&#39;contbr_occupation&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>.....</span><span class=p>:</span>                                 <span class=n>columns</span><span class=o>=</span><span class=s1>&#39;party&#39;</span><span class=p>,</span> <span class=n>aggfunc</span><span class=o>=</span><span class=s1>&#39;sum&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>202</span><span class=p>]:</span> <span class=n>over_2mm</span> <span class=o>=</span> <span class=n>by_occupation</span><span class=p>[</span><span class=n>by_occupation</span><span class=o>.</span><span class=n>sum</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>2000000</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>203</span><span class=p>]:</span> <span class=n>over_2mm</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>203</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>party</span>                 <span class=n>Democrat</span>    <span class=n>Republican</span>
</span></span><span class=line><span class=cl><span class=n>contbr_occupation</span>                           
</span></span><span class=line><span class=cl><span class=n>ATTORNEY</span>           <span class=mf>11141982.97</span>  <span class=mf>7.477194e+06</span>
</span></span><span class=line><span class=cl><span class=n>CEO</span>                 <span class=mf>2074974.79</span>  <span class=mf>4.211041e+06</span>
</span></span><span class=line><span class=cl><span class=n>CONSULTANT</span>          <span class=mf>2459912.71</span>  <span class=mf>2.544725e+06</span>
</span></span><span class=line><span class=cl><span class=n>ENGINEER</span>             <span class=mf>951525.55</span>  <span class=mf>1.818374e+06</span>
</span></span><span class=line><span class=cl><span class=n>EXECUTIVE</span>           <span class=mf>1355161.05</span>  <span class=mf>4.138850e+06</span>
</span></span><span class=line><span class=cl><span class=o>...</span>                        <span class=o>...</span>           <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=n>PRESIDENT</span>           <span class=mf>1878509.95</span>  <span class=mf>4.720924e+06</span>
</span></span><span class=line><span class=cl><span class=n>PROFESSOR</span>           <span class=mf>2165071.08</span>  <span class=mf>2.967027e+05</span>
</span></span><span class=line><span class=cl><span class=n>REAL</span> <span class=n>ESTATE</span>          <span class=mf>528902.09</span>  <span class=mf>1.625902e+06</span>
</span></span><span class=line><span class=cl><span class=n>RETIRED</span>            <span class=mf>25305116.38</span>  <span class=mf>2.356124e+07</span>
</span></span><span class=line><span class=cl><span class=n>SELF</span><span class=o>-</span><span class=n>EMPLOYED</span>        <span class=mf>672393.40</span>  <span class=mf>1.640253e+06</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=mi>17</span> <span class=n>rows</span> <span class=n>x</span> <span class=mi>2</span> <span class=n>columns</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>æŠŠè¿™äº›æ•°æ®åšæˆæŸ±çŠ¶å›¾çœ‹èµ·æ¥ä¼šæ›´åŠ æ¸…æ¥šï¼ˆ&lsquo;barh&rsquo;è¡¨ç¤ºæ°´å¹³æŸ±çŠ¶å›¾ï¼Œå¦‚å›¾14-12æ‰€ç¤ºï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-95-1><a class=lnlinks href=#hl-95-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>205</span><span class=p>]:</span> <span class=n>over_2mm</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s1>&#39;barh&#39;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://gitee.com/wugenqiang/images/raw/master/02/1240-20201031180453918.png alt="å›¾14-12 å¯¹å„å…šæ´¾æ€»å‡ºèµ„é¢æœ€é«˜çš„èŒä¸š"></p><p>ä½ å¯èƒ½è¿˜æƒ³äº†è§£ä¸€ä¸‹å¯¹Obamaå’ŒRomneyæ€»å‡ºèµ„é¢æœ€é«˜çš„èŒä¸šå’Œä¼ä¸šã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å…ˆå¯¹å€™é€‰äººè¿›è¡Œåˆ†ç»„ï¼Œç„¶åä½¿ç”¨æœ¬ç« å‰é¢ä»‹ç»çš„ç±»ä¼¼topçš„æ–¹æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-96-1><a class=lnlinks href=#hl-96-1>1</a>
</span><span class=lnt id=hl-96-2><a class=lnlinks href=#hl-96-2>2</a>
</span><span class=lnt id=hl-96-3><a class=lnlinks href=#hl-96-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_top_amounts</span><span class=p>(</span><span class=n>group</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>totals</span> <span class=o>=</span> <span class=n>group</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=n>key</span><span class=p>)[</span><span class=s1>&#39;contb_receipt_amt&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>totals</span><span class=o>.</span><span class=n>nlargest</span><span class=p>(</span><span class=n>n</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>ç„¶åæ ¹æ®èŒä¸šå’Œé›‡ä¸»è¿›è¡Œèšåˆï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-97-1><a class=lnlinks href=#hl-97-1> 1</a>
</span><span class=lnt id=hl-97-2><a class=lnlinks href=#hl-97-2> 2</a>
</span><span class=lnt id=hl-97-3><a class=lnlinks href=#hl-97-3> 3</a>
</span><span class=lnt id=hl-97-4><a class=lnlinks href=#hl-97-4> 4</a>
</span><span class=lnt id=hl-97-5><a class=lnlinks href=#hl-97-5> 5</a>
</span><span class=lnt id=hl-97-6><a class=lnlinks href=#hl-97-6> 6</a>
</span><span class=lnt id=hl-97-7><a class=lnlinks href=#hl-97-7> 7</a>
</span><span class=lnt id=hl-97-8><a class=lnlinks href=#hl-97-8> 8</a>
</span><span class=lnt id=hl-97-9><a class=lnlinks href=#hl-97-9> 9</a>
</span><span class=lnt id=hl-97-10><a class=lnlinks href=#hl-97-10>10</a>
</span><span class=lnt id=hl-97-11><a class=lnlinks href=#hl-97-11>11</a>
</span><span class=lnt id=hl-97-12><a class=lnlinks href=#hl-97-12>12</a>
</span><span class=lnt id=hl-97-13><a class=lnlinks href=#hl-97-13>13</a>
</span><span class=lnt id=hl-97-14><a class=lnlinks href=#hl-97-14>14</a>
</span><span class=lnt id=hl-97-15><a class=lnlinks href=#hl-97-15>15</a>
</span><span class=lnt id=hl-97-16><a class=lnlinks href=#hl-97-16>16</a>
</span><span class=lnt id=hl-97-17><a class=lnlinks href=#hl-97-17>17</a>
</span><span class=lnt id=hl-97-18><a class=lnlinks href=#hl-97-18>18</a>
</span><span class=lnt id=hl-97-19><a class=lnlinks href=#hl-97-19>19</a>
</span><span class=lnt id=hl-97-20><a class=lnlinks href=#hl-97-20>20</a>
</span><span class=lnt id=hl-97-21><a class=lnlinks href=#hl-97-21>21</a>
</span><span class=lnt id=hl-97-22><a class=lnlinks href=#hl-97-22>22</a>
</span><span class=lnt id=hl-97-23><a class=lnlinks href=#hl-97-23>23</a>
</span><span class=lnt id=hl-97-24><a class=lnlinks href=#hl-97-24>24</a>
</span><span class=lnt id=hl-97-25><a class=lnlinks href=#hl-97-25>25</a>
</span><span class=lnt id=hl-97-26><a class=lnlinks href=#hl-97-26>26</a>
</span><span class=lnt id=hl-97-27><a class=lnlinks href=#hl-97-27>27</a>
</span><span class=lnt id=hl-97-28><a class=lnlinks href=#hl-97-28>28</a>
</span><span class=lnt id=hl-97-29><a class=lnlinks href=#hl-97-29>29</a>
</span><span class=lnt id=hl-97-30><a class=lnlinks href=#hl-97-30>30</a>
</span><span class=lnt id=hl-97-31><a class=lnlinks href=#hl-97-31>31</a>
</span><span class=lnt id=hl-97-32><a class=lnlinks href=#hl-97-32>32</a>
</span><span class=lnt id=hl-97-33><a class=lnlinks href=#hl-97-33>33</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>207</span><span class=p>]:</span> <span class=n>grouped</span> <span class=o>=</span> <span class=n>fec_mrbo</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;cand_nm&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>208</span><span class=p>]:</span> <span class=n>grouped</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>get_top_amounts</span><span class=p>,</span> <span class=s1>&#39;contbr_occupation&#39;</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=mi>7</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>208</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>cand_nm</span>        <span class=n>contbr_occupation</span>    
</span></span><span class=line><span class=cl><span class=n>Obama</span><span class=p>,</span> <span class=n>Barack</span>  <span class=n>RETIRED</span>                  <span class=mf>25305116.38</span>
</span></span><span class=line><span class=cl>               <span class=n>ATTORNEY</span>                 <span class=mf>11141982.97</span>
</span></span><span class=line><span class=cl>               <span class=n>INFORMATION</span> <span class=n>REQUESTED</span>     <span class=mf>4866973.96</span>
</span></span><span class=line><span class=cl>               <span class=n>HOMEMAKER</span>                 <span class=mf>4248875.80</span>
</span></span><span class=line><span class=cl>               <span class=n>PHYSICIAN</span>                 <span class=mf>3735124.94</span>
</span></span><span class=line><span class=cl>                                           <span class=o>...</span>     
</span></span><span class=line><span class=cl><span class=n>Romney</span><span class=p>,</span> <span class=n>Mitt</span>   <span class=n>HOMEMAKER</span>                 <span class=mf>8147446.22</span>
</span></span><span class=line><span class=cl>               <span class=n>ATTORNEY</span>                  <span class=mf>5364718.82</span>
</span></span><span class=line><span class=cl>               <span class=n>PRESIDENT</span>                 <span class=mf>2491244.89</span>
</span></span><span class=line><span class=cl>               <span class=n>EXECUTIVE</span>                 <span class=mf>2300947.03</span>
</span></span><span class=line><span class=cl>               <span class=n>C</span><span class=o>.</span><span class=n>E</span><span class=o>.</span><span class=n>O</span><span class=o>.</span>                    <span class=mf>1968386.11</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>contb_receipt_amt</span><span class=p>,</span> <span class=n>Length</span><span class=p>:</span> <span class=mi>14</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>float64</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>209</span><span class=p>]:</span> <span class=n>grouped</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>get_top_amounts</span><span class=p>,</span> <span class=s1>&#39;contbr_employer&#39;</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>209</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>cand_nm</span>        <span class=n>contbr_employer</span>      
</span></span><span class=line><span class=cl><span class=n>Obama</span><span class=p>,</span> <span class=n>Barack</span>  <span class=n>RETIRED</span>                  <span class=mf>22694358.85</span>
</span></span><span class=line><span class=cl>               <span class=n>SELF</span><span class=o>-</span><span class=n>EMPLOYED</span>            <span class=mf>17080985.96</span>
</span></span><span class=line><span class=cl>               <span class=n>NOT</span> <span class=n>EMPLOYED</span>              <span class=mf>8586308.70</span>
</span></span><span class=line><span class=cl>               <span class=n>INFORMATION</span> <span class=n>REQUESTED</span>     <span class=mf>5053480.37</span>
</span></span><span class=line><span class=cl>               <span class=n>HOMEMAKER</span>                 <span class=mf>2605408.54</span>
</span></span><span class=line><span class=cl>                                           <span class=o>...</span>     
</span></span><span class=line><span class=cl><span class=n>Romney</span><span class=p>,</span> <span class=n>Mitt</span>   <span class=n>CREDIT</span> <span class=n>SUISSE</span>              <span class=mf>281150.00</span>
</span></span><span class=line><span class=cl>               <span class=n>MORGAN</span> <span class=n>STANLEY</span>             <span class=mf>267266.00</span>
</span></span><span class=line><span class=cl>               <span class=n>GOLDMAN</span> <span class=n>SACH</span> <span class=o>&amp;</span> <span class=n>CO</span><span class=o>.</span>         <span class=mf>238250.00</span>
</span></span><span class=line><span class=cl>               <span class=n>BARCLAYS</span> <span class=n>CAPITAL</span>           <span class=mf>162750.00</span>
</span></span><span class=line><span class=cl>               <span class=n>H</span><span class=o>.</span><span class=n>I</span><span class=o>.</span><span class=n>G</span><span class=o>.</span> <span class=n>CAPITAL</span>             <span class=mf>139500.00</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>contb_receipt_amt</span><span class=p>,</span> <span class=n>Length</span><span class=p>:</span> <span class=mi>20</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>float64</span></span></span></code></pre></td></tr></table></div></div><h3 id=1452-å¯¹å‡ºèµ„é¢åˆ†ç»„>14.5.2 å¯¹å‡ºèµ„é¢åˆ†ç»„
<a class=header-anchor href=#1452-%e5%af%b9%e5%87%ba%e8%b5%84%e9%a2%9d%e5%88%86%e7%bb%84></a></h3><p>è¿˜å¯ä»¥å¯¹è¯¥æ•°æ®åšå¦ä¸€ç§éå¸¸å®ç”¨çš„åˆ†æï¼šåˆ©ç”¨cutå‡½æ•°æ ¹æ®å‡ºèµ„é¢çš„å¤§å°å°†æ•°æ®ç¦»æ•£åŒ–åˆ°å¤šä¸ªé¢å…ƒä¸­ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-98-1><a class=lnlinks href=#hl-98-1> 1</a>
</span><span class=lnt id=hl-98-2><a class=lnlinks href=#hl-98-2> 2</a>
</span><span class=lnt id=hl-98-3><a class=lnlinks href=#hl-98-3> 3</a>
</span><span class=lnt id=hl-98-4><a class=lnlinks href=#hl-98-4> 4</a>
</span><span class=lnt id=hl-98-5><a class=lnlinks href=#hl-98-5> 5</a>
</span><span class=lnt id=hl-98-6><a class=lnlinks href=#hl-98-6> 6</a>
</span><span class=lnt id=hl-98-7><a class=lnlinks href=#hl-98-7> 7</a>
</span><span class=lnt id=hl-98-8><a class=lnlinks href=#hl-98-8> 8</a>
</span><span class=lnt id=hl-98-9><a class=lnlinks href=#hl-98-9> 9</a>
</span><span class=lnt id=hl-98-10><a class=lnlinks href=#hl-98-10>10</a>
</span><span class=lnt id=hl-98-11><a class=lnlinks href=#hl-98-11>11</a>
</span><span class=lnt id=hl-98-12><a class=lnlinks href=#hl-98-12>12</a>
</span><span class=lnt id=hl-98-13><a class=lnlinks href=#hl-98-13>13</a>
</span><span class=lnt id=hl-98-14><a class=lnlinks href=#hl-98-14>14</a>
</span><span class=lnt id=hl-98-15><a class=lnlinks href=#hl-98-15>15</a>
</span><span class=lnt id=hl-98-16><a class=lnlinks href=#hl-98-16>16</a>
</span><span class=lnt id=hl-98-17><a class=lnlinks href=#hl-98-17>17</a>
</span><span class=lnt id=hl-98-18><a class=lnlinks href=#hl-98-18>18</a>
</span><span class=lnt id=hl-98-19><a class=lnlinks href=#hl-98-19>19</a>
</span><span class=lnt id=hl-98-20><a class=lnlinks href=#hl-98-20>20</a>
</span><span class=lnt id=hl-98-21><a class=lnlinks href=#hl-98-21>21</a>
</span><span class=lnt id=hl-98-22><a class=lnlinks href=#hl-98-22>22</a>
</span><span class=lnt id=hl-98-23><a class=lnlinks href=#hl-98-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>210</span><span class=p>]:</span> <span class=n>bins</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=mi>1000</span><span class=p>,</span> <span class=mi>10000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=o>.....</span><span class=p>:</span>                  <span class=mi>100000</span><span class=p>,</span> <span class=mi>1000000</span><span class=p>,</span> <span class=mi>10000000</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>211</span><span class=p>]:</span> <span class=n>labels</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>cut</span><span class=p>(</span><span class=n>fec_mrbo</span><span class=o>.</span><span class=n>contb_receipt_amt</span><span class=p>,</span> <span class=n>bins</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>212</span><span class=p>]:</span> <span class=n>labels</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>212</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=mi>411</span>         <span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>100</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>412</span>       <span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>1000</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>413</span>       <span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>1000</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>414</span>         <span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>100</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>415</span>         <span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>100</span><span class=p>]</span>
</span></span><span class=line><span class=cl>             <span class=o>...</span>     
</span></span><span class=line><span class=cl><span class=mi>701381</span>      <span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>100</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>701382</span>    <span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>1000</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>701383</span>        <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>701384</span>      <span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>100</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>701385</span>    <span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>1000</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Name</span><span class=p>:</span> <span class=n>contb_receipt_amt</span><span class=p>,</span> <span class=n>Length</span><span class=p>:</span> <span class=mi>694282</span><span class=p>,</span> <span class=n>dtype</span><span class=p>:</span> <span class=n>category</span>
</span></span><span class=line><span class=cl><span class=n>Categories</span> <span class=p>(</span><span class=mi>8</span><span class=p>,</span> <span class=n>interval</span><span class=p>[</span><span class=n>int64</span><span class=p>]):</span> <span class=p>[(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span> <span class=o>&lt;</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span> <span class=o>&lt;</span> <span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>100</span><span class=p>]</span> <span class=o>&lt;</span> <span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>1000</span><span class=p>]</span> <span class=o>&lt;</span> <span class=p>(</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=mi>000</span><span class=p>,</span> <span class=mi>10000</span><span class=p>]</span> <span class=o>&lt;</span>
</span></span><span class=line><span class=cl>                                  <span class=p>(</span><span class=mi>10000</span><span class=p>,</span> <span class=mi>100000</span><span class=p>]</span> <span class=o>&lt;</span> <span class=p>(</span><span class=mi>100000</span><span class=p>,</span> <span class=mi>1000000</span><span class=p>]</span> <span class=o>&lt;</span> <span class=p>(</span><span class=mi>1000000</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=mi>10000000</span><span class=p>]]</span></span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨å¯ä»¥æ ¹æ®å€™é€‰äººå§“åä»¥åŠé¢å…ƒæ ‡ç­¾å¯¹å¥¥å·´é©¬å’Œç½—å§†å°¼æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œä»¥å¾—åˆ°ä¸€ä¸ªæŸ±çŠ¶å›¾ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-99-1><a class=lnlinks href=#hl-99-1> 1</a>
</span><span class=lnt id=hl-99-2><a class=lnlinks href=#hl-99-2> 2</a>
</span><span class=lnt id=hl-99-3><a class=lnlinks href=#hl-99-3> 3</a>
</span><span class=lnt id=hl-99-4><a class=lnlinks href=#hl-99-4> 4</a>
</span><span class=lnt id=hl-99-5><a class=lnlinks href=#hl-99-5> 5</a>
</span><span class=lnt id=hl-99-6><a class=lnlinks href=#hl-99-6> 6</a>
</span><span class=lnt id=hl-99-7><a class=lnlinks href=#hl-99-7> 7</a>
</span><span class=lnt id=hl-99-8><a class=lnlinks href=#hl-99-8> 8</a>
</span><span class=lnt id=hl-99-9><a class=lnlinks href=#hl-99-9> 9</a>
</span><span class=lnt id=hl-99-10><a class=lnlinks href=#hl-99-10>10</a>
</span><span class=lnt id=hl-99-11><a class=lnlinks href=#hl-99-11>11</a>
</span><span class=lnt id=hl-99-12><a class=lnlinks href=#hl-99-12>12</a>
</span><span class=lnt id=hl-99-13><a class=lnlinks href=#hl-99-13>13</a>
</span><span class=lnt id=hl-99-14><a class=lnlinks href=#hl-99-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>213</span><span class=p>]:</span> <span class=n>grouped</span> <span class=o>=</span> <span class=n>fec_mrbo</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;cand_nm&#39;</span><span class=p>,</span> <span class=n>labels</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>214</span><span class=p>]:</span> <span class=n>grouped</span><span class=o>.</span><span class=n>size</span><span class=p>()</span><span class=o>.</span><span class=n>unstack</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>214</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>cand_nm</span>              <span class=n>Obama</span><span class=p>,</span> <span class=n>Barack</span>  <span class=n>Romney</span><span class=p>,</span> <span class=n>Mitt</span>
</span></span><span class=line><span class=cl><span class=n>contb_receipt_amt</span>                               
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span>                       <span class=mf>493.0</span>          <span class=mf>77.0</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span>                    <span class=mf>40070.0</span>        <span class=mf>3681.0</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>100</span><span class=p>]</span>                 <span class=mf>372280.0</span>       <span class=mf>31853.0</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>1000</span><span class=p>]</span>               <span class=mf>153991.0</span>       <span class=mf>43357.0</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>1000</span><span class=p>,</span> <span class=mi>10000</span><span class=p>]</span>              <span class=mf>22284.0</span>       <span class=mf>26186.0</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>10000</span><span class=p>,</span> <span class=mi>100000</span><span class=p>]</span>                <span class=mf>2.0</span>           <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>100000</span><span class=p>,</span> <span class=mi>1000000</span><span class=p>]</span>              <span class=mf>3.0</span>           <span class=n>NaN</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>1000000</span><span class=p>,</span> <span class=mi>10000000</span><span class=p>]</span>            <span class=mf>4.0</span>           <span class=n>NaN</span></span></span></code></pre></td></tr></table></div></div><p>ä»è¿™ä¸ªæ•°æ®ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨å°é¢èµåŠ©æ–¹é¢ï¼ŒObamaè·å¾—çš„æ•°é‡æ¯”Romneyå¤šå¾—å¤šã€‚ä½ è¿˜å¯ä»¥å¯¹å‡ºèµ„é¢æ±‚å’Œå¹¶åœ¨é¢å…ƒå†…è§„æ ¼åŒ–ï¼Œä»¥ä¾¿å›¾å½¢åŒ–æ˜¾ç¤ºä¸¤ä½å€™é€‰äººå„ç§èµåŠ©é¢åº¦çš„æ¯”ä¾‹ï¼ˆè§å›¾14-13ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-100-1><a class=lnlinks href=#hl-100-1> 1</a>
</span><span class=lnt id=hl-100-2><a class=lnlinks href=#hl-100-2> 2</a>
</span><span class=lnt id=hl-100-3><a class=lnlinks href=#hl-100-3> 3</a>
</span><span class=lnt id=hl-100-4><a class=lnlinks href=#hl-100-4> 4</a>
</span><span class=lnt id=hl-100-5><a class=lnlinks href=#hl-100-5> 5</a>
</span><span class=lnt id=hl-100-6><a class=lnlinks href=#hl-100-6> 6</a>
</span><span class=lnt id=hl-100-7><a class=lnlinks href=#hl-100-7> 7</a>
</span><span class=lnt id=hl-100-8><a class=lnlinks href=#hl-100-8> 8</a>
</span><span class=lnt id=hl-100-9><a class=lnlinks href=#hl-100-9> 9</a>
</span><span class=lnt id=hl-100-10><a class=lnlinks href=#hl-100-10>10</a>
</span><span class=lnt id=hl-100-11><a class=lnlinks href=#hl-100-11>11</a>
</span><span class=lnt id=hl-100-12><a class=lnlinks href=#hl-100-12>12</a>
</span><span class=lnt id=hl-100-13><a class=lnlinks href=#hl-100-13>13</a>
</span><span class=lnt id=hl-100-14><a class=lnlinks href=#hl-100-14>14</a>
</span><span class=lnt id=hl-100-15><a class=lnlinks href=#hl-100-15>15</a>
</span><span class=lnt id=hl-100-16><a class=lnlinks href=#hl-100-16>16</a>
</span><span class=lnt id=hl-100-17><a class=lnlinks href=#hl-100-17>17</a>
</span><span class=lnt id=hl-100-18><a class=lnlinks href=#hl-100-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>216</span><span class=p>]:</span> <span class=n>bucket_sums</span> <span class=o>=</span> <span class=n>grouped</span><span class=o>.</span><span class=n>contb_receipt_amt</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span><span class=o>.</span><span class=n>unstack</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>217</span><span class=p>]:</span> <span class=n>normed_sums</span> <span class=o>=</span> <span class=n>bucket_sums</span><span class=o>.</span><span class=n>div</span><span class=p>(</span><span class=n>bucket_sums</span><span class=o>.</span><span class=n>sum</span><span class=p>(</span><span class=n>axis</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span> <span class=n>axis</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>218</span><span class=p>]:</span> <span class=n>normed_sums</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>218</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>cand_nm</span>              <span class=n>Obama</span><span class=p>,</span> <span class=n>Barack</span>  <span class=n>Romney</span><span class=p>,</span> <span class=n>Mitt</span>
</span></span><span class=line><span class=cl><span class=n>contb_receipt_amt</span>                               
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span>                    <span class=mf>0.805182</span>      <span class=mf>0.194818</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span>                   <span class=mf>0.918767</span>      <span class=mf>0.081233</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>100</span><span class=p>]</span>                 <span class=mf>0.910769</span>      <span class=mf>0.089231</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>1000</span><span class=p>]</span>               <span class=mf>0.710176</span>      <span class=mf>0.289824</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>1000</span><span class=p>,</span> <span class=mi>10000</span><span class=p>]</span>             <span class=mf>0.447326</span>      <span class=mf>0.552674</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>10000</span><span class=p>,</span> <span class=mi>100000</span><span class=p>]</span>           <span class=mf>0.823120</span>      <span class=mf>0.176880</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>100000</span><span class=p>,</span> <span class=mi>1000000</span><span class=p>]</span>         <span class=mf>1.000000</span>           <span class=n>NaN</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=mi>1000000</span><span class=p>,</span> <span class=mi>10000000</span><span class=p>]</span>       <span class=mf>1.000000</span>           <span class=n>NaN</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>219</span><span class=p>]:</span> <span class=n>normed_sums</span><span class=p>[:</span><span class=o>-</span><span class=mi>2</span><span class=p>]</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s1>&#39;barh&#39;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://gitee.com/wugenqiang/images/raw/master/02/1240-20201031180513851.png alt="å›¾14-13 ä¸¤ä½å€™é€‰äººæ”¶åˆ°çš„å„ç§æèµ é¢åº¦çš„æ€»é¢æ¯”ä¾‹"></p><p>æˆ‘æ’é™¤äº†ä¸¤ä¸ªæœ€å¤§çš„é¢å…ƒï¼Œå› ä¸ºè¿™äº›ä¸æ˜¯ç”±ä¸ªäººæèµ çš„ã€‚</p><p>è¿˜å¯ä»¥å¯¹è¯¥åˆ†æè¿‡ç¨‹åšè®¸å¤šçš„æç‚¼å’Œæ”¹è¿›ã€‚æ¯”å¦‚è¯´ï¼Œå¯ä»¥æ ¹æ®èµåŠ©äººçš„å§“åå’Œé‚®ç¼–å¯¹æ•°æ®è¿›è¡Œèšåˆï¼Œä»¥ä¾¿æ‰¾å‡ºå“ªäº›äººè¿›è¡Œäº†å¤šæ¬¡å°é¢ææ¬¾ï¼Œå“ªäº›äººåˆè¿›è¡Œäº†ä¸€æ¬¡æˆ–å¤šæ¬¡å¤§é¢ææ¬¾ã€‚æˆ‘å¼ºçƒˆå»ºè®®ä½ ä¸‹è½½è¿™äº›æ•°æ®å¹¶è‡ªå·±æ‘¸ç´¢ä¸€ä¸‹ã€‚</p><h3 id=1453-æ ¹æ®å·ç»Ÿè®¡èµåŠ©ä¿¡æ¯>14.5.3 æ ¹æ®å·ç»Ÿè®¡èµåŠ©ä¿¡æ¯
<a class=header-anchor href=#1453-%e6%a0%b9%e6%8d%ae%e5%b7%9e%e7%bb%9f%e8%ae%a1%e8%b5%9e%e5%8a%a9%e4%bf%a1%e6%81%af></a></h3><p>æ ¹æ®å€™é€‰äººå’Œå·å¯¹æ•°æ®è¿›è¡Œèšåˆæ˜¯å¸¸è§„æ“ä½œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-101-1><a class=lnlinks href=#hl-101-1> 1</a>
</span><span class=lnt id=hl-101-2><a class=lnlinks href=#hl-101-2> 2</a>
</span><span class=lnt id=hl-101-3><a class=lnlinks href=#hl-101-3> 3</a>
</span><span class=lnt id=hl-101-4><a class=lnlinks href=#hl-101-4> 4</a>
</span><span class=lnt id=hl-101-5><a class=lnlinks href=#hl-101-5> 5</a>
</span><span class=lnt id=hl-101-6><a class=lnlinks href=#hl-101-6> 6</a>
</span><span class=lnt id=hl-101-7><a class=lnlinks href=#hl-101-7> 7</a>
</span><span class=lnt id=hl-101-8><a class=lnlinks href=#hl-101-8> 8</a>
</span><span class=lnt id=hl-101-9><a class=lnlinks href=#hl-101-9> 9</a>
</span><span class=lnt id=hl-101-10><a class=lnlinks href=#hl-101-10>10</a>
</span><span class=lnt id=hl-101-11><a class=lnlinks href=#hl-101-11>11</a>
</span><span class=lnt id=hl-101-12><a class=lnlinks href=#hl-101-12>12</a>
</span><span class=lnt id=hl-101-13><a class=lnlinks href=#hl-101-13>13</a>
</span><span class=lnt id=hl-101-14><a class=lnlinks href=#hl-101-14>14</a>
</span><span class=lnt id=hl-101-15><a class=lnlinks href=#hl-101-15>15</a>
</span><span class=lnt id=hl-101-16><a class=lnlinks href=#hl-101-16>16</a>
</span><span class=lnt id=hl-101-17><a class=lnlinks href=#hl-101-17>17</a>
</span><span class=lnt id=hl-101-18><a class=lnlinks href=#hl-101-18>18</a>
</span><span class=lnt id=hl-101-19><a class=lnlinks href=#hl-101-19>19</a>
</span><span class=lnt id=hl-101-20><a class=lnlinks href=#hl-101-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>220</span><span class=p>]:</span> <span class=n>grouped</span> <span class=o>=</span> <span class=n>fec_mrbo</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;cand_nm&#39;</span><span class=p>,</span> <span class=s1>&#39;contbr_st&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>221</span><span class=p>]:</span> <span class=n>totals</span> <span class=o>=</span> <span class=n>grouped</span><span class=o>.</span><span class=n>contb_receipt_amt</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span><span class=o>.</span><span class=n>unstack</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>222</span><span class=p>]:</span> <span class=n>totals</span> <span class=o>=</span> <span class=n>totals</span><span class=p>[</span><span class=n>totals</span><span class=o>.</span><span class=n>sum</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>100000</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>223</span><span class=p>]:</span> <span class=n>totals</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>223</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>cand_nm</span>    <span class=n>Obama</span><span class=p>,</span> <span class=n>Barack</span>  <span class=n>Romney</span><span class=p>,</span> <span class=n>Mitt</span>
</span></span><span class=line><span class=cl><span class=n>contbr_st</span>                             
</span></span><span class=line><span class=cl><span class=n>AK</span>             <span class=mf>281840.15</span>      <span class=mf>86204.24</span>
</span></span><span class=line><span class=cl><span class=n>AL</span>             <span class=mf>543123.48</span>     <span class=mf>527303.51</span>
</span></span><span class=line><span class=cl><span class=n>AR</span>             <span class=mf>359247.28</span>     <span class=mf>105556.00</span>
</span></span><span class=line><span class=cl><span class=n>AZ</span>            <span class=mf>1506476.98</span>    <span class=mf>1888436.23</span>
</span></span><span class=line><span class=cl><span class=n>CA</span>           <span class=mf>23824984.24</span>   <span class=mf>11237636.60</span>
</span></span><span class=line><span class=cl><span class=n>CO</span>            <span class=mf>2132429.49</span>    <span class=mf>1506714.12</span>
</span></span><span class=line><span class=cl><span class=n>CT</span>            <span class=mf>2068291.26</span>    <span class=mf>3499475.45</span>
</span></span><span class=line><span class=cl><span class=n>DC</span>            <span class=mf>4373538.80</span>    <span class=mf>1025137.50</span>
</span></span><span class=line><span class=cl><span class=n>DE</span>             <span class=mf>336669.14</span>      <span class=mf>82712.00</span>
</span></span><span class=line><span class=cl><span class=n>FL</span>            <span class=mf>7318178.58</span>    <span class=mf>8338458.81</span></span></span></code></pre></td></tr></table></div></div><p>å¦‚æœå¯¹å„è¡Œé™¤ä»¥æ€»èµåŠ©é¢ï¼Œå°±ä¼šå¾—åˆ°å„å€™é€‰äººåœ¨å„å·çš„æ€»èµåŠ©é¢æ¯”ä¾‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-102-1><a class=lnlinks href=#hl-102-1> 1</a>
</span><span class=lnt id=hl-102-2><a class=lnlinks href=#hl-102-2> 2</a>
</span><span class=lnt id=hl-102-3><a class=lnlinks href=#hl-102-3> 3</a>
</span><span class=lnt id=hl-102-4><a class=lnlinks href=#hl-102-4> 4</a>
</span><span class=lnt id=hl-102-5><a class=lnlinks href=#hl-102-5> 5</a>
</span><span class=lnt id=hl-102-6><a class=lnlinks href=#hl-102-6> 6</a>
</span><span class=lnt id=hl-102-7><a class=lnlinks href=#hl-102-7> 7</a>
</span><span class=lnt id=hl-102-8><a class=lnlinks href=#hl-102-8> 8</a>
</span><span class=lnt id=hl-102-9><a class=lnlinks href=#hl-102-9> 9</a>
</span><span class=lnt id=hl-102-10><a class=lnlinks href=#hl-102-10>10</a>
</span><span class=lnt id=hl-102-11><a class=lnlinks href=#hl-102-11>11</a>
</span><span class=lnt id=hl-102-12><a class=lnlinks href=#hl-102-12>12</a>
</span><span class=lnt id=hl-102-13><a class=lnlinks href=#hl-102-13>13</a>
</span><span class=lnt id=hl-102-14><a class=lnlinks href=#hl-102-14>14</a>
</span><span class=lnt id=hl-102-15><a class=lnlinks href=#hl-102-15>15</a>
</span><span class=lnt id=hl-102-16><a class=lnlinks href=#hl-102-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>224</span><span class=p>]:</span> <span class=n>percent</span> <span class=o>=</span> <span class=n>totals</span><span class=o>.</span><span class=n>div</span><span class=p>(</span><span class=n>totals</span><span class=o>.</span><span class=n>sum</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=n>axis</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>In</span> <span class=p>[</span><span class=mi>225</span><span class=p>]:</span> <span class=n>percent</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>225</span><span class=p>]:</span> 
</span></span><span class=line><span class=cl><span class=n>cand_nm</span>    <span class=n>Obama</span><span class=p>,</span> <span class=n>Barack</span>  <span class=n>Romney</span><span class=p>,</span> <span class=n>Mitt</span>
</span></span><span class=line><span class=cl><span class=n>contbr_st</span>                             
</span></span><span class=line><span class=cl><span class=n>AK</span>              <span class=mf>0.765778</span>      <span class=mf>0.234222</span>
</span></span><span class=line><span class=cl><span class=n>AL</span>              <span class=mf>0.507390</span>      <span class=mf>0.492610</span>
</span></span><span class=line><span class=cl><span class=n>AR</span>              <span class=mf>0.772902</span>      <span class=mf>0.227098</span>
</span></span><span class=line><span class=cl><span class=n>AZ</span>              <span class=mf>0.443745</span>      <span class=mf>0.556255</span>
</span></span><span class=line><span class=cl><span class=n>CA</span>              <span class=mf>0.679498</span>      <span class=mf>0.320502</span>
</span></span><span class=line><span class=cl><span class=n>CO</span>              <span class=mf>0.585970</span>      <span class=mf>0.414030</span>
</span></span><span class=line><span class=cl><span class=n>CT</span>              <span class=mf>0.371476</span>      <span class=mf>0.628524</span>
</span></span><span class=line><span class=cl><span class=n>DC</span>              <span class=mf>0.810113</span>      <span class=mf>0.189887</span>
</span></span><span class=line><span class=cl><span class=n>DE</span>              <span class=mf>0.802776</span>      <span class=mf>0.197224</span>
</span></span><span class=line><span class=cl><span class=n>FL</span>              <span class=mf>0.467417</span>      <span class=mf>0.532583</span></span></span></code></pre></td></tr></table></div></div><h2 id=146-æ€»ç»“>14.6 æ€»ç»“
<a class=header-anchor href=#146-%e6%80%bb%e7%bb%93></a></h2><p>æˆ‘ä»¬å·²ç»å®Œæˆäº†æ­£æ–‡çš„æœ€åä¸€ç« ã€‚é™„å½•ä¸­æœ‰ä¸€äº›é¢å¤–çš„å†…å®¹ï¼Œå¯èƒ½å¯¹ä½ æœ‰ç”¨ã€‚</p><p>æœ¬ä¹¦ç¬¬ä¸€ç‰ˆå‡ºç‰ˆå·²ç»æœ‰5å¹´äº†ï¼ŒPythonå·²ç»æˆä¸ºäº†ä¸€ä¸ªæµè¡Œçš„ã€å¹¿æ³›ä½¿ç”¨çš„æ•°æ®åˆ†æè¯­è¨€ã€‚ä½ ä»æœ¬ä¹¦ä¸­å­¦åˆ°çš„æ–¹æ³•ï¼Œåœ¨ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´éƒ½æ˜¯å¯ç”¨çš„ã€‚æˆ‘å¸Œæœ›æœ¬ä¹¦ä»‹ç»çš„å·¥å…·å’Œåº“å¯¹ä½ çš„å·¥ä½œæœ‰ç”¨ã€‚</p></div><footer class=post-footer><div class=post-tags><a href=/tags/python/>python</a></div><div class=post-share-tools><div class=post-share-loading><i class="fa-solid fa-ellipsis fa-spin"></i></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class=a2a_dd href=https://www.addtoany.com/share></a><a class=a2a_button_wechat></a><a class=a2a_button_qzone></a><a class=a2a_button_sina_weibo></a><a class=a2a_button_douban></a><a class=a2a_button_facebook></a><a class=a2a_button_x></a><a class=a2a_button_email></a><a class=a2a_button_printfriendly></a></div></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>è¯·æˆ‘å–æ¯å’–å•¡å§ ãƒ¾(^â–½^*)))</div><button>
èµèµ</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="Rich - æ”¯ä»˜å®">
<span>æ”¯ä»˜å®</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="Rich - å¾®ä¿¡">
<span>å¾®ä¿¡</span></div></div></div><div class=post-copyright><img src=/imgs/cc/cc.svg class=cc-icon width=75 height=75 align=right alt=å…±äº«çŸ¥è¯† title=å…±äº«çŸ¥è¯†><ul><li class=post-copyright-title><strong>æ–‡ç« æ ‡é¢˜ï¼š</strong>
ç¬¬åå››ç«  æ•°æ®åˆ†ææ¡ˆä¾‹</li><li class=post-copyright-author><strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Rich</li><li class=post-copyright-link><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
<a id=post-cr-link href=//localhost:1313/post/%E7%A8%8B%E6%8A%80/python/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/ch14-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/ title="ç¬¬åå››ç«  æ•°æ®åˆ†ææ¡ˆä¾‹">//localhost:1313/post/%E7%A8%8B%E6%8A%80/python/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/ch14-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/</a></li><li class=post-copyright-license><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬ä½œå“é‡‡ç”¨ <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans>BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li><li><div class=license-icons><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans target=_blank><img src=/imgs/cc/big/by_nc_sa.svg alt=BY-NC-SA title=BY-NC-SA>
</a><a href=https://notbyai.fyi target=_blank><img src=/imgs/notbyai/zh-hans/white.svg title="Not By AI"></a></div></li></ul></div><div class=followme><span>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¶å®ƒå‘å¸ƒæ¸ é“</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i>
</span><span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/rss.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/%E7%A8%8B%E6%8A%80/python/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/ch13-python%E5%BB%BA%E6%A8%A1%E5%BA%93%E4%BB%8B%E7%BB%8D/ rel=next title="ç¬¬åä¸‰ç«  Python å»ºæ¨¡åº“ä»‹ç»"><i class="fa fa-chevron-left"></i> ç¬¬åä¸‰ç«  Python å»ºæ¨¡åº“ä»‹ç»</a></div><div class="post-nav-prev post-nav-item"><a href=/post/%E7%A8%8B%E6%8A%80/python/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/ch11-%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97/ rel=prev title="ç¬¬åä¸€ç«  æ—¶é—´åºåˆ—">ç¬¬åä¸€ç«  æ—¶é—´åºåˆ—
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div id=i18n-translate class=i18n-translate><i class="fa fa-language"></i><div id=lang-select class=lang-select><div id=lang-selected class=selected-option><span class="flag-icon flag-icon-zh-cn"></span>
<span class=selected-language>ç®€ä½“ä¸­æ–‡</span>
<i class="fa fa-chevron-down"></i></div><div id=lang-options class=lang-options><div class=lang-option lang-code=zh-cn lang-name=ç®€ä½“ä¸­æ–‡ lang-url=/post/%E7%A8%8B%E6%8A%80/python/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/ch14-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/><span class="flag-icon flag-icon-zh-cn"></span>
<span class=lang-name>ç®€ä½“ä¸­æ–‡</span></div></div></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2020 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>Rich</span></div></div></footer><script class=next-config data-name=page type=application/json>{"clipboard":{"js":{"alias":"clipboard","file":"dist/clipboard.min.js","name":"clipboard.js","version":"2.0.11"}},"comments":false,"expired":false,"isHome":false,"isPage":true,"path":"ch14-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B","permalink":"//localhost:1313/post/%E7%A8%8B%E6%8A%80/python/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/ch14-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/","title":"ç¬¬åå››ç«  æ•°æ®åˆ†ææ¡ˆä¾‹","toc":true,"waline":{"commentcnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/comment.js","name":"comment","version":"2.15.8"}}}</script><script type=text/javascript src=//localhost:1313/js/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=//localhost:1313/js/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"hostname":"//localhost:1313/","i18n":{"ds_day":" å¤©å‰","ds_days":" å¤© ","ds_hour":" å°æ—¶å‰","ds_hours":" å°æ—¶ ","ds_just":"åˆšåˆš","ds_min":" åˆ†é’Ÿå‰","ds_mins":" åˆ†é’Ÿ","ds_month":" ä¸ªæœˆå‰","ds_years":" å¹´ ","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","placeholder":"æœç´¢..."},"isMultiLang":true,"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"slideInRight","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":true,"plugin":"waline"},"views":{"enable":true,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-CN","num":8},"enable":true},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"//localhost:1313/js/3rd"}},"version":"4.8.3","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"è¯·æ–‡æ˜å‘è¨€å“Ÿ ãƒ¾(â‰§â–½â‰¦*)o","reaction":true,"reactiontext":["ç‚¹èµ","è¸©ä¸€ä¸‹","å¾—æ„","ä¸å±‘","å°´å°¬","ç¡è§‰"],"reactiontitle":"ä½ è®¤ä¸ºè¿™ç¯‡æ–‡ç« æ€ä¹ˆæ ·ï¼Ÿ","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"å¿«æ¥å‘è¡¨ä½ çš„æ„è§å§ (â‰§âˆ€â‰¦)ã‚","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"2.15.8"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"2.15.8"}}}</script><script type=text/javascript src="/js/main.js?=1750130937" defer></script><script type=text/javascript src="/js/clipboard.js?=1750130938" defer></script></body></html>